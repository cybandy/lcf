# https://hub.nuxt.com/ llms-full.txt

## NuxtHub Hosting Solutions
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

[Environments & Improved variable management](https://hub.nuxt.com/changelog/environments)

# Ship Nuxt apps that scale.

Deploy and scale your Nuxt applications worldwide with NuxtHub, the Cloudflare-powered platform that ensures lightning-fast performance at low cost and with full-stack capabilities.

[Get started](https://hub.nuxt.com/docs/getting-started/installation)

...

Used and loved by 10K+ developers and teams.

“Nuxt on Cloudflare infra with minimal effort - this is huge!”

EYEvan You•Author of Vue.js and Vite.

![NuxtHub Deploy page](https://hub.nuxt.com/images/landing/hero-screenshot-dark.svg)![NuxtHub Deploy page](https://hub.nuxt.com/images/landing/hero-screenshot-light.svg)

- ## Cloud Hosting



Deploy your application with confidence on our Nuxt-optimized Cloud hosting platform.

- ## SQL Database



Add SQL databases to your app and build any kind of full-stack applications.

- ## Files Storage



Upload, store and serve images, videos and any kind of file.

- ## KV Storage



Leverage a Key-Value data store replicated globally for maximum performance.

- ## Caching



Cache Nuxt pages, API routes and server functions on the Edge.

- ## AI & Vectorize



Run generative AI tasks on a global network and build full-stack AI applications.

- ## Real-time & sockets



Create collaborative applications, real-time chat, multiplayer games and more.

- ## Analytics Engine  Soon



Write data points & query with an SQL API with a unlimited-cardinality analytics service at scale.

- ## Cron Triggers & Queues  Soon



Run periodic jobs with cron triggers & make sure to guarantee delivery with queues.


I created NuxtHub to give Nuxt developers the hosting solution I always wanted: blazing-fast performance on Cloudflare's edge network, a Nuxt-like developer experience and the freedom to own your infrastructure. With a generous free tier & predictable pricing, NuxtHub allows you to deploy your ideas without upfront costs or lock-in concerns. It's hosting that gets out of your way, so you can focus on building great applications.

SC

[Sébastien Chopin](https://x.com/Atinux)

Sébastien Chopin

Creator of Nuxt & NuxtHub

## A tailored solution for faster Nuxt app management

NuxtHub offers a comprehensive suite of tools and features to let you build and deploy full-stack Nuxt applications worldwide.

Edge Rendering

Your Nuxt apps render in milliseconds from 300+ locations around the world.

Hybrid Rendering

Render your Nuxt app with SSR, SPA or pre-rendering at the page level.

Auto Scaling

Your app handles traffic spikes without manual intervention.

Global CDN

Leverages Cloudflare's worldwide network to deliver blazing fast static assets.

Instant Rollbacks

Quickly revert to previous deployments with one click if issues arise.

Preview Deployments

Test pull requests and branches in isolated environments before going live.

Custom Domains

Easy setup for your own domains or use our free .nuxt.dev subdomains.

Highly affordable

Pay only for what you use, no hidden fees. Start for free with a generous solo plan.

Environment Variables

Securely store secrets, API keys, tokens, and other environment variables.

Automatic HTTPS

SSL certificates are provisioned and renewed automatically.

Real-time Logs

Access to your Nuxt server logs in real-time for debugging purposes.

Import from Git

Select a repository from your favourite Git provider and deploy it globally.

[Open the dashboard](https://admin.hub.nuxt.com/) [Watch a 3 min intro](https://www.youtube.com/watch?v=hlmPqDkc3_s)

## Deploy a Nuxt application in one minute.

Once you've linked your Cloudflare account, deploy your Nuxt application all over the world with our CLI or from Git.

You also get a free .nuxt.dev domain.

[Deploy now](https://hub.nuxt.com/docs/getting-started/deploy#nuxthub-cli) [Watch a 1 min demo](https://www.youtube.com/watch?v=NgmyCN4bIp0)

- ![Connect your Cloudflare account](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/link-cloudflare-account-light.svg)![Connect your Cloudflare account](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/link-cloudflare-account-dark.svg)


## Connect your Cloudflare account



Securely connect with one click using our pre-configured Cloudflare API permissions.

- ![Build your Nuxt app](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/create-nuxt-app-light.svg)![Build your Nuxt app](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/create-nuxt-app-dark.svg)


## Build your Nuxt app



Choose from our optimized templates or import your existing GitHub/GitLab project.

- ![Launch it worldwide](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/deploy-nuxt-app-light.svg)![Launch it worldwide](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/deploy-nuxt-app-dark.svg)


## Launch it worldwide



Deploy with 'npx nuxthub deploy' or leverage Cloudflare Pages CI/CD for automated deployments.

- ![Share it with the world](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/share-nuxt-app-light.svg)![Share it with the world](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/share-nuxt-app-dark.svg)


## Share it with the world



Instantly share your app globally. Monitor & manage resources through the NuxtHub dashboard.


## Your full-stack companion.

On top of hosting your Nuxt projects, you can add a database, key-value and file storage with nearly-zero configuration, locally and globally.

Making it too easy to build & ship full-stack Nuxt applications.

Database

## A Scalable SQL Database

NuxtHub Database unlocks the power of [Cloudflare D1](https://developers.cloudflare.com/d1/) to give you access to a serverless SQL database, with zero configuration. Scale and manage effortlessly, and pay only for what you use.

hubDatabase() server helper

Database browser

Automatic database migrations

[Learn more](https://hub.nuxt.com/docs/features/database)

![A Scalable SQL Database](https://hub.nuxt.com/_ipx/s_581x293/images/landing/nuxthub-admin-database-light.svg)![A Scalable SQL Database](https://hub.nuxt.com/_ipx/s_581x293/images/landing/nuxthub-admin-database-dark.svg)

Blob

## Add & Manage File Uploads

NuxtHub Blob lets you store and access media files on a global network thanks to [Cloudflare R2](https://developers.cloudflare.com/r2/). Allow users to securely upload data-like images, videos and audio files with our server helpers.

hubBlob() server helper

Dashboard to upload and manage files

Manage blobs in the Nuxt DevTools

[Learn more](https://hub.nuxt.com/docs/features/blob)

![Add & Manage File Uploads](https://hub.nuxt.com/_ipx/s_581x317/images/landing/nuxthub-admin-blob-light.svg)![Add & Manage File Uploads](https://hub.nuxt.com/_ipx/s_581x317/images/landing/nuxthub-admin-blob-dark.svg)

Key-Value

## A Global Key-Value Database

NuxtHub KV leverages [Cloudflare Workers KV](https://developers.cloudflare.com/kv/) to access a global, low-latency, key-value data storage across 300+ global locations. Access it in your Nuxt codebase, with zero-configuration.

hubKV() server helper

Key-Value storage visual browser

Manage KV storage in the Nuxt DevTools

[Learn more](https://hub.nuxt.com/docs/features/kv)

![A Global Key-Value Database](https://hub.nuxt.com/_ipx/s_582x310/images/landing/nuxthub-admin-kv-light.svg)![A Global Key-Value Database](https://hub.nuxt.com/_ipx/s_582x310/images/landing/nuxthub-admin-kv-dark.svg)

AI & Vectorize

## Build Full-Stack AI Apps

Run generative AI tasks on a global network of NVIDIA GPUs with no extra setup and build full-stack Nuxt AI applications with our AI & Vectorize server helpers.

hubAI() & hubVectorize() server helpers

Run 60+ machine learning models

Access a vector database to create RAG applications

[Learn more](https://hub.nuxt.com/docs/features/ai)

![Build Full-Stack AI Apps](https://hub.nuxt.com/_ipx/s_580x326/images/landing/nuxthub-ai-light.svg)![Build Full-Stack AI Apps](https://hub.nuxt.com/_ipx/s_580x326/images/landing/nuxthub-ai-dark.svg)

Caching

## Optimize your Nuxt app performance

NuxtHub's Cache feature provides powerful tools to optimize your application's performance by caching pages, API routes, and server functions. This can significantly reduce load times and improve user experience.

API Routes Caching

Server Functions Caching

Cache storage browser management

[Learn more](https://hub.nuxt.com/docs/features/cache)

![Optimize your Nuxt app performance](https://hub.nuxt.com/_ipx/s_581x310/images/landing/nuxthub-admin-cache-light.svg)![Optimize your Nuxt app performance](https://hub.nuxt.com/_ipx/s_581x310/images/landing/nuxthub-admin-cache-dark.svg)

Browser Rendering

## Access a headless browser on the edge

Simplify your web workflows with headless browser capabilities. From basic image capture to complex data extraction, NuxtHub lets you automate tasks. Experience the power of web automation in a single click.

hubBrowser() server helpers

Access a headless browser on the edge

Take screenshots of web pages

[Learn more](https://hub.nuxt.com/docs/features/browser)

![Access a headless browser on the edge](https://hub.nuxt.com/_ipx/s_580x326/images/landing/nuxthub-admin-browser-light.svg)![Access a headless browser on the edge](https://hub.nuxt.com/_ipx/s_580x326/images/landing/nuxthub-admin-browser-dark.svg)

Remote Storage

## Works locally as a team with shared data

NuxtHub grants the ability to access your remote storage from your local environment or from external Nuxt projects. This is made possible by our secured proxy system.

Work as a team on the same database

Apply scripts to your remote storage

Lock/Unlock access to your production with one click

[Learn more](https://hub.nuxt.com/docs/getting-started/remote-storage)

![Works locally as a team with shared data](https://hub.nuxt.com/_ipx/s_576x284/images/landing/nuxthub-remote-access-light.svg)![Works locally as a team with shared data](https://hub.nuxt.com/_ipx/s_576x284/images/landing/nuxthub-remote-access-dark.svg)

## What people say about us

NuxtHub empowers developers to ship full-stack Nuxt applications with zero configuration. Hear what they think about it.

Nuxt on Cloudflare infra with minimal effort - this is huge!

EY

Evan You

Author of Vue.js and Vite.

I love the polish and the batteries-included approach. NuxtHub takes web framework and hosting integration to a new level!

IM

Igor Minar

Software Engineer at Cloudflare

NuxtHub is hands down the easiest way to get a project from zero to production on the Cloudflare stack!

CH

Charlie Hield

Senior Creative Technologist

I can't find an excuse to not go full-stack with Nuxt from now on. Ship fast the Nuxt way, zero config. Just plug & deploy.

IO

Israel Ortuño

Co-founder of VueJobs

Took me less than 90 seconds to deploy an app with DB, KV, File storage and Caching, all on the edge with just a single command.

FA

Fayaz Ahmed

Indie Hacker

Nuxt is becoming the best framework for bootstrappers imo. NuxtHub is a layer on top of Cloudflare services for cheap & fast full-stack edge hosting.

TJ

Tommy J. Vedvik

UX Developer

I love how NuxtHub combines, amplifies and simplifies the Cloudflare tooling with the wide and mature Nuxt ecosystem. I cannot wait to see how it will evolve and expand in the future!

DP

Dario Piotrowicz

Web Developer at Cloudflare

Just deployed my first site to Cloudflare using NuxtHub. Very sleek experience!

MO

Markus Oberlehner

Web Developer

It's amazing to be able to run a single command and get existing Nuxt project deployed on edge within minutes! It felt like unlocking the missing infrastructure and UI for Cloudflare, enhancing the developer experience in such an extraordinary way.

AF

Anthony Fu

Core team Vue.js, Vite & Nuxt

NuxtHub and Cloudflare are my go to for full stack apps. The DX is joyous and far superior to any other platform I've used. My team is able to iterate quickly, and build beautiful, performant apps with ease.

JB

Jonathan Beckman

Founder of GuaranTee Time

At YG, our team recently grew and that meant more seats on all the tools we use. Migrating our hosting workflow to NuxtHub not only took just a few minutes but saved us money from our previous provider. NuxtHub provides an excellent management layer on top of our infrastructure and we’re super happy about the move!

ED

Eckhardt Dreyer

Lead Developer at YG

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

## NuxtHub Environments Update
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

June 9, 2025

# Environments & Improved variable management

Create additional deployment environments & revamped environment variable management

[RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev) [AB\\
\\
Ahad Birang\\
\\
@farnabaz.dev](https://bsky.app/profile/farnabaz.dev)

This feature is available on both [free and pro plans](https://hub.nuxt.com/pricing) and in [`@nuxthub/core >= v0.9.0`](https://github.com/nuxt-hub/core/releases/tag/v0.9.0).

We've been working hard on closing the gap between Pages and Workers, and improving the experience using NuxtHub. With this release, we've brought preview environments to Workers, and improved environment variables management.

![NuxtHub Environments](https://hub.nuxt.com/_ipx/s_925x485/images/changelog/nuxthub-environments.png)

## [Environments](https://hub.nuxt.com/changelog/environments\#environments)

When we first introduced Cloudflare Workers support in NuxtHub, we only supported production deployments. Today, we're excited to announce that Workers now has the same powerful environment capabilities as Pages, making it easier than ever to test and deploy your applications. Any deployment from a non-production branch automatically gets deployed to the preview environment with separate resources (database, kv, etc.) than production.

Due to Cloudflare limitations, deployments with the `cloudflare_durable` preset will not receive a unique deployment URL.

### [Custom Environments](https://hub.nuxt.com/changelog/environments\#custom-environments)

We're taking things a step further and introducing the ability to create additional environments beyond just preview and production, such as staging, testing, etc. All environments in NuxtHub have unique resources, making them perfect for testing. NuxtHub allows configuring the branch patterns on custom environments with exact, prefix and suffix, to enable different workflows.

- Example: The branch `staging` deploys to the staging environment
- Example: All branches starting with `bugfix/` deploys to a testing environment

Get started from the new "Environments" page of NuxtHub Admin.

## [Revamped environment variables management](https://hub.nuxt.com/changelog/environments\#revamped-environment-variables-management)

The biggest challenge faced by users since introducing the NuxtHub GitHub Action as the primary method for deployment was syncing environment variables and secrets to GitHub. Our syncing relied on [environments in GitHub](https://docs.github.com/en/actions/managing-workflow-runs-and-deployments/managing-deployments/managing-environments-for-deployment), which is a paid feature, therefore many NuxtHub users had to manually set environment variables to GitHub. Furthermore, GitHub Actions required specifying every secret used within the workflow which meant there was friction when using secrets, such as `NUXT_UI_PRO_LICENSE`.

We've worked hard to resolve this hurdle and to streamline the experience using NuxtHub. Now we're thrilled to introduce [`nuxt-hub/action@v2`](https://github.com/nuxt-hub/action), which now securely pulls environment variables and secrets from NuxtHub Admin, and builds your Nuxt application. On top of this, you can now scope environment variables to be build or runtime only, allowing you to further protect secrets.

### [Migration guide](https://hub.nuxt.com/changelog/environments\#migration-guide)

In order to use the new system, follow our migration guide:

1. Update to [`@nuxthub/core >= v0.9.0`](https://github.com/nuxt-hub/core/releases/tag/v0.9.0) on production and preview
2. Go to Environment Variables within the NuxtHub Admin
3. Click "Migrate environment variables"

#### [Migrating to NuxtHub Action v2](https://hub.nuxt.com/changelog/environments\#migrating-to-nuxthub-action-v2)

1. Remove the `environments:` section
2. Remove the `Build application` section
3. Upgrade from `nuxt-hub/action@v1` to `nuxt-hub/action@v2`

See the updated GitHub Action workflow below:

```
name: Deploy to NuxtHub
on: push

jobs:
  deploy:
    name: "Deploy to NuxtHub"
    runs-on: ubuntu-latest
-    environment:
-      name: ${{ github.ref == 'refs/heads/main' && 'production' || 'preview' }}
-      url: ${{ steps.deploy.outputs.deployment-url }}
    permissions:
      contents: read
      id-token: write

    steps:
      - uses: actions/checkout@v4

      - name: Install pnpm
        uses: pnpm/action-setup@v4

      - name: Install Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 22
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install

-      - name: Ensure NuxtHub module is installed
-        run: pnpx nuxthub@latest ensure
-
-      - name: Build application
-        run: pnpm build

-      - name: Deploy to NuxtHub
-        uses: nuxt-hub/action@v1
-        id: deploy
-        with:
-          project-key: <YOUR-PROJECT-KEY>

+      - name: Build & Deploy to NuxtHub
+        uses: nuxt-hub/action@v2
+        with:
+          project-key: <YOUR-PROJECT-KEY>

```

4. If your Nuxt app is not within the repository root and `directory:` parameter is provided, remove the trailing `/dist`.

```
-      - name: Deploy to NuxtHub
-        uses: nuxt-hub/action@v1
-        with:
-          directory: frontend/dist

+      - name: Build & Deploy to NuxtHub
+        uses: nuxt-hub/action@v2
+        with:
+          directory: frontend

```

This release marks a significant milestone in our journey to provide a seamless deployment experience across both Pages and Workers. The introduction of preview environments and improved environment variables management brings feature parity between the two platforms, making it easier than ever to deploy and test your Nuxt applications. We're excited to see how you'll use these new capabilities to streamline your development workflow.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Worker logs with history on NuxtHub Admin\\
\\
Worker logs are now available on NuxtHub Admin, allowing you to filter and analyze historical logs from your deployed Nuxt App.](https://hub.nuxt.com/changelog/workers-logs-history)

## Full-Stack Nuxt Templates
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Full-Stack Nuxt Templates

Explore open source full-stack Nuxt templates to get up and running in a few seconds.

[Deploy a template](https://hub.nuxt.com/new) [Read the documentation](https://hub.nuxt.com/docs/getting-started)

![Hello Edge](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2hlbGxvLm51eHQuZGV2IiwiaWF0IjoxNzE4NjQyMDI4fQ.wJZMyoRxUi7L6BWn8z9xOD8xHQvu88G-dOdmwVg963U.jpg)

## Hello Edge

A minimal Nuxt project running on the edge.

[Demo](https://hello.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=hello)

![NuxtHub Starter](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2h1Yi1zdGFydGVyLm51eHQuZGV2IiwiaWF0IjoxNzEyMDQ5NjEyfQ.I8ooZK96hYTigKTaExQspIP7QKHtP9kCHATy_6TnaNs.jpg)

## NuxtHub Starter

A template to get started with NuxtHub storage and features.

[database](https://hub.nuxt.com/docs/features/database) [kv](https://hub.nuxt.com/docs/features/kv) [blob](https://hub.nuxt.com/docs/features/blob) [cache](https://hub.nuxt.com/docs/features/cache)

[Deploy](https://hub.nuxt.com/new?template=starter)

![Atidone](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL251eHQtdG9kb3MtZWRnZS5wYWdlcy5kZXYiLCJpYXQiOjE3MTEzNjM3NjV9.T3QNfNtEiyQv6vsrwfbYx1yFlPbDq4PO41RtXXUEdMc.jpg)

## Atidone

A full-stack application with authentication and a database to manage your Todos.

[database](https://hub.nuxt.com/docs/features/database)

[Demo](https://todos.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=atidone)

![Nuxt Image Gallery](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL251eHQtaW1hZ2UtZ2FsbGVyeS5wYWdlcy5kZXYiLCJpYXQiOjE3MTA4NzAyMjd9.n97Cf7vLFd085tbV4Gqws0xRfNqVKKBI6NV3mfl7soE.jpg)

## Nuxt Image Gallery

An image gallery to upload, edit and share your images to the world.

[blob](https://hub.nuxt.com/docs/features/blob)

[Demo](https://image-gallery.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=image-gallery)

![Flux AI Image Generator](https://admin.hub.nuxt.com/images/templates/flux-image-generator.jpg)

## Flux AI Image Generator

An app to generate images with AI using Flux-1 Schell and storing in your Blob gallery, protected with Basic Auth.

[ai](https://hub.nuxt.com/docs/features/ai) [blob](https://hub.nuxt.com/docs/features/blob)

[Deploy](https://hub.nuxt.com/new?template=flux-image-generator)

![Multiplayer Globe](https://multiplayer-globe.nuxthub.workers.dev/og-image.png)

## Multiplayer Globe

Display website visitor locations in real-time using Nuxt and NuxtHub.

[realtime](https://hub.nuxt.com/docs/features/realtime)

[Demo](https://multiplayer-globe.nuxthub.workers.dev/) [Deploy](https://hub.nuxt.com/new?template=multiplayer-globe)

![Atinotes](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL25vdGVzLmF0aW51eC5jb20iLCJpYXQiOjE3MTA4NzM5MDN9.4OB91tp5bs_s_ZQ-6ybo_CkNmzE0XOTNKR_wzvkeO_E.jpg)

## Atinotes

An editable website powered by Markdown & Vue components with dynamic OG image generation.

Workers Paid [kv](https://hub.nuxt.com/docs/features/kv)

[Demo](https://notes.atinux.com/) [Deploy](https://hub.nuxt.com/new?template=atinotes)

![Gavarnie](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2dhdmFybmllLm51eHQuZGV2IiwiaWF0IjoxNzIzOTc0OTcxfQ.jEWdUHMrFvLcR3J0Nctg9Yx4uorqCed0hcaZbfbFRD4.jpg)

## Gavarnie

Full-stack template with authentication, profile and many features for a quickstart.

[database](https://hub.nuxt.com/docs/features/database) [blob](https://hub.nuxt.com/docs/features/blob) [kv](https://hub.nuxt.com/docs/features/kv)

[Demo](https://gavarnie.barbapapazes.dev/) [Deploy](https://hub.nuxt.com/new?template=gavarnie)

![Chat with PDF](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2NoYXQtd2l0aC1wZGYubnV4dC5kZXYiLCJpYXQiOjE3Mjg5ODA4MDF9.o7sqdh1j0WRCaC0LvCdTX5tPOmhgFT7xkf_EOMvsC5g.jpg)

## Chat with PDF

A a full-stack AI-powered application that lets you to ask questions to PDF documents.

[ai](https://hub.nuxt.com/docs/features/ai) [blob](https://hub.nuxt.com/docs/features/blob) [database](https://hub.nuxt.com/docs/features/database) [cache](https://hub.nuxt.com/docs/features/cache) [kv](https://hub.nuxt.com/docs/features/kv) [vectorize](https://hub.nuxt.com/docs/features/vectorize)

[Demo](https://chat-with-pdf.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=chat-with-pdf)

![Atidraw](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2RyYXcubnV4dC5kZXYiLCJpYXQiOjE3MTgwMTc3OTF9.ORrHGOCvTaxN7Lk24swRO7k-mrHmExypBquOA8FUlyg.jpg)

## Atidraw

Share your drawings with the world. Powered by Blob & AI.

[blob](https://hub.nuxt.com/docs/features/blob) [ai](https://hub.nuxt.com/docs/features/ai)

[Demo](https://draw.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=atidraw)

![My Pull Requests](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL3Bycy5hdGludXguY29tIiwiaWF0IjoxNzI0MTYwMTkxfQ.yYRD-Gs6EyYQSfg27fZVx1Kle7nq7QBSciDui-mbnnU.jpg)

## My Pull Requests

A template to showcase your open source contributions (pull requests).

[cache](https://hub.nuxt.com/docs/features/cache)

[Demo](https://prs.atinux.com/) [Deploy](https://hub.nuxt.com/new?template=my-pull-requests)

![AI Chat](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2h1Yi1jaGF0LnJhamVldnMud29ya2Vycy5kZXYiLCJpYXQiOjE3NDU0MjQ0NzR9.GiljrKgGomKTJGTcHH55rvA1AbxaNSrgICxOGQQHsK0.jpg)

## AI Chat

A playground to chat with various AI text generation models.

[ai](https://hub.nuxt.com/docs/features/ai)

[Demo](https://hub-chat.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=ai-chat)

![Lemonrepo](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2xlbW9ucmVwby5udXh0LmRldiIsImlhdCI6MTcyNjE2NzgwM30.fwn7Qnp3Q0hnMmpreljhfpfy8R_LmRJxWyl6LmqpgVo.jpg)

## Lemonrepo

A template to sell access to a private GitHub repository with LemonSqueezy.

[kv](https://hub.nuxt.com/docs/features/kv)

[Demo](https://lemonrepo.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=lemonrepo)

![Chat GitHub](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2NoYXQtZ2l0aHViLm51eHQuZGV2IiwiaWF0IjoxNzI2MjA4NzUxfQ.lFmUceA3apEh2PETp4RORS6kqy7hi54l0T7lhUlgm9o.jpg)

## Chat GitHub

Search GitHub in Plain English using OpenAI & GitHub API.

[database](https://hub.nuxt.com/docs/features/database) [cache](https://hub.nuxt.com/docs/features/cache)

[Demo](https://chat-github.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=chat-github)

![Habit Tracker](https://assets.hub.nuxt.com/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL2hhYml0Lm51eHQuZGV2IiwiaWF0IjoxNzM4ODUxODA3fQ.kFoKEfj2xX53Qet81gPK2XUykfZpn9ACOUJPZqDYkIY.jpg)

## Habit Tracker

A minimalistic habit tracker application to track and manage your daily habits with ease.

[database](https://hub.nuxt.com/docs/features/database)

[Demo](https://habit.nuxt.dev/) [Deploy](https://hub.nuxt.com/new?template=habit)

## NuxtHub Blog
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Blog

Read the latest news about NuxtHub or articles about fullstack development with Nuxt.

[@nuxt\_hub](https://x.com/nuxt_hub) [NuxtHub](https://www.linkedin.com/showcase/nuxthub/) [Blog RSS](https://hub.nuxt.com/blog/rss.xml)

![How to use Libsodium in Cloudflare Workers](https://hub.nuxt.com/_ipx/f_webp&s_592x333/images/blog/libsodium-cloudflare-workers.png)

[How to use Libsodium in Cloudflare Workers](https://hub.nuxt.com/blog/libsodium-cloudflare-workers)

TutorialDec 18, 2024

## How to use Libsodium in Cloudflare Workers

Learn how to leverage NaCL to crypto box seal values, useful when working with GitHub repository secrets.

SC

[Sebastien Chopin](https://x.com/atinux)

Sebastien Chopin

![Using Cloudflare AI Models for User Experience](https://hub.nuxt.com/_ipx/f_webp&s_592x333/images/blog/atidraw-ai-models.png)

[Using Cloudflare AI Models for User Experience](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience)

TutorialAug 25, 2024

## Using Cloudflare AI Models for User Experience

Learn how I leverage Cloudflare AI models in Nuxt to improve my drawing app accessibility, SEO and User Experience.

SC

[Sebastien Chopin](https://x.com/atinux)

Sebastien Chopin

![Code, Draw, Deploy: A drawing app with Nuxt & Cloudflare R2](https://hub.nuxt.com/_ipx/f_webp&s_592x333/images/blog/drawing-app-cloudflare-r2.png)

[Code, Draw, Deploy: A drawing app with Nuxt & Cloudflare R2](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2)

TutorialAug 10, 2024

## Code, Draw, Deploy: A drawing app with Nuxt & Cloudflare R2

Let's walk through the process of creating Atidraw, a web-based drawing application built with Nuxt and using Cloudflare R2 for storage.

SC

[Sebastien Chopin](https://x.com/atinux)

Sebastien Chopin

![Introducing NuxtHub Beta](https://hub.nuxt.com/_ipx/f_webp&s_592x333/images/blog/nuxthub-beta.png)

[Introducing NuxtHub Beta](https://hub.nuxt.com/blog/beta)

ReleaseJun 2, 2024

## Introducing NuxtHub Beta

We are excited to announce the beta release of NuxtHub, a new way to build full-stack Nuxt applications globally with zero configuration.

SC

[Sebastien Chopin](https://x.com/atinux)

Sebastien Chopin

## Nuxt AI Integration
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Run AI Models

Run machine learning models, such as LLMs, in Nuxt.

NuxtHub AI lets you integrate machine learning models into your Nuxt application. Built on top of [Workers AI](https://developers.cloudflare.com/workers-ai/), it provides a simple and intuitive API that supports models for text generation, image generation, embeddings, and more.

text.tsimage.tsembeddings.ts

```
const response = await hubAI().run('@cf/meta/llama-3.1-8b-instruct', {
  prompt: 'Who is the author of Nuxt?'
})

```

```
const response = await hubAI().run('@cf/runwayml/stable-diffusion-v1-5-img2img', {
  prompt: 'A sunset over the ocean.',
})

```

```
// returns embeddings that can be used for vector searches in tools like Vectorize
const embeddings = await hubAI().run("@cf/baai/bge-base-en-v1.5", {
  text: "NuxtHub AI uses `hubAI()` to run models."
});

```

## [Getting Started](https://hub.nuxt.com/docs/features/ai\#getting-started)

Enable AI in your NuxtHub project by adding the `ai` property to the `hub` object in your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    ai: true
  },
})

```

This option will enable [Workers AI](https://developers.cloudflare.com/workers-ai) (LLM powered by serverless GPUs on Cloudflare’s global network) and automatically add the binding to your project when you [deploy it](https://hub.nuxt.com/docs/getting-started/deploy).

### [Local Development](https://hub.nuxt.com/docs/features/ai\#local-development)

During development, `hubAI()` will call the Cloudflare API. Make sure to run `npx nuxthub link` to create/link a NuxtHub project (even if the project is empty). This project is where your AI models will run.

NuxtHub AI will always run AI models on your Cloudflare account, including during local development. [See pricing and included free quotas on Cloudflare's documentation](https://developers.cloudflare.com/workers-ai/platform/pricing/).

## [Models](https://hub.nuxt.com/docs/features/ai\#models)

Workers AI comes with a curated set of popular open-source models that enable you to do tasks such as image classification, text generation, object detection, and more.

[See all Workers AI models](https://developers.cloudflare.com/workers-ai/models/)

## [hubAI()](https://hub.nuxt.com/docs/features/ai\#hubai)

`hubAI()` is a server composable that returns a [Workers AI client](https://developers.cloudflare.com/workers-ai/configuration/bindings/#methods).

```
const ai = hubAI()

```

This documentation is a small reflection of the [Cloudflare Workers AI documentation](https://developers.cloudflare.com/workers-ai/configuration/bindings/#methods). We recommend reading it to understand the full potential of Workers AI.

### [`run()`](https://hub.nuxt.com/docs/features/ai\#run)

Runs a model. Takes a model as the first parameter, and an object as the second parameter.

server/api/ai-test.ts

```
export default defineEventHandler(async () => {
  const ai = hubAI() // access AI bindings
  return await ai.run('@cf/meta/llama-3.1-8b-instruct', {
    prompt: 'Who is the author of Nuxt?'
  })
})

```

#### [Options](https://hub.nuxt.com/docs/features/ai\#options)

model

string required

The model to run

options

object

The model options.

Show properties

...modelOptions

any

Options for the model you choose can be found in the [Worker AI models documentation](https://developers.cloudflare.com/workers-ai/models/).

stream

boolean

Whether results should be [streamed](https://hub.nuxt.com/docs/features/ai#streaming-responses) as they are generated.

AI Gateway

object

Options for configuring [`AI Gateway`](https://hub.nuxt.com/docs/features/ai#ai-gateway) \- `id`, `skipCache`, and `cacheTtl`.

### [`models()`](https://hub.nuxt.com/docs/features/ai\#models-1)

List all available models programatically.

server/api/models-test.ts

```
export default defineEventHandler(async () => {
  const ai = hubAI() // access AI bindings
  return await ai.models({ page: 2 })
})

```

#### [Options](https://hub.nuxt.com/docs/features/ai\#options-1)

params

object

Show properties

author

string

The author of the model to filter by.

hide\_experimental

boolean

Whether to hide experimental models.

page

number

The page of results to return.

per\_page

number

The number of results to return per page.

search

string

A search term to filter models by.

source

number

The source ID to filter by.

task

string

The task name to filter by.

## [Tools](https://hub.nuxt.com/docs/features/ai\#tools)

Tools are actions that your LLM can execute to run functions or interact with external APIs. The result of these tools will be used by the LLM to generate additional responses.

This can help you supply the LLM with real-time information, save data to a KV store, or provide it with external data from your database.

With Workers AI, tools have 4 properties:

- `name`: The name of the tool
- `description`: A description of the tool that will be used by the LLM to understand what the tool does. This allows it to determine when to use the tool
- `parameters`: The parameters that the tool accepts.
- `function`: The function that will be executed when the tool is called.

```
const tools = [\
  {\
    name: 'get-weather',\
    description: 'Gets the weather for a given city',\
    parameters: {\
      type: 'object',\
      properties: {\
        city: {\
          type: 'number',\
          description: 'The city to retrieve weather information for'\
        },\
      },\
      required: ['city'],\
    },\
    function: ({ city }) => {\
      // use an API to get the weather information\
      return '72'\
    }),\
  }\
]

```

#### [Tool Fields](https://hub.nuxt.com/docs/features/ai\#tool-fields)

name

string required

The name of the tool

description

string required

A description of the tool that will be used by the LLM to understand what the tool does. This allows it to determine when to use the tool

parameters

JsonSchema7

The parameters and options for parameters that the model will use to run the tool.

Show properties

type

string

The type of your functions parameter. It's recommended to use an `object` so you can easily add additional properties in the future.

properties

Object

The properties that will be passed to your function. The keys of this object should match the keys in your function's parameter.

Show properties

type

string

The type of the property ( `string`, `number`, `boolean`, etc.)

description

string

A description of the property that the LLM will use to understand what the property is when trying to use the tool.

required

string\[\]

All the properties that are required to be passed to the tool.

function

(args) => Promise<string>

The function that the LLM can execute.

### [`runWithTools()`](https://hub.nuxt.com/docs/features/ai\#runwithtools)

The [`@cloudflare/ai-utils`](https://github.com/cloudflare/ai-utils) package provides a `runWithTools` function that will handle the recursive calls to the LLM with the result of the tools.

```
npx nypm i @cloudflare/ai-utils

```

`runWithTools` works with multi-tool calls, handles errors, and has the same return type as `hubAI().run()` so any code relying on the response from a model can remain the same.

```
import { runWithTools } from '@cloudflare/ai-utils'

export default defineEventHandler(async (event) => {
  return await runWithTools(hubAI(), '@cf/meta/llama-3.1-8b-instruct',
    {
      messages: [\
        { role: 'user', content: 'What is the weather in New York?' },\
      ],
      tools: [\
        {\
          name: 'get-weather',\
          description: 'Gets the weather for a given city',\
          parameters: {\
            type: 'object',\
            properties: {\
              city: {\
                type: 'number',\
                description: 'The city to retrieve weather information for'\
              },\
            },\
            required: ['city'],\
          },\
          function: ({ city }) => {\
            // use an API to get the weather information\
            return '72'\
          },\
        },\
      ]
    },
    {
      // options
      streamFinalResponse: true,
      maxRecursiveToolRuns: 1,
    }
  )
})

```

#### [Params](https://hub.nuxt.com/docs/features/ai\#params)

AI Binding

Ai required

Your AI Binding ( `hubAI()`)

model

string required

The model to run

input

object

The messages and tools to use for the model

Show properties

messages

{ role: 'user' \| 'system' \| 'assistant', content: string }\[\]

An array of messages to send to the model. Each message has a role and content.

tools

AiTextGenerationToolInputWithFunction\[\]

An array of the tools available to the model.

Options

object

An array of optional properties that can be passed to the model.

Show properties

streamFinalResponse

boolean

Whether to stream the final response or not.

maxRecursiveToolRuns

number

The maximum number of recursive tool runs to perform.

strictValidation

boolean

Whether to perform strict validation (using zod) of the arguments passed to the tools.

verbose

boolean

Whether to enable verbose logging.

See the full [`runWithTools()` documentation](https://developers.cloudflare.com/workers-ai/function-calling/embedded/api-reference/).

## [AI Gateway](https://hub.nuxt.com/docs/features/ai\#ai-gateway)

Workers AI is compatible with AI Gateway, which enables caching responses, analytics, real-time logging, ratelimiting, and fallback providers. Learn more about [AI Gateway](https://developers.cloudflare.com/ai-gateway/).

### [Options](https://hub.nuxt.com/docs/features/ai\#options-2)

Configure options for AI Gateway by passing an additional object to `hubAI().run()`, [learn more on Cloudflare's docs](https://developers.cloudflare.com/ai-gateway/providers/workersai/#worker).

server/api/who-created-nuxt.get.ts

```
export default defineEventHandler(async () => {
  const ai = hubAI()
  return await ai.run('@cf/meta/llama-3-8b-instruct',
    {
      prompt: 'Who is the creator of Nuxt?'
    },
    {
      gateway: {
        id: '{gateway_slug}',
        skipCache: false,
        cacheTtl: 3360
      }
    })
})

```

id

string

Name of your existing [AI Gateway](https://developers.cloudflare.com/ai-gateway/get-started/#create-gateway). Must be in the same Cloudflare account as your NuxtHub application.

skipCache

boolean

Controls whether the request should [skip the cache](https://developers.cloudflare.com/ai-gateway/configuration/caching/#skip-cache-cf-skip-cache).

cacheTtl

number

Controls the [Cache TTL](https://developers.cloudflare.com/ai-gateway/configuration/caching/#cache-ttl-cf-cache-ttl), the duration (in seconds) that a cached request will be valid for. The minimum TTL is 60 seconds and maximum is one month.

## [Streaming](https://hub.nuxt.com/docs/features/ai\#streaming)

The recommended method to handle text generation responses is streaming.

LLMs work internally by generating responses sequentially using a process of repeated inference — the full output of a LLM model is essentially a sequence of hundreds or thousands of individual prediction tasks. For this reason, while it only takes a few milliseconds to generate a single token, generating the full response takes longer.

If your UI waits for the entire response to be generated, a user may see a loading spinner for several seconds before the response is displayed.

Streaming lets you start displaying the response as soon as the first tokens are generated, and append each additional token until the response is complete. This yields a much better experience for the end user. Displaying text incrementally as it’s generated not only provides instant responsiveness, but also gives the end-user time to read and interpret the text.

To enable, set the `stream` parameter to `true`.

You can check if the model you're using supports streaming on [Cloudflare's models documentation](https://developers.cloudflare.com/workers-ai/models/#text-generation).

```
export default defineEventHandler(async (event) => {
  const messages = [\
    { role: 'system', content: 'You are a friendly assistant' },\
    { role: 'user', content: 'What is the origin of the phrase Hello, World?' }\
  ]

  const ai = hubAI()
  const stream = await ai.run('@cf/meta/llama-3.1-8b-instruct', {
    stream: true,
    messages
  })
  return stream
})

```

### [Handling Streaming Responses](https://hub.nuxt.com/docs/features/ai\#handling-streaming-responses)

To manually handle streaming responses, you can use [`ReadableStream`](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream) and Nuxt's `$fetch` function to create a new `ReadableStream` from the response.

Creating a reader allows you to process the stream in chunks as it's received.

```
const response = await $fetch<ReadableStream>('/api/chats/ask-ai', {
  method: 'POST',
  body: {
    query: "Hello AI, how are you?",
  },
  responseType: 'stream',
})

// Create a new ReadableStream from the response with TextDecoderStream to get the data as text
const reader = response.pipeThrough(new TextDecoderStream()).getReader()

// Read the chunks of data as they're received
while (true) {
  const { value, done } = await reader.read()

  if (done)
    break

  console.log('Received:', value)
}

```

## [Vercel AI SDK](https://hub.nuxt.com/docs/features/ai\#vercel-ai-sdk)

Another way to handle streaming responses is to use [Vercel's AI SDK](https://sdk.vercel.ai/) with `hubAI()`.

This uses the [Workers AI Provider](https://sdk.vercel.ai/providers/community-providers/cloudflare-workers-ai), which supports a subset of Vercel AI features.

`tools` and `streamObject` are currently not supported.

To get started, install the Vercel AI SDK and the Cloudflare AI Provider in your project.

Terminal

```
npx nypm i ai @ai-sdk/vue workers-ai-provider

```

[`nypm`](https://github.com/unjs/nypm) will detect your package manager and install the dependencies with it.

### [`useChat()`](https://hub.nuxt.com/docs/features/ai\#usechat)

`useChat()` is a Vue composable provided by the Vercel AI SDK that handles streaming responses, API calls, state for your chat.

It requires a `POST /api/chat` endpoint that uses the `hubAI()` server composable and returns a compatible stream for the Vercel AI SDK.

server/api/chat.post.ts

```
import { streamText } from 'ai'
import { createWorkersAI } from 'workers-ai-provider'

export default defineEventHandler(async (event) => {
  const { messages } = await readBody(event)

  const workersAI = createWorkersAI({ binding: hubAI() })

  return streamText({
    model: workersAI('@cf/meta/llama-3.1-8b-instruct'),
    messages
  }).toDataStreamResponse()
})

```

Then, we can create a chat component that uses the `useChat()` composable.

app/pages/chat.vue

```
<script setup lang="ts">
import { useChat } from '@ai-sdk/vue'

const { messages, input, handleSubmit, isLoading, stop, error, reload } = useChat()
</script>

<template>
  <div v-for="m in messages" :key="m.id">
    {{ m.role }}: {{ m.content }}
  </div>
  <div v-if="error">
    <div>{{ error.message || 'An error occurred' }}</div>
    <button @click="reload">retry</button>
  </div>
  <form @submit="handleSubmit">
    <input v-model="input" placeholder="Type here..." />
    <button v-if="isLoading" @click="stop">stop</button>
    <button v-else type="submit">send</button>
  </form>
</template>

```

Learn more about the [`useChat()` composable](https://sdk.vercel.ai/docs/reference/ai-sdk-ui/use-chat).

Check out our [`pages/ai.vue` full example](https://github.com/nuxt-hub/core/blob/main/playground/app/pages/ai.vue) with Nuxt UI & [Nuxt MDC](https://github.com/nuxt-modules/mdc).

## [Templates](https://hub.nuxt.com/docs/features/ai\#templates)

Explore open source templates made by the community:

[Atidraw](https://github.com/atinux/atidraw)

Atidraw

Generate the alt text of the user drawing and generate an alternative image with AI.

[Hub Chat](https://github.com/ra-jeev/hub-chat)

Hub Chat

A chat interface to interact with various text generation AI models.

[Flux AI Image Generator](https://github.com/atinux/flux-ai-image-generator)

Flux AI Image Generator

Generate images with AI using Flux-1 Schnell with different presets.

[Chat with PDF](https://github.com/RihanArfan/chat-with-pdf)

Chat with PDF

A full-stack AI-powered application that lets you to ask questions to PDF documents.

## [Pricing](https://hub.nuxt.com/docs/features/ai\#pricing)

AI

|  | Free | Workers Paid ($5/month) |
| --- | --- | --- |
| Text Generation | 10,000 tokens / day | 10,000 tokens / day + start at $0.10 / million tokens |
| Embeddings | 10,000 tokens / day | 10,000 tokens / day + start at $0.10 / million tokens |
| Images | 250 steps (up to 1024x1024) / day | 250 steps / day + start at $0.00125 per 25 steps |
| Speech to Text | 10 minutes of audio / day | 10 minutes of audio / day + $0.0039 per minute of audio input |

[Cloudflare AI pricing](https://developers.cloudflare.com/workers-ai/platform/pricing/)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/ai.md)

[Additional\\
\\
Add additional Cloudflare resource bindings to deployments](https://hub.nuxt.com/docs/features/additional-bindings) [AutoRAG\\
\\
Create fully-managed RAG pipelines to power your AI applications with accurate and up-to-date information.](https://hub.nuxt.com/docs/features/autorag)

## NuxtHub Installation Guide
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Installation

Learn how to create a NuxtHub project or add it to your current Nuxt project.

## [Quickstart](https://hub.nuxt.com/docs/getting-started/installation\#quickstart)

The easiest way to get started with NuxtHub is to start with one of [our templates](https://hub.nuxt.com/templates). It includes all the necessary configuration and resources to get you started.

Click on the `GitHub` button, then once on GitHub, click on `Use this template` to create a new repository based on the template.

Explore NuxtHub templates.

## [CLI](https://hub.nuxt.com/docs/getting-started/installation\#cli)

Run this command to create a new project locally using our [hello-edge template](https://github.com/nuxt-hub/hello-edge):

Terminal

```
npx nuxthub init my-app

```

Then, inside your project directory ( `my-app` in the example above), run your development server:

Terminal

```
npm run dev

```

Your project will be available on [http://localhost:3000](http://localhost:3000/)

## [Add to a Nuxt project](https://hub.nuxt.com/docs/getting-started/installation\#add-to-a-nuxt-project)

1. Install the NuxtHub module to your project:

Terminal

```
npx nuxi module add hub

```

This command will install `@nuxthub/core` as dependency and add it to your `modules` section of your `nuxt.config`.

2. Install [wrangler](https://developers.cloudflare.com/workers/wrangler/) development dependency to your project:

pnpmyarnnpmbun

```
pnpm add -D wrangler

```

```
yarn add --dev wrangler

```

```
npm install --save-dev wrangler

```

```
bun add --dev wrangler

```

That's it! You can now use NuxtHub features in your Nuxt project.

NuxtHub will create a `.data/hub` directory in your project root, which contains the necessary configuration files and resources for the features to work. It will also add it to the `.gitignore` file to avoid committing it to your repository.

## [Options](https://hub.nuxt.com/docs/getting-started/installation\#options)

Configure options in your `nuxt.config.ts` as such:

nuxt.config.ts

```
export default defineNuxtConfig({
  modules: ['@nuxthub/core'],
  hub: {
    // NuxtHub options
  }
})

```

analytics

boolean

Default to `false` \- Enables analytics for your project (coming soon).

blob

boolean

Default to `false` \- Enables blob storage to store static assets, such as images, videos and more.

cache

boolean

Default to `false` \- Enables cache storage to cache your server route responses or functions using Nitro's `cachedEventHandler` and `cachedFunction`

database

boolean

Default to `false` \- Enables SQL database to store your application's data.

kv

boolean

Default to `false` \- Enables Key-Value to store JSON data accessible globally.

remote

boolean\|string

Default to `false` \- Allows working with remote storage (database, kv, blob) from your deployed project.

[Read more about remote storage for usage](https://hub.nuxt.com/docs/getting-started/remote-storage).

dir

string

Default to `'.data/hub'` \- The directory used for storage (D1, KV, R2, etc.) in development mode.

You're all set! Now, let's dive into connecting to your Cloudflare account and [deploying it on the Edge](https://hub.nuxt.com/docs/getting-started/deploy).

## [Nightly Builds](https://hub.nuxt.com/docs/getting-started/installation\#nightly-builds)

You can also use the latest features and bug fixes (commited on the `main` branch) by installing the [nightly tag](https://www.npmjs.com/package/@nuxthub/core?activeTab=versions):

package.json

```
{
  "Dependencies": {
-   "@nuxthub/core": "^0.5.0"
+   "@nuxthub/core": "npm:@nuxthub/core@nightly"
  }
}

```

Then run `npm install`, `pnpm install`, `yarn install` or `bun install` to update the dependency.

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/1.getting-started/2.installation.md)

[Introduction\\
\\
NuxtHub helps you build and deploy full-stack Nuxt applications globally.](https://hub.nuxt.com/docs/getting-started) [Deploy\\
\\
Learn how to host your full-stack Nuxt application globally with minimal configuration.](https://hub.nuxt.com/docs/getting-started/deploy)

## NuxtHub Changelog
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Changelog

Follow the latest updates and improvements of NuxtHub.

[@nuxt\_hub](https://x.com/nuxt_hub) [NuxtHub](https://www.linkedin.com/showcase/nuxthub/) [Changelog RSS](https://hub.nuxt.com/changelog/rss.xml)

- [June 9, 2025](https://hub.nuxt.com/changelog/environments)















[![Environments & Improved variable management](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/nuxthub-environments.png)](https://hub.nuxt.com/changelog/environments)



## [Environments & Improved variable management](https://hub.nuxt.com/changelog/environments)



Create additional deployment environments & revamped environment variable management



[RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev) [AB\\
\\
Ahad Birang\\
\\
@farnabaz.dev](https://bsky.app/profile/farnabaz.dev)

- [May 7, 2025](https://hub.nuxt.com/changelog/workers-logs-history)















[![Worker logs with history on NuxtHub Admin](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/nuxthub-workers-logs-history.png)](https://hub.nuxt.com/changelog/workers-logs-history)



## [Worker logs with history on NuxtHub Admin](https://hub.nuxt.com/changelog/workers-logs-history)



Worker logs are now available on NuxtHub Admin, allowing you to filter and analyze historical logs from your deployed Nuxt App.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://bsky.app/profile/atinux.com) [RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev) [AB\\
\\
Ahad Birang\\
\\
@farnabaz.dev](https://bsky.app/profile/farnabaz.dev)

- [May 5, 2025](https://hub.nuxt.com/changelog/hub-autorag)















[![Introducing hubAutoRAG()](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/nuxthub-autorag.png)](https://hub.nuxt.com/changelog/hub-autorag)



## [Introducing hubAutoRAG()](https://hub.nuxt.com/changelog/hub-autorag)



Create fully-managed RAG pipelines to power your AI applications with accurate and up-to-date information.



[RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev)

- [April 17, 2025](https://hub.nuxt.com/changelog/observability-additional-bindings)















[![Worker Logs & Additional Bindings](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/nuxthub-workers-observability.png)](https://hub.nuxt.com/changelog/observability-additional-bindings)



## [Worker Logs & Additional Bindings](https://hub.nuxt.com/changelog/observability-additional-bindings)



Support for Worker Logs and adding additional bindings for Worker projects.



[RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev)

- [April 14, 2025](https://hub.nuxt.com/changelog/workers)















[![NuxtHub on Workers](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/workers-support.png)](https://hub.nuxt.com/changelog/workers)



## [NuxtHub on Workers](https://hub.nuxt.com/changelog/workers)



Deploy your Nuxt apps to Cloudflare Workers and build real-time experiences with zero configuration.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://bsky.app/profile/atinux.com) [RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev) [AB\\
\\
Ahad Birang\\
\\
@farnabaz.dev](https://bsky.app/profile/farnabaz.dev)

- [December 22, 2024](https://hub.nuxt.com/changelog/github-app-and-action)















[![NuxtHub GitHub App & Action](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/nuxthub-github-app-action.png)](https://hub.nuxt.com/changelog/github-app-and-action)



## [NuxtHub GitHub App & Action](https://hub.nuxt.com/changelog/github-app-and-action)



Introducing our GitHub App & Action for automating your Nuxt deployments with GitHub as well as a new project creation flow.



[RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://bsky.app/profile/rihan.dev) [SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://bsky.app/profile/atinux.com)

- [October 28, 2024](https://hub.nuxt.com/changelog/cloudflare-access)















[![Cloudflare Access integration](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/cloudflare-access.png)](https://hub.nuxt.com/changelog/cloudflare-access)



## [Cloudflare Access integration](https://hub.nuxt.com/changelog/cloudflare-access)



We now support Cloudflare Access within NuxtHub admin, module and CLI



[RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://x.com/RihanArfan)

- [October 25, 2024](https://hub.nuxt.com/changelog/database-migrations)















[![Automatic Database Migrations](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/database-migrations.png)](https://hub.nuxt.com/changelog/database-migrations)



## [Automatic Database Migrations](https://hub.nuxt.com/changelog/database-migrations)



Database migrations now automatically apply during development and deployment.



[RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://x.com/RihanArfan) [SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

- [October 14, 2024](https://hub.nuxt.com/changelog/blob-presigned-urls)















[![Blob Presigned URLs](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/docs/blob-presigned-urls.png)](https://hub.nuxt.com/changelog/blob-presigned-urls)



## [Blob Presigned URLs](https://hub.nuxt.com/changelog/blob-presigned-urls)



It is now possible to upload files to your R2 bucket using presigned URLs with zero configuration.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

- [October 4, 2024](https://hub.nuxt.com/changelog/hub-vectorize)















[![Introducing hubVectorize()](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/nuxthub-vectorize.png)](https://hub.nuxt.com/changelog/hub-vectorize)



## [Introducing hubVectorize()](https://hub.nuxt.com/changelog/hub-vectorize)



Vectorize is a globally distributed vector database that enables you to build full-stack, AI-powered applications with Nuxt.



[RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://x.com/RihanArfan)

- [September 15, 2024](https://hub.nuxt.com/changelog/nuxthub-preview)















[![`nuxthub preview` command](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/nuxthub-preview.png)](https://hub.nuxt.com/changelog/nuxthub-preview)



## [\`nuxthub preview\` command](https://hub.nuxt.com/changelog/nuxthub-preview)



We added a new command to preview your production build locally with \`wrangler\`.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

- [September 8, 2024](https://hub.nuxt.com/changelog/hub-browser)















[![Introducing hubBrowser()](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/nuxthub-browser.jpg)](https://hub.nuxt.com/changelog/hub-browser)



## [Introducing hubBrowser()](https://hub.nuxt.com/changelog/hub-browser)



Taking screenshots, crawling websites, generating PDFs and more has never been easier with \`hubBrowser()\`.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

- [August 27, 2024](https://hub.nuxt.com/changelog/hyperdrive-bindings)















[![Hyperdrive bindings](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/hyperdrive-bindings.png)](https://hub.nuxt.com/changelog/hyperdrive-bindings)



## [Hyperdrive bindings](https://hub.nuxt.com/changelog/hyperdrive-bindings)



It is now possible to use PostgreSQL & Cloudflare Hyperdrive in your Nuxt application.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

- [August 14, 2024](https://hub.nuxt.com/changelog/hub-ai)















[![Introducing hubAI()](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/hub-ai.png)](https://hub.nuxt.com/changelog/hub-ai)



## [Introducing hubAI()](https://hub.nuxt.com/changelog/hub-ai)



Run machine learning models, such as LLMs in your Nuxt application, with minimal setup.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://x.com/RihanArfan)

- [July 21, 2024](https://hub.nuxt.com/changelog/deploy-button)















[![Deploy to NuxtHub button](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/deploy-button.png)](https://hub.nuxt.com/changelog/deploy-button)



## [Deploy to NuxtHub button](https://hub.nuxt.com/changelog/deploy-button)



The Deploy to NuxtHub button allows you to deploy a GitHub template directly from the NuxtHub Admin.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

- [July 1, 2024](https://hub.nuxt.com/changelog/blob-upload-prefix)















[![Blob Upload Prefix](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/blob-upload-prefix.png)](https://hub.nuxt.com/changelog/blob-upload-prefix)



## [Blob Upload Prefix](https://hub.nuxt.com/changelog/blob-upload-prefix)



It is now possible to upload a blob and setting the prefix beforehand.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

- [June 17, 2024](https://hub.nuxt.com/changelog/hello-edge)















[![Hello World Template](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/hello-edge.png)](https://hub.nuxt.com/changelog/hello-edge)



## [Hello World Template](https://hub.nuxt.com/changelog/hello-edge)



Hello Edge is our minimal Nuxt template to get started with server-side rendering on the Edge.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

- [June 14, 2024](https://hub.nuxt.com/changelog/team-webhooks-env)















[![Webhooks Environment Selection](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/team-webhooks-env.png)](https://hub.nuxt.com/changelog/team-webhooks-env)



## [Webhooks Environment Selection](https://hub.nuxt.com/changelog/team-webhooks-env)



It is now possible to select the environment to be notified about.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

- [June 3, 2024](https://hub.nuxt.com/changelog/drizzle-studio-remembers)















[![Drizzle Studio Remembers](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/drizzle-studio-remembers.png)](https://hub.nuxt.com/changelog/drizzle-studio-remembers)



## [Drizzle Studio Remembers](https://hub.nuxt.com/changelog/drizzle-studio-remembers)



The database admin UI now remembers where you were last time, speeding up your workflow.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

- [June 2, 2024](https://hub.nuxt.com/changelog/blob-folders)















[![Blob Folders](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/blob-folders.png)](https://hub.nuxt.com/changelog/blob-folders)



## [Blob Folders](https://hub.nuxt.com/changelog/blob-folders)



It is now possible to change the view of your blobs to a folder structure.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

- [May 27, 2024](https://hub.nuxt.com/changelog/deployment-details)















[![Deployment Details](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/deployment-details.png)](https://hub.nuxt.com/changelog/deployment-details)



## [Deployment Details](https://hub.nuxt.com/changelog/deployment-details)



We redesigned the deployment listing as well as added the deployment page to provide more information about each deployment.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang) [SM\\
\\
Sarah Moriceau\\
\\
@moriceau\_sarah](https://x.com/moriceau_sarah)

- [May 21, 2024](https://hub.nuxt.com/changelog/team-webhooks)















[![Team Webhooks](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/team-webhooks.png)](https://hub.nuxt.com/changelog/team-webhooks)



## [Team Webhooks](https://hub.nuxt.com/changelog/team-webhooks)



It is now possible to trigger webhooks for your team's projects when a new deployment is created.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

- [April 17, 2024](https://hub.nuxt.com/changelog/server-cache)















[![Server Cache UI](https://hub.nuxt.com/_ipx/f_webp&s_915x515/images/changelog/server-cache.png)](https://hub.nuxt.com/changelog/server-cache)



## [Server Cache UI](https://hub.nuxt.com/changelog/server-cache)



It is now possible to manage your server cache with our new UI for Server Cache.



[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

## NuxtHub Pricing Plans
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Start for free, upgrade as you grow

NuxtHub is built on Cloudflare for optimal performance. While separate subscriptions are required, you get the combined power of both, with plans to suit your specific needs.

MonthlyYearly (2 months off)

Solo

Great for personal projects, freelancers & indie hackers.

$0

- One member
- Up to 5 projects
- Unlimited deployments
- Custom domains
- Remote Storage
- Community support

[Get started for free](https://admin.hub.nuxt.com/)

Team

Everything in Solo, plus higher limits and team features.

$12

/member/month

- Collaborate with your team
- Unlimited projects
- Unlimited deployments
- Access control on remote storage (soon)
- Early access to new features
- Priority support

[Get started as a team](https://admin.hub.nuxt.com/)

Enterprise

For large teams with advanced usage and needs.

Custom

- Unlimited members
- Unlimited projects
- Unlimited deployments
- Advanced access control
- Custom feature development
- Dedicated support

[Contact us](mailto:hub@nuxt.com?subject=Enterprise%20Offer&body=Hi%20NuxtHub%20Team%2C%0A%0AI%20am%20interested%20in%20the%20Enterprise%20offer.%0A%0AKind%20regards%2C)

Prices does not include your [Cloudflare costs](https://www.cloudflare.com/plans/developer-platform/).

## Are you an open source or non-profit organization?

If you want to use NuxtHub to manage open source projects or if you are a non-profit organization, we have a special offer for you!

[Contact us](mailto:hub@nuxt.com?subject=Open%20Source%20Organization%20Offer&body=Hi%20NuxtHub%20Team%2C%0A%0AI%20am%20interested%20in%20the%20special%20offer%20for%20Open%20Source%20Organizations.%0A%0AKind%20regards%2C)

## Cloudflare Pricing

You can start for free with Cloudflare and seamlessly upgrade to Workers Paid plan when needed for $5/month.

[Discover Cloudflare pricing](https://www.cloudflare.com/plans/developer-platform/)

AppDBKVBlobAIVectorize

|  | Free | Workers Paid ($5/month) |
| --- | --- | --- |
| Requests | 100,000 / day | 10 million / month + $0.30/million |
| Worker size | 3 MB | 10 MB |
| CPU time | 10ms per invocation | 30s per invocation<br>30 million CPU ms + $0.02/million |
| CPU milliseconds | 100 | 30 million |
| Applications | 100 | 500 |

[Cloudflare Workers pricing](https://developers.cloudflare.com/workers/platform/pricing/)

Nuxt on Cloudflare infra with minimal effort - this is huge!

EY

Evan You

Author of Vue.js and Vite.

## Deploy a Nuxt application in one minute.

Once you've linked your Cloudflare account, deploy your Nuxt application all over the world with our CLI or from Git.

You also get a free .nuxt.dev domain.

[Deploy now](https://hub.nuxt.com/docs/getting-started/deploy#nuxthub-cli) [Watch a 1 min demo](https://www.youtube.com/watch?v=NgmyCN4bIp0)

- ![Connect your Cloudflare account](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/link-cloudflare-account-dark.svg)![Connect your Cloudflare account](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/link-cloudflare-account-light.svg)


## Connect your Cloudflare account



Securely connect with one click using our pre-configured Cloudflare API permissions.

- ![Build your Nuxt app](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/create-nuxt-app-dark.svg)![Build your Nuxt app](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/create-nuxt-app-light.svg)


## Build your Nuxt app



Choose from our optimized templates or import your existing GitHub/GitLab project.

- ![Launch it worldwide](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/deploy-nuxt-app-dark.svg)![Launch it worldwide](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/deploy-nuxt-app-light.svg)


## Launch it worldwide



Deploy with 'npx nuxthub deploy' or leverage Cloudflare Pages CI/CD for automated deployments.

- ![Share it with the world](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/share-nuxt-app-dark.svg)![Share it with the world](https://hub.nuxt.com/_ipx/s_460x259/images/landing/steps/share-nuxt-app-light.svg)


## Share it with the world



Instantly share your app globally. Monitor & manage resources through the NuxtHub dashboard.


## Frequently Asked Questions

If you can't find what you're looking for, email our support team and will get back to you.

Can I try NuxtHub before paying for it?

The free plans on both Cloudflare and NuxtHub let you try NuxtHub without adding your credit card, these plans are suitable for personal websites (including a database, blob storage, KV & caching).

Do you have a free trial?

We don't have a free trial for now, the Solo plan should give you everything you need to get started with all NuxtHub features.

How can I contact your support team?

You can contact us anytime at [hub@nuxt.com](mailto:hub@nuxt.com), we are also on X/Twitter ( [@nuxt\_hub](https://x.com/nuxt_hub)) and we have a [Discord server](https://discord.gg/e25qqXb2mF).

How can I cancel my subscription?

In the billing section of your team, you can downgrade or cancel your subscription with one click.

## Nuxt Vectorize Guide
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Vectorize (Vector Database)

Access a vector database to build full-stack AI-powered applications in Nuxt.

NuxtHub Vectorize provides configuration, deployment, and management of [Vectorize](https://developers.cloudflare.com/vectorize/best-practices/create-indexes/), Cloudflare's vector database.

A vector database stores numerical representations (embeddings) of data, allowing efficient similarity searches. Machine learning models generate these embeddings by converting text, images, or other data types into numerical arrays that can be compared with Vectorize to find similar vectors.

Learn what vector databases are on Cloudflare's documentation

Vectorize is only available in local development when using [remote storage](https://hub.nuxt.com/docs/getting-started/remote-storage).

## [Use Cases](https://hub.nuxt.com/docs/features/vectorize\#use-cases)

Vectorize can be used for:

- **Retrieval Augmented Generation (RAG)** \- store embeddings for documents that can be used as context for LLMs
- **Semantic Search** \- query vectors to find results similar to an input
- **Recommendation Engines** \- query vectors to find similar content

## [Getting Started](https://hub.nuxt.com/docs/features/vectorize\#getting-started)

Vectorize indexes are managed in your NuxtHub project within the `hub.vectorize` object in your `nuxt.config.ts` file. Multiple indexes can be created using separate keys.

If you are building RAG experiences, consider using AutoRAG instead to automatically index data into vector embeddings optimized for semantic search.

### [Create an index](https://hub.nuxt.com/docs/features/vectorize\#create-an-index)

Creating an index can take up to four values:

1. **An index name** (e.g. `prod-search-index` or `recommendations-idx-dev`)



    The name of your index must contain only lowercase characters and hyphens ( `-`). The index name is limited to 51 characters.

2. `dimension` \- the [dimension size](https://hub.nuxt.com/docs/features/vectorize#dimensions) of each vector (e.g. 384 or 1536)



    Dimensions define the size of each vector, which should match the output of the model generating the embeddings.

3. `metric` \- the [distance metric](https://hub.nuxt.com/docs/features/vectorize#distance-metrics) to use for calculating vector similarity



    The distance metric is the function that determines how close vectors are to each other. Possible values are `cosine`, `euclidean`, and `dot-product`.

4. `metadataIndexes` (optional)



    A [`metadataIndex`](https://hub.nuxt.com/docs/features/vectorize#create-metadata-indexes) object specifying metadata properties that may be used to [filter queries](https://hub.nuxt.com/docs/features/vectorize#metadata-filtering)


nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    vectorize: {
      <index-name>: {
        dimensions: <number>, // depends on the model used to generate the vectors
        metric: "dot-product" | "cosine" | "euclidean",
        metadataIndexes: {
          <property>: "string" | "number" | "boolean"
        }
      }
    }
  }
})

```

Show example

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    vectorize: {
      products: {
        dimensions: 768,
        metric: 'cosine',
        metadataIndexes: {
          name: 'string',
          price: 'number'
        }
      },
      reviews: {
        dimensions: 1024,
        metric: 'euclidean',
        metadataIndexes: {
          rating: 'number'
        }
      },
    }
  }
})

```

[Cloudflare Vectorize](https://developers.cloudflare.com/vectorize) indexes will be created for your project when you [deploy it](https://hub.nuxt.com/docs/getting-started/deploy). Created Vectorize indexes contain a unique 4 character suffix.

### [Use existing indexes](https://hub.nuxt.com/docs/features/vectorize\#use-existing-indexes)

To use an existing index, add it as a binding to your Cloudflare project and configure it in `nuxt.config.ts`.

1. On the Cloudflare dashboard → Workers & Pages → Your Pages project
2. Go to Settings → Bindings → Add
3. Select Vectorize database

   - Set the variable name to `VECTORIZE_<NAME>`. The entire variable name should be capitalised.
   - Select the existing Vectorize index
4. Add the index configuration to `hub.vectorize` in `nuxt.config.ts`.

- The index name should match `<name>` used in the variable name, and must be lowercase.
- The `dimensions` and `metric` values should match the ones used when creating the index
- If your index already includes values, the `metadataIndexes` should include any existing metadata indexes. New `metadataIndexes` added in your configuration will not include any existing vectors. You can upsert these vectors to have them included in new metadata indexes.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    vectorize: {
      <index-name>: {
        dimensions: <number>, // depends on the model used to generate the vectors
        metric: "dot-product" | "cosine" | "euclidean",
        metadataIndexes: {
          <property>: "string" | "number" | "boolean"
        }
      }
    }
  }
})

```

### [Deployment](https://hub.nuxt.com/docs/features/vectorize\#deployment)

Vectorize only works in local development when using [remote storage](https://hub.nuxt.com/docs/getting-started/remote-storage) with the `npx nuxt dev --remote` command.

This means to begin using Vectorize, you need to [deploy your project](https://hub.nuxt.com/docs/getting-started/deploy) to create the indexes before accessing them through remote storage.

Similar to the other NuxtHub offerings, indexes can be created in either preview or production environments.

**Cloudflare Vectorize index configurations, like the dimension size and distance metric, cannot be modified after creation.**

Modifying an index's dimension size or distance metric will create a new empty index without migrating any data, disconnecting your existing index (and its data) from your project.

Consider your index configuration carefully before creating it to avoid data loss and reconnection issues.

## [`hubVectorize()`](https://hub.nuxt.com/docs/features/vectorize\#hubvectorize)

Server composable that returns a [Vectorize index](https://developers.cloudflare.com/vectorize/reference/client-api/).

```
const index = hubVectorize("<index>")

```

IntelliSense will suggest `<index>` based on the indexes configured in [`hub.vectorize`](https://hub.nuxt.com/docs/features/vectorize#getting-started).

### [`insert()`](https://hub.nuxt.com/docs/features/vectorize\#insert)

Inserts vectors with new IDs into the index. If a vector with the same vector ID already exists in the index, it will not be updated. If you need to update existing vectors, use the [upsert](https://hub.nuxt.com/docs/features/vectorize#upsert) operation.

```
// Mock Vectors
// These will typically come from a machine-learning model
const vectorsToInsert = [\
  { id: "123", values: [32.4, 6.5, 11.2, 10.3, 87.9] },\
  {\
    id: "456",\
    values: [2.5, 7.8, 9.1, 76.9, 8.5],\
    metadata: { category: "product" },\
  },\
];
const inserted = await index.insert(vectorsToInsert);

```

See all available properties on the [Vector object](https://hub.nuxt.com/docs/features/vectorize#vector-object).

#### [Params](https://hub.nuxt.com/docs/features/vectorize\#params)

vectors

VectorObject\[\] required

An array of [Vector Objects](https://hub.nuxt.com/docs/features/vectorize#vector-object) to insert into the index.

#### [Return](https://hub.nuxt.com/docs/features/vectorize\#return)

Returns [`VectorizeAsyncMutation`](https://hub.nuxt.com/docs/features/vectorize#vectorizeasyncmutation).

Vectorize Index mutations are processed asynchronously in the background. The `insert` operation returns a mutation identifier unique for that operation, and does not assert that the vector is available in the index. It typically takes a few seconds for inserted vectors to be available for querying in an index.

Insert vs Upsert

- If the same vector id is **inserted** twice in a Vectorize index, the index will contain the vector that was added **first**.
- If the same vector id is **upserted** twice in a Vectorize index, the index will contain the vector that was added **second**.
- Use the `upsert` operation if you want to overwrite the vector value for a vector id that already exists in an index.

### [`upsert()`](https://hub.nuxt.com/docs/features/vectorize\#upsert)

Upserts vectors into an index. An upsert operation will insert vectors into the index if vectors with the same ID do not exist, and overwrite vectors with the same ID.

```
const vectorsToUpsert = [\
  { id: "123", values: [32.4, 6.5, 11.2, 10.3, 87.9] },\
  {\
    id: "456",\
    values: [2.5, 7.8, 9.1, 76.9, 8.5],\
    metadata: { category: "product" },\
  },\
  { id: "768", values: [29.1, 5.7, 12.9, 15.4, 1.1] },\
];
const upserted = await index.upsert(vectorsToUpsert);

```

See all available properties on the [Vector object](https://hub.nuxt.com/docs/features/vectorize#vector-object).

#### [Params](https://hub.nuxt.com/docs/features/vectorize\#params-1)

vectors

VectorObject\[\] required

An array of [Vector Objects](https://hub.nuxt.com/docs/features/vectorize#vector-object) to insert into the index.

#### [Return](https://hub.nuxt.com/docs/features/vectorize\#return-1)

Returns [`VectorizeAsyncMutation`](https://hub.nuxt.com/docs/features/vectorize#vectorizeasyncmutation).

Upserting does not merge or combine the values or metadata of an existing vector with the upserted vector: the upserted vector replaces the existing vector in full.

To merge existing metadata, you will have to first query the index for the existing metadata, update the metadata with the new values, and upsert the vector with the merged metadata.

Vectorize Index mutations are processed asynchronously in the background. The `upsert` operation returns a mutation identifier unique for that operation, and does not assert that the vector is updated in the index. It typically takes a few seconds for upserted vectors to be available for querying in an index.

### [`query()`](https://hub.nuxt.com/docs/features/vectorize\#query)

Query an index with the provided vector, which performs a vector search and returns the score(s) of the closest vectors based on the [configured distance metric](https://hub.nuxt.com/docs/features/vectorize#distance-metrics).

```
const queryVector = [32.4, 6.55, 11.2, 10.3, 87.9];
const matches = await index.query(queryVector);

console.log(matches)
/*
{
    "count": 5,
    "matches": [\
        { "score": 0.999909486, "id": "5" },\
        { "score": 0.789848214, "id": "4" },\
        { "score": 0.720476967, "id": "1234" },\
        { "score": 0.463884663, "id": "6" },\
        { "score": 0.378282232, "id": "1" }\
    ]
}
*/

```

Optionally, you can apply [metadata filters](https://hub.nuxt.com/docs/features/vectorize#metadata-filtering) or a [namespace](https://hub.nuxt.com/docs/features/vectorize#namespaces) to narrow the vector search space.

```
const queryVector = [32.4, 6.55, 11.2, 10.3, 87.9];
const matches = await index.query(queryVector, {
  namespace: "my-namespace",
  filter: {
      rating: {
        $ne: 5,
      },
    },
});

```

#### [Params](https://hub.nuxt.com/docs/features/vectorize\#params-2)

vector

array required

Input vector that will be used to drive the similarity search.

options

object

Query options.

Show properties

topK

number

Number of returned matches. Defaults to `5`.The `topK` can be configured to specify the number of matches returned by the query operation. Vectorize now supports an upper limit of `100` for the `topK` value. However, for a query operation with `returnValues` set to `true` or `returnMetadata` set to `all`, `topK` would be limited to a maximum value of `20`.

returnValues

boolean

Return vector values. See [Precision Vs. Response Times](https://hub.nuxt.com/docs/features/vectorize#precision-vs-response-time).

returnMetadata

'all' \| 'indexed' \| 'none'

Return vector metadata. Defaults to `'none'`.The `returnMetadata` field provides three ways to fetch vector metadata while querying:

1. `none`: Do not fetch metadata.
2. `indexed`: Fetched metadata only for the indexed metadata fields. There is no latency overhead with this option, but long text fields may be truncated.
3. `all`: Fetch all metadata associated with a vector. Queries may run slower with this option, and `topK` would be limited to 20.

namespace

string

Only return vectors within a namespace.

filter

object

Filter by vector metadata. See [metadata filtering](https://hub.nuxt.com/docs/features/vectorize#metadata-filtering)

```
const matches = await index.query(queryVector, {
  topK: 3,               // return 3 matches
  returnValues: true,    // return the vector values
  returnMetadata: "all", // return all metadata associated with the matches
});

```

#### [Return](https://hub.nuxt.com/docs/features/vectorize\#return-2)

Returns [`VectorizeMatches`](https://hub.nuxt.com/docs/features/vectorize#vectorizematches).

#### [Precision vs. Response Time](https://hub.nuxt.com/docs/features/vectorize\#precision-vs-response-time)

When querying vectors, you can specify whether to use:

1. **High-precision scoring** for increased precision of the query matches scores and the accuracy of the query results
2. **Approximate scoring** for faster response times (default).

Using approximate scoring, the returned scores will be an approximation of the real distance (similarity) between your query and the returned vectors.

You can enable high-precision scoring by setting `returnValues: true` on your query. This tells Vectorize to compute exact scores for matches, increasing the accuracy of the results.

```
const matches = await index.query(queryVector, {
  returnValues: true,
});

```

### [`getByIds()`](https://hub.nuxt.com/docs/features/vectorize\#getbyids)

Retrieves the specified vectors by their ID, including values and metadata.

```
const ids = ["11", "22", "33", "44"];
const vectors = await index.getByIds(ids);

```

#### [Params](https://hub.nuxt.com/docs/features/vectorize\#params-3)

ids

string\[\] required

List of vector IDs that should be returned.

#### [Return](https://hub.nuxt.com/docs/features/vectorize\#return-3)

Returns [`VectorizeVector`](https://hub.nuxt.com/docs/features/vectorize#vectorizevector).

### [`deleteByIds()`](https://hub.nuxt.com/docs/features/vectorize\#deletebyids)

Deletes the vector IDs provided from the current index.

```
const idsToDelete = ["11", "22", "33", "44"];
const deleted = await index.deleteByIds(idsToDelete);

```

#### [Params](https://hub.nuxt.com/docs/features/vectorize\#params-4)

ids

string\[\] required

List of vector IDs that should be deleted.

#### [Return](https://hub.nuxt.com/docs/features/vectorize\#return-4)

Returns [`VectorizeAsyncMutation`](https://hub.nuxt.com/docs/features/vectorize#vectorizeasyncmutation).

Vectorize Index mutations are processed asynchronously in the background. The `delete` operation returns a mutation identifier unique for that operation, and does not assert that the vector is removed in the index. It typically takes a few seconds for vectors to be removed from the Vectorize index.

### [`describe()`](https://hub.nuxt.com/docs/features/vectorize\#describe)

Retrieves the configuration of a given index directly, including its configured `dimensions` and distance `metric`.

```
const details = await index.describe();

console.log(details);

/*
{
  dimensions: 768,
  vectorCount: 104,
  processedUpToDatetime: '2025-02-05T18:07:15.627Z',
  processedUpToMutation: '7fd632ef-eb54-4788-b788-3cc003f7311a'
}
*/

```

#### [Return](https://hub.nuxt.com/docs/features/vectorize\#return-5)

Returns [`VectorizeIndexDetails`](https://hub.nuxt.com/docs/features/vectorize#vectorizeindexdetails).

## [Vectors](https://hub.nuxt.com/docs/features/vectorize\#vectors)

A vector represents the vector embedding output from a machine learning model.

### [Vector Object](https://hub.nuxt.com/docs/features/vectorize\#vector-object)

The Vector Object contains the id, vector embedding value, and metadata for a given vector.

id

string required

A unique `string` identifying the vector in the index. This should map back to the ID of the document, object or database identifier that the vector values were generated from.

values

number\[\] \| Float32Array \| Float64Array required

An array of `number`, `Float32Array`, or `Float64Array` as the vector embedding itself. This must be a dense array, and the length of this array must match the `dimensions` configured on the index.

Show optional properties

namespace

object

A partition key within a index. Operations are performed per-namespace, so this can be used to create isolated segments within a larger index. (Optional)

metadata

Record<string, 'string' \| 'number' \| 'boolean'>

An optional set of key-value pairs that can be used to store additional metadata alongside a vector.

```
const vectorExample = {
    id: "12345",
    values: [32.4, 6.55, 11.2, 10.3, 87.9],
    namespace: "images",
    metadata: {
        key: "value",
        hello: "world",
        url: "r2://bucket/some/object.json",
    },
};

```

### [Dimensions](https://hub.nuxt.com/docs/features/vectorize\#dimensions)

Dimensions are determined from the output size of the machine learning (ML) model used to generate them, and are a function of how the model encodes and describes features into a vector embedding.

The number of output dimensions can determine vector search accuracy, search performance (latency), and the overall size of the index.

Smaller output dimensions can be faster to search across, which can be useful for user-facing applications. Larger output dimensions can provide more accurate search, especially over larger datasets and/or datasets with substantially similar inputs.

The number of dimensions an index is created for cannot change after an index is created.

The following table highlights some example embeddings models and their output dimensions:

| Model / Embeddings API | Output dimensions | Use-case |
| --- | --- | --- |
| Workers AI - `@cf/baai/bge-base-en-v1.5` | 768 | Text |
| OpenAI - `ada-002` | 1536 | Text |
| Cohere - `embed-multilingual-v2.0` | 768 | Text |
| Google Cloud - `multimodalembedding` | 1408 | Multi-modal (text, images) |

Refer to the [Workers AI documentation](https://developers.cloudflare.com/workers-ai/models/#text-embeddings) to learn about its built-in embedding models.

If you are using [NuxtHub AI](https://hub.nuxt.com/docs/features/ai) to generate vector embeddings, the text-embedding models currently available are:

- [`@cf/baai/bge-base-en-v1.5`](https://developers.cloudflare.com/workers-ai/models/bge-base-en-v1.5) \- 768 dimensions
- [`@cf/baai/bge-large-en-v1.5`](https://developers.cloudflare.com/workers-ai/models/bge-large-en-v1.5) \- 1024 dimensions
- [`@cf/baai/bge-small-en-v1.5`](https://developers.cloudflare.com/workers-ai/models/bge-small-en-v1.5) \- 384 dimensions

### [Distance metrics](https://hub.nuxt.com/docs/features/vectorize\#distance-metrics)

Distance metrics are functions that determine how close vectors are from each other. Vectorize indexes support the following distance metrics:

| Metric | Details |
| --- | --- |
| `cosine` | Distance is measured between `-1` (most dissimilar) to `1` (identical). `0` denotes an orthogonal vector. |
| `euclidean` | Euclidean (L2) distance. `0` denotes identical vectors. The larger the positive number, the further the vectors are apart. |
| `dot-product` | Negative dot product. Larger negative values _or_ smaller positive values denote more similar vectors. A score of `-1000` is more similar than `-500`, and a score of `15` more similar than `50`. |

Determining the similarity between vectors can be subjective and is determined by how well the machine-learning model can represent features in the resulting vector embeddings.

For example, a score of `0.8511` when using a `cosine` metric means that two vectors are close in distance, but whether data they represent is _similar_ is a function of how well the model is able to represent the original content.

Distance metrics cannot be changed after an index is created.

#### [Choosing a distance metric](https://hub.nuxt.com/docs/features/vectorize\#choosing-a-distance-metric)

Choosing a distance metric depends on the vector embedding model used to generate the vectors. If possible, it's best to use the same distance metric as the model generating the vectors.

While it's always good to test the results from different distance metrics, each metric uses different properties of the vectors to determine their similarity. If your embeddings contain data that is related to quantifiable values, such as prices, ratings, or other numerical values, you may want to use a metric that considers both magnitude and direction.

| Metric | Vector Properties Considered |
| --- | --- |
| `cosine` | Only direction |
| `euclidean` | Magnitude and direction |
| `dot-product` | Magnitude and direction |

Learn more about [Vector Distance Metrics](https://www.pinecone.io/learn/vector-similarity/).

### [Supported vector formats](https://hub.nuxt.com/docs/features/vectorize\#supported-vector-formats)

Vectorize supports vectors in three formats:

- An array of floating point numbers (converted into a JavaScript `number[]` array).
- A [Float32Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array)
- A [Float64Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array)

In most cases, a `number[]` array is the easiest when dealing with other APIs, and is the return type of most machine-learning APIs.

## [Metadata](https://hub.nuxt.com/docs/features/vectorize\#metadata)

Metadata is an optional set of key-value pairs that can be attached to a vector on [insert](https://hub.nuxt.com/docs/features/vectorize#insert) or [upsert](https://hub.nuxt.com/docs/features/vectorize#upsert), and allows you to embed or co-locate data about the vector itself.

Vectorize allows you to add up to 10KiB of metadata per vector into your index.

Metadata keys cannot be empty, contain the dot character ( `.`), contain the double-quote character ( `"`), or start with the dollar character ( `$`).

Metadata can be used to store:

- The object storage key, database UUID or other identifier to look up the content the vector embedding represents.
- The raw content (up to the [metadata limits](https://developers.cloudflare.com/vectorize/platform/limits/)), which can allow you to skip additional lookups for smaller content.
- Dates, timestamps, or other metadata that describes when the vector embedding was generated or how it was generated.

For example, a vector embedding representing an image could include the path to the [blob](https://hub.nuxt.com/docs/features/blob) it was generated from, the format, and a category lookup:

```
{
  id: '1',
  values: [32.4, 74.1, 3.2, ...],
  metadata: {
    path: 'r2://bucket-name/path/to/image.png',
    format: 'png',
    category: 'profile_image'
  }
}

```

### [Metadata filtering](https://hub.nuxt.com/docs/features/vectorize\#metadata-filtering)

When querying an index, you can filter using [metadata](https://hub.nuxt.com/docs/features/vectorize#metadata).

Query results will only include vectors that match the `filter` criteria, meaning that `filter` is applied first, and the `topK` results are taken from the filtered set.

Metadata filtering allows you to query specific subsets of your data. You can filter by specific customer IDs, tenant, product category or any other metadata index you have configured.

### [Create metadata indexes](https://hub.nuxt.com/docs/features/vectorize\#create-metadata-indexes)

In order to filter by a specific metadata property, it must be defined in the `metadataIndexes`.

Metadata indexes are configured within the `metadataIndexes` object within your index configuration in `nuxt.config.ts`.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    vectorize: {
      tutorial: {
        dimensions: 32,
        metric: "cosine",
        metadataIndexes: {
          // <property>: "string" | "number" | "boolean"
          url: "string",
          "nested.property": "boolean"
        }
      }
    }
  }
})

```

Metadata indexes can be added at any time, but they will only contain vectors that have been inserted/upserted after the index has been created. Upserting vectors after an index is created will index it as expected.

#### [Metadata Index Tips](https://hub.nuxt.com/docs/features/vectorize\#metadata-index-tips)

- Supported metadata index property types are `string`, `number` and `boolean` types.
- Nested properties can be defined using `.` (dot) like `nested.property`.
- For metadata indexes of type `number`, the indexed number precision is that of float64.
- For metadata indexes of type `string`, each vector indexes the first 64B of the string data truncated on UTF-8 character boundaries to the longest well-formed UTF-8 substring within that limit, so vectors are filterable on the first 64B of their value for each indexed property.

Vectorize currently supports a maximum of 10 metadata indexes per Vectorize index. Learn more at [https://developers.cloudflare.com/vectorize/platform/limits/](https://developers.cloudflare.com/vectorize/platform/limits/).

### [Supported operations](https://hub.nuxt.com/docs/features/vectorize\#supported-operations)

You can use metadata filters with the `query()` method by passing a `filter` option.

```
const matches = await index.query(queryVector, {
  filter: {
    "url": "https://hub.nuxt.com",
    "nested.property": { "$ne": true }
  }
});

```

The `filter` property follows rules similar to those of the `metadata` property used when inserting metadata.

- `filter` must be non-empty object whose compact JSON representation must be less than 2048 bytes.
- `filter` object keys cannot be empty, contain `"` or `.` (dot is reserved for nesting), start with `$`, or be longer than 512 characters.
- `filter` object non-nested values can be `string`, `number`, `boolean`, or `null` values.

The metadata filter supports the following operators:

| Operator | Description |
| --- | --- |
| `$eq` | Equals |
| `$ne` | Not equals |
| '$in' | In |
| '$nin' | Not in |
| '$lt' | Less than |
| '$lte' | Less than or equal to |
| '$gt' | Greater than |
| '$gte' | Greater than or equal to |

#### [Valid `filter` examples](https://hub.nuxt.com/docs/features/vectorize\#valid-filter-examples)

##### Implicit `$eq` operator

```
const matches = await index.query(queryVector, {
  filter: {
    { "streaming_platform": "netflix" }
  }
});

```

##### Explicit operator

```
const matches = await index.query(queryVector, {
  filter: {
    { "someKey": { "$ne": true } }
  }
});

```

##### Nested Properties

```
const matches = await index.query(queryVector, {
  filter: {
    { "pandas.nice": 42 }
  }
});

// looks for { "pandas": { "nice": 42 } }

```

##### Implicit logical `AND` with multiple keys

```
const matches = await index.query(queryVector, {
  filter: {
    "pandas.nice": 42,
    "someKey": { "$ne": true }
  }
});

```

### [Limits](https://hub.nuxt.com/docs/features/vectorize\#limits)

You can store up to 10KiB of metadata per vector, and create up to 10 metadata indexes per Vectorize index.

For metadata indexes of type `number`, the indexed number precision is that of float64.

For metadata indexes of type `string`, each vector indexes the first 64B of the string data truncated on UTF-8 character boundaries to the longest well-formed UTF-8 substring within that limit, so vectors are filterable on the first 64B of their value for each indexed property.

See [Vectorize Limits](https://developers.cloudflare.com/vectorize/platform/limits/) for a complete list of limits.

## [Namespaces](https://hub.nuxt.com/docs/features/vectorize\#namespaces)

Namespaces provide a way to segment the vectors within your index. For example, by customer, merchant or store ID.

To associate vectors with a namespace, you can optionally provide a `namespace: string` value when performing an insert or upsert operation. When querying, you can pass the namespace to search within as an optional parameter to your query.

A namespace can be up to 64 characters (bytes) in length and you can have up to 1,000 namespaces per index. Refer to the [Limits](https://developers.cloudflare.com/vectorize/platform/limits/) documentation for more details.

When a namespace is specified in a query operation, only vectors within that namespace are used for the search. Namespace filtering is applied before vector search, not after.

#### [Insert vectors with a namespace](https://hub.nuxt.com/docs/features/vectorize\#insert-vectors-with-a-namespace)

```
// Mock vectors
// Vectors from a machine-learning model are typically ~100 to 1536 dimensions
// wide (or wider still).
const sampleVectors: Array<VectorizeVector> = [\
    {\
        id: "1",\
        values: [32.4, 74.1, 3.2, ...],\
        namespace: "text",\
    },\
    {\
        id: "2",\
        values: [15.1, 19.2, 15.8, ...],\
        namespace: "images",\
    },\
    {\
        id: "3",\
        values: [0.16, 1.2, 3.8, ...],\
        namespace: "pdfs",\
    },\
];

// Insert your vectors, returning a count of the vectors inserted and their vector IDs.
const inserted = await index.insert(sampleVectors);

```

#### [Query vectors within a namespace](https://hub.nuxt.com/docs/features/vectorize\#query-vectors-within-a-namespace)

```
// Your queryVector will be searched against vectors within the namespace (only)
const matches = await index.query(queryVector, {
    namespace: "images",
});

```

### [Namespace versus metadata filtering](https://hub.nuxt.com/docs/features/vectorize\#namespace-versus-metadata-filtering)

Both [namespaces](https://developers.cloudflare.com/vectorize/best-practices/insert-vectors/#namespaces) and metadata filtering narrow the vector search space for a query. Consider the following when evaluating both filter types:

- A namespace filter is applied before metadata filter(s)
- A vector can only be part of a single namespace, while vector metadata can contain multiple key-value pairs
- A namespace must be a string, while metadata values support different types ( `string`, `boolean`, or `number`)

## [Types](https://hub.nuxt.com/docs/features/vectorize\#types)

### [`VectorizeVector`](https://hub.nuxt.com/docs/features/vectorize\#vectorizevector)

See [vector object](https://hub.nuxt.com/docs/features/vectorize#vector-object).

```
interface VectorizeVector {
  /** The ID for the vector. This can be user-defined, and must be unique. It should uniquely identify the object, and is best set based on the ID of what the vector represents. */
  id: string;
  /** The vector values */
  values: VectorFloatArray | number[];
  /** The namespace this vector belongs to. */
  namespace?: string;
  /** Metadata associated with the vector. Includes the values of other fields and potentially additional details. */
  metadata?: Record<string, VectorizeVectorMetadata>;
}

```

### [`VectorizeMatches`](https://hub.nuxt.com/docs/features/vectorize\#vectorizematches)

A set of matching [VectorizeMatch](https://hub.nuxt.com/docs/features/vectorize#vectorizematch) for a particular query.

```
interface VectorizeMatches {
  matches: VectorizeMatch[];
  count: number;
}

```

### [`VectorizeMatch`](https://hub.nuxt.com/docs/features/vectorize\#vectorizematch)

Represents a matched vector for a query along with its score and (if specified) the matching vector information.

```
type VectorizeMatch = Pick<Partial<VectorizeVector>, "values"> &
  Omit<VectorizeVector, "values"> & {
    /** The score or rank for similarity, when returned as a result */
    score: number;
  };

```

### [`VectorizeAsyncMutation`](https://hub.nuxt.com/docs/features/vectorize\#vectorizeasyncmutation)

Result type indicating a mutation on the Vectorize Index. Mutations are processed asynchronously in the background and the `mutationId` is the unique identifier for the operation.

```
interface VectorizeAsyncMutation {
  /** The unique identifier for the async mutation operation containing the changeset. */
  mutationId: string;
}

```

### [`VectorizeIndexInfo`](https://hub.nuxt.com/docs/features/vectorize\#vectorizeindexinfo)

Metadata about an existing index.

```
interface VectorizeIndexInfo {
  /** The number of records containing vectors within the index. */
  vectorsCount: number;
  /** Number of dimensions the index has been configured for. */
  dimensions: number;
  /** ISO 8601 datetime of the last processed mutation on in the index. All changes before this mutation will be reflected in the index state. */
  processedUpToDatetime: number;
  /** UUIDv4 of the last mutation processed by the index. All changes before this mutation will be reflected in the index state. */
  processedUpToMutation: number;
}

```

## [Examples](https://hub.nuxt.com/docs/features/vectorize\#examples)

### [Vector search](https://hub.nuxt.com/docs/features/vectorize\#vector-search)

In this example:

1. An embeddings vector is generated from the search query.
2. The Vectorize index is queried with the embeddings vector.
3. Then the original source data is retrieved by querying the database for the IDs returned by Vectorize.

Learn more at [https://developers.cloudflare.com/vectorize/reference/what-is-a-vector-database/#vector-search](https://developers.cloudflare.com/vectorize/reference/what-is-a-vector-database/#vector-search)

server/api/search.get.ts

```
import { z } from "zod";

interface EmbeddingResponse {
  shape: number[];
  data: number[][];
}

const Query = z.object({
  query: z.string().min(1).max(256),
  limit: z.coerce.number().int().min(1).max(20).default(10),
});

export default defineEventHandler(async (event) => {
  const { query, limit } = await getValidatedQuery(event, Query.parse);

  // 1. generate embeddings for search query
  const embeddings: EmbeddingResponse = await hubAI().run("@cf/baai/bge-base-en-v1.5", { text: [query] });
  const vectors = embeddings.data[0];

  // 2. query vectorize to find similar results
  const vectorize: VectorizeIndex = hubVectorize('jobs');
  const { matches } = await vectorize.query(vectors, { topK: limit });

  // 3. get details for matching items
  const jobMatches = await useDrizzle().query.jobs.findMany({
    where: (jobs, { inArray }) => inArray(jobs.id, matches.map((match) => match.id)),
    with: {
      department: true,
      subDepartment: true,
    },
  });

  // 4. add score to matches
  const jobMatchesWithScore = jobMatches.map((job) => {
    const match = matches.find((match) => match.id === job.id);
    return { ...job, score: match!.score };
  });

  // 5. sort by score
  return jobMatchesWithScore.sort((a, b) => b.score - a.score);
});

```

### [Bulk generation and import](https://hub.nuxt.com/docs/features/vectorize\#bulk-generation-and-import)

This example bulk generates vectors using a text embeddings AI model for all data within a database table, using [Nitro tasks](https://nitro.build/guide/tasks). You can run the task via Nuxt DevTools.

server/tasks/generate-embeddings.ts

```
import { jobs } from "../database/schema";
import { asc, count } from "drizzle-orm";

export default defineTask({
  meta: {
    name: "vectorize:seed",
    description: "Generate text embeddings vectors",
  },
  async run() {
    console.log("Running Vectorize seed task...");
    const jobCount = (await useDrizzle().select({ count: count() }).from(tables.jobs))[0].count;

    // process in chunks of 100 as that's the maximum supported by workers ai
    const INCREMENT_AMOUNT = 100;

    const totalBatches = Math.ceil(jobCount / INCREMENT_AMOUNT);
    console.log(`Total items: ${jobCount} (${totalBatches} batches)`);

    for (let i = 0; i < jobCount; i += INCREMENT_AMOUNT) {
      console.log(`⏳ Processing items ${i} - ${i + INCREMENT_AMOUNT}...`);

      const jobsChunk = await useDrizzle()
        .select()
        .from(tables.jobs)
        .orderBy(asc(jobs.id))
        .limit(INCREMENT_AMOUNT)
        .offset(i);

      // generate embeddings for job titles
      const ai = hubAi();
      const embeddings = await ai.run(
        "@cf/baai/bge-base-en-v1.5",
        { text: jobsChunk.map((job) => job.jobTitle) },
        { gateway: { id: "new-role" } },
      );
      const vectors = embeddings.data;

      const formattedEmbeddings = jobsChunk.map(({ id, ...metadata }, index) => ({
        id,
        metadata: { ...metadata },
        values: vectors[index],
      }));

      // save vector embeddings to index
      const index = hubVectorize('jobs');
      await index.upsert(formattedEmbeddings);

      console.log(`✅ Processed items ${i} - ${i + INCREMENT_AMOUNT}...`);
    }

    console.log("Vectorize seed task completed!");
    return { result: "success" };
  },
});

```

## [Limits](https://hub.nuxt.com/docs/features/vectorize\#limits-1)

| Feature | Current Limit |
| --- | --- |
| Indexes per account | 100 indexes |
| Maximum dimensions per vector | 1536 dimensions |
| Maximum vector ID length | 51 bytes |
| Metadata per vector | 10KiB |
| Maximum returned results ( `topK`) with values or metadata | 20 |
| Maximum returned results ( `topK`) without values and metadata | 100 |
| Maximum upsert batch size (per batch) | 1000 |
| Maximum index name length | 64 bytes |
| Maximum vectors per index | 5,000,000 |
| Maximum namespaces per index | 1000 namespaces |
| Maximum namespace name length | 64 bytes |
| Maximum vectors upload size | 100 MB |
| Maximum metadata indexes per Vectorize index | 10 |
| Maximum indexed data per metadata index per vector | 64 bytes |

Learn more about [Cloudflare Vectorize limits](https://developers.cloudflare.com/vectorize/platform/limits/).

## [Pricing](https://hub.nuxt.com/docs/features/vectorize\#pricing)

Vectorize

|  | Free Tier | Pricing |
| --- | --- | --- |
| Writes | Free | Free |
| Queried vector dimensions | 30 million / month | 50 million / month + $0.01/million |
| Stored vector dimensions | 5 million / month | 10 million / month + $0.05/100 million |

[Cloudflare Vectorize pricing](https://developers.cloudflare.com/vectorize/platform/pricing/)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/vectorize.md)

[Realtime\\
\\
Build realtime experiences with NuxtHub using Cloudflare Workers & Durable Objects.](https://hub.nuxt.com/docs/features/realtime) [Hooks\\
\\
Use lifecycle hooks to stay synced with NuxtHub.](https://hub.nuxt.com/docs/recipes/hooks)

## Import Template Sign-In
Please sign-in to import the template.

[Continue with GitHub](https://admin.hub.nuxt.com/auth/github)

## NuxtHub on Workers
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

April 14, 2025

# NuxtHub on Workers

Deploy your Nuxt apps to Cloudflare Workers and build real-time experiences with zero configuration.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://bsky.app/profile/atinux.com) [RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev) [AB\\
\\
Ahad Birang\\
\\
@farnabaz.dev](https://bsky.app/profile/farnabaz.dev)

This feature is available on both [free and pro plans](https://hub.nuxt.com/pricing) and in [`@nuxthub/core >= v0.8.24`](https://github.com/nuxt-hub/core/releases/tag/v0.8.24).

After much development (and [many](https://x.com/Atinux/status/1907552625559744865/photo/1) [teasers](https://x.com/Atinux/status/1884315020982657452/video/1)), we're thrilled to announce that NuxtHub now supports deploying to Cloudflare Workers!

## [Why Workers](https://hub.nuxt.com/changelog/workers\#why-workers)

For a while, Cloudflare have been releasing exciting new features such as [observability & persistent logs](https://developers.cloudflare.com/workers/observability/logs/workers-logs/), [workflows](https://developers.cloudflare.com/workflows/), [cron triggers](https://developers.cloudflare.com/workers/configuration/cron-triggers/), and [much more](https://developers.cloudflare.com/workers/static-assets/migrate-from-pages/#compatibility-matrix). However, these features are only available on Cloudflare Workers, and were not brought to Cloudflare Pages.

Now with the introduction of [static assets](https://developers.cloudflare.com/workers/static-assets/), suddenly it is now viable to deploy Nuxt applications to Cloudflare Workers, and we can benefit from the new features and services available on Cloudflare Workers.

## [Real-time](https://hub.nuxt.com/changelog/workers\#real-time)

Projects deployed to NuxtHub on Workers also fully support [Nitro WebSocket](https://nitro.build/guide/websocket), allowing you to create real-time experiences on NuxtHub. Simply set `nitro.experimental.websocket` to `true` in your `nuxt.config.ts`, create your websocket server route with crossws, and deploy!

Under the hood this is powered by Cloudflare Durable Objects. Nitro and NuxtHub magically takes care of everything related to the Durable Object, from building to deploying.

Check out our [multiplayer-globe](https://github.com/nuxt-hub/multiplayer-globe) template for an example of using websockets ( [live demo](https://multiplayer-globe.nuxthub.workers.dev/)).

Learn more about using websockets in NuxtHub.

## [Deploying to Workers](https://hub.nuxt.com/changelog/workers\#deploying-to-workers)

Get started by creating a new project and selecting the Cloudflare Workers type on the [NuxtHub Admin](https://admin.hub.nuxt.com/) or with the latest version of the `nuxthub` CLI ( [v0.9.0](https://github.com/nuxt-hub/cli/releases)). All our templates are fully compatible with NuxtHub on Workers.

We're working on a migration path to help simplify the switch from Cloudflare Pages to Workers. Until then, you can deploy your existing Nuxt apps to Cloudflare Workers by setting `hub.workers` to `true`, and linking them to a separate new project with the Workers type, then manually moving any data stored in your database, KV or blob.

While NuxtHub on Workers is in beta, preview environments aren't unavailable. Stay tuned for updates.

**If you already have a NuxtHub account**, make sure to add the `Workers Scripts` permission on your Cloudflare API token.

- Open [Cloudflare User API Tokens](https://dash.cloudflare.com/profile/api-tokens)
- Find your NuxtHub token(s)
- Add the `Workers Scripts > Edit` permission
- Save the changes

Another solution is to link again your Cloudflare account from your NuxtHub team settings by clicking on `Connect a different Cloudflare account` \> `Create a token`.

## [What's next](https://hub.nuxt.com/changelog/workers\#whats-next)

Throughout the next few weeks, we'll be enhancing NuxtHub on Workers with new features and integration with more Cloudflare Workers-specific services, including:

- **Observability**: Automatically ingest, filter, and analyse logs
- **Queues**: Process background tasks effectively at scale
- **Cron Tasks**: Run Nitro tasks automatically on a schedule
- **Environments**: Bringing the preview environment to NuxtHub on Workers

Let us know your feedback by joining our [Discord](https://discord.gg/vW89dsVqBF), following us on [X](https://x.com/nuxt_hub), or emailing us at [hub@nuxt.com](mailto:hub@nuxt.com).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Worker Logs & Additional Bindings\\
\\
Support for Worker Logs and adding additional bindings for Worker projects.](https://hub.nuxt.com/changelog/observability-additional-bindings) [NuxtHub GitHub App & Action\\
\\
Introducing our GitHub App & Action for automating your Nuxt deployments with GitHub as well as a new project creation flow.](https://hub.nuxt.com/changelog/github-app-and-action)

## NuxtHub Beta Release
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

Release·  June 2, 2024

# Introducing NuxtHub Beta

We are excited to announce the beta release of NuxtHub, a new way to build full-stack Nuxt applications globally with zero configuration.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

With more than 700 alpha testers and 3,000 project deployments in 3 months, we are excited to announce that NuxtHub is now in public beta ✨

## [What is NuxtHub?](https://hub.nuxt.com/blog/beta\#what-is-nuxthub)

NuxtHub is an extension of the [Nuxt framework](https://nuxt.com/) to help you build full-stack applications on your Cloudflare account, with zero configuration.

According to Wikipedia, Cloudflare is an American company that provides content delivery network services, cloud cybersecurity, DDoS mitigation, Domain Name Service, and ICANN-accredited domain registration services. Cloudflare is used by more than 20 percent of the Internet for its web security services, as of 2022.

NuxtHub is composed of two elements:

- An open source Nuxt module: [@nuxthub/core](https://github.com/nuxt-hub/core)
- An admin UI: [admin.hub.nuxt.com](https://admin.hub.nuxt.com/)

Let’s explain what the module and the admin are responsible for.

### [NuxtHub Module](https://hub.nuxt.com/blog/beta\#nuxthub-module)

**The NuxtHub module** allows you to access a SQL database, blob and KV storage (and more features) with zero configuration.

In development, it generates a `.data/hub/wrangler.toml` file and uses [Cloudflare Proxy](https://developers.cloudflare.com/workers/wrangler/api/#getplatformproxy) to connect to the desired bindings:

- [`hubDatabase()`](https://hub.nuxt.com/docs/features/database) -\> [Cloudflare D1](https://www.cloudflare.com/developer-platform/d1/)
- [`hubKV()`](https://hub.nuxt.com/docs/features/kv) -\> [Cloudflare KV](https://www.cloudflare.com/developer-platform/workers-kv/)
- [`hubBlob()`](https://hub.nuxt.com/docs/features/blob) -\> [Cloudflare R2](https://www.cloudflare.com/developer-platform/r2/)

In production, it reads from the bindings set in your Cloudflare dashboard following a specific naming convention: DB, BLOB, KV.

Note that `hubDatabase()`, `hubKV()` and `hubBlob()` server utils are a bit different than the binding itself to provide more features and a better developer experience when used in a Nuxt application.

By leveraging bindings, you never have to add secret keys or tokens to your Nuxt application in order to access the database, KV or blob. The underlying secret is never exposed to your Nuxt server’s code, and therefore can’t be accidentally leaked.

One of the core features of the `@nuxthub/core` module is the ability to connect to your deployed project and access the bindings used there, we call it [remote storage](https://hub.nuxt.com/docs/getting-started/remote-storage).

This feature is useful for working with your production or staging database, KV and blob storage during development.

![NuxtHub remote storage in terminal](https://hub.nuxt.com/_ipx/s_915x515/images/blog/nuxthub-remote-storage.png)

When opening the [Nuxt DevTools](https://devtools.nuxt.com/) of your project, you will notice new tabs:

![NuxtHub tabs in Nuxt devtools](https://hub.nuxt.com/_ipx/s_915x515/images/blog/nuxthub-devtools.png)

NuxtHub adds a UI to administrate your SQL database (powered by [Drizzle Studio](https://orm.drizzle.team/drizzle-studio/overview)), KV and Blob storage as well as your server cache.

The module is open source and available at [github.com/nuxt-hub/core](https://github.com/nuxt-hub/core).

Once your Nuxt project with the hub module is ready, you can deploy your project on your Cloudflare account by following the [self-hosted guide](https://hub.nuxt.com/docs/getting-started/deploy#self-hosted). If you want a full zero configuration experience, we recommend using the NuxtHub Admin platform.

### [NuxtHub Admin](https://hub.nuxt.com/blog/beta\#nuxthub-admin)

The [NuxtHub admin](https://admin.hub.nuxt.com/) is a web based dashboard to manage your NuxtHub applications. It helps you deploy your NuxtHub apps with a single command on your Cloudflare account while provisioning all the necessary resources for you. It abstracts the complexity of managing full-stack Nuxt applications on Cloudflare.

Some of the features are:

- Link your Cloudflare account and stay in control (we never mark-up Cloudflare prices)
- Clone one of our full-stack Nuxt templates
- Deploy your application with `npx nuxthub deploy` command or link your GitHub or GitLab repository
- Relax while it provisions all the necessary resources (database, kv, blob)
- Manage your app's resources with an admin panel
- Share team member access to manage your app without sharing your Cloudflare account
- Monitor your application with logs and analytics

[![NuxtHub projects management](https://hub.nuxt.com/_ipx/s_915x515/images/blog/nuxthub-admin-projects.png)](https://admin.hub.nuxt.com/)

You can sign up for free and start building full-stack Nuxt applications at [admin.hub.nuxt.com](https://admin.hub.nuxt.com/).

## [Why NuxtHub?](https://hub.nuxt.com/blog/beta\#why-nuxthub)

Starting with version 3, Nuxt is a complete full-stack framework thanks to its open server engine called [Nitro](https://nitro.build/). It allows you to have hot module replacement on the server without rebuilding your Vue application, outstanding performance as well as deploying to many different hosting providers with zero configuration. Read more about it on the blog post: [Nuxt on the Edge](https://nuxt.com/blog/nuxt-on-the-edge).

With this in mind, we wanted to provide you with a reliable platform to build and deploy your next idea while keeping the best developer experience.

NuxtHub lets you build any kind of web application (SaaS, E-Commerce, Blog, you name it!) that can:

- Deploy globally on 275+ locations worldwide
- Access to a SQL database: user authentication, content-management, etc.
- Store files: media upload, invoice storage, etc.
- Rank high on search engines with server-side rendering or even hybrid rendering
- Support staging environment (preview mode)
- Get a nice .nuxt.dev domain 🕶️

All of this, **starting at $0/month** thanks to Cloudflare free plan and ours, learn more on our [pricing page](https://hub.nuxt.com/pricing).

Your Nuxt applications are deployed on **Your Cloudflare account** and we **never mark-up Cloudflare pricing**.

NuxtHub also has the ability to access your remote storage from your local environment thanks to our secured proxy system. This feature is useful for sharing your database, KV, and blob data with your team in development or applying migrations or scripts to your staging/production data.

As of today, NuxtHub works like this:

![NuxtHub architecture](https://hub.nuxt.com/_ipx/s_915x594/images/landing/nuxthub-schema.png)

This is only the beginning as we plan to support more Cloudflare primitives in the future:

![Cloudflare primitives](https://hub.nuxt.com/_ipx/s_915x810/images/blog/cloudflare-primitives.png)

## [What’s next?](https://hub.nuxt.com/blog/beta\#whats-next)

To help you test NuxtHub features, we have released [open source templates](https://hub.nuxt.com/templates). You also have the option to [add to your current Nuxt application](https://hub.nuxt.com/docs/getting-started/installation#add-to-a-nuxt-project).

Now that we have the main primitives to build full-stack applications (the admin is built & deployed with NuxtHub), we plan to add business-logic features such as:

- `@nuxthub/auth`: Add authentication for user management
- `@nuxthub/email`: Send transactional emails to your users
- `@nuxthub/analytics`: Understand your traffic and track events within your application and API
- `@nuxthub/...`: You name it!

Feel free to join us, contribute or give a star on [https://github.com/nuxt-hub/core](https://github.com/nuxt-hub/core) 💚

Happy Nuxting!

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to blog](https://hub.nuxt.com/blog)

Share:

[Code, Draw, Deploy: A drawing app with Nuxt & Cloudflare R2\\
\\
Let's walk through the process of creating Atidraw, a web-based drawing application built with Nuxt and using Cloudflare R2 for storage.](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2)

## Blob Storage
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Blob Storage

Upload, store and serve images, videos, music, documents and other unstructured data in your Nuxt application.

## [Getting Started](https://hub.nuxt.com/docs/features/blob\#getting-started)

Enable the blob storage in your NuxtHub project by adding the `blob` property to the `hub` object in your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    blob: true
  }
})

```

This option will use Cloudflare platform proxy in development and automatically create a [Cloudflare R2](https://developers.cloudflare.com/r2) bucket for your project when you [deploy it](https://hub.nuxt.com/docs/getting-started/deploy).

Nuxt DevToolsNuxtHub Admin

![Nuxt DevTools Blob](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxt-devtools-blob.png)

![NuxtHub Admin Blob](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-blob.png)

## [`hubBlob()`](https://hub.nuxt.com/docs/features/blob\#hubblob)

Server composable that returns a set of methods to manipulate the blob storage.

### [`list()`](https://hub.nuxt.com/docs/features/blob\#list)

Returns a paginated list of blobs (metadata only).

server/api/files.get.ts

```
export default eventHandler(async () => {
  const { blobs } = await hubBlob().list({ limit: 10 })

  return blobs
})

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params)

options

Object

The list options.

Show properties

limit

Number

The maximum number of blobs to return per request. Defaults to `1000`.

prefix

String

Filters the results to only those that begin with the specified prefix.

cursor

String

The cursor to continue from a previous list operation.

folded

Boolean

If `true`, the list will be folded using `/` separator and list of folders will be returned.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return)

Returns [`BlobListResult`](https://hub.nuxt.com/docs/features/blob#bloblistresult).

#### [Return all blobs](https://hub.nuxt.com/docs/features/blob\#return-all-blobs)

To fetch all blobs, you can use a `while` loop to fetch the next page until the `cursor` is `null`.

```
let blobs = []
let cursor = null

do {
  const res = await hubBlob().list({ cursor })
  blobs.push(...res.blobs)
  cursor = res.cursor
} while (cursor)

```

### [`serve()`](https://hub.nuxt.com/docs/features/blob\#serve)

Returns a blob's data and sets `Content-Type`, `Content-Length` and `ETag` headers.

server/routes/images/\[...pathname\].get.tspages/index.vue

```
export default eventHandler(async (event) => {
  const { pathname } = getRouterParams(event)

  return hubBlob().serve(event, pathname)
})

```

```
<template>
  <img src="/images/my-image.jpg">
</template>

```

To prevent XSS attacks, make sure to control the Content type of the blob you serve.

You can also set a `Content-Security-Policy` header to add an additional layer of security:

server/api/images/\[...pathname\].get.ts

```
export default eventHandler(async (event) => {
  const { pathname } = getRouterParams(event)

  setHeader(event, 'Content-Security-Policy', 'default-src \'none\';')
  return hubBlob().serve(event, pathname)
})

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-1)

event

H3Event

Handler's event, needed to set headers.

pathname

String

The name of the blob to serve.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-1)

Returns the blob's raw data and sets `Content-Type` and `Content-Length` headers.

### [`head()`](https://hub.nuxt.com/docs/features/blob\#head)

Returns a blob's metadata.

```
const metadata = await hubBlob().head(pathname)

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-2)

pathname

String

The name of the blob to serve.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-2)

Returns a [`BlobObject`](https://hub.nuxt.com/docs/features/blob#blobobject).

### [`get()`](https://hub.nuxt.com/docs/features/blob\#get)

Returns a blob body.

```
const blob = await hubBlob().get(pathname)

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-3)

pathname

String

The name of the blob to serve.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-3)

Returns a [`Blob`](https://developer.mozilla.org/en-US/docs/Web/API/Blob) or `null` if not found.

### [`put()`](https://hub.nuxt.com/docs/features/blob\#put)

Uploads a blob to the storage.

server/api/files.post.ts

```
export default eventHandler(async (event) => {
  const form = await readFormData(event)
  const file = form.get('file') as File

  if (!file || !file.size) {
    throw createError({ statusCode: 400, message: 'No file provided' })
  }

  ensureBlob(file, {
    maxSize: '1MB',
    types: ['image']
  })

  return hubBlob().put(file.name, file, {
    addRandomSuffix: false,
    prefix: 'images'
  })
})

```

See an example on the Vue side:

pages/upload.vue

```
<script setup lang="ts">
async function uploadImage (e: Event) {
  const form = e.target as HTMLFormElement

  await $fetch('/api/files', {
    method: 'POST',
    body: new FormData(form)
  }).catch((err) => alert('Failed to upload image:\n'+ err.data?.message))

  form.reset()
}
</script>

<template>
  <form @submit.prevent="uploadImage">
    <label>Upload an image: <input type="file" name="image"></label>
    <button type="submit">
      Upload
    </button>
  </form>
</template>

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-4)

pathname

String

The name of the blob to serve.

body

String \| ReadableStream<any> \| ArrayBuffer \| ArrayBufferView \| Blob

The blob's data.

options

Object

The put options. Any other provided field will be stored in the blob's metadata.

Show properties

contentType

String

The content type of the blob. If not given, it will be inferred from the Blob or the file extension.

contentLength

String

The content length of the blob.

addRandomSuffix

Boolean

If `true`, a random suffix will be added to the blob's name. Defaults to `false`.

prefix

string

The prefix to use for the blob pathname.

customMetadata

Record<string, string>

An object with custom metadata to store with the blob.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-4)

Returns a [`BlobObject`](https://hub.nuxt.com/docs/features/blob#blobobject).

### [`del()`](https://hub.nuxt.com/docs/features/blob\#del)

Delete a blob with its pathname.

server/api/files/\[...pathname\].delete.ts

```
export default eventHandler(async (event) => {
  const { pathname } = getRouterParams(event)

  await hubBlob().del(pathname)

  return sendNoContent(event)
})

```

You can also delete multiple blobs at once by providing an array of pathnames:

```
await hubBlob().del(['images/1.jpg', 'images/2.jpg'])

```

You can also use the `delete()` method as alias of `del()`.

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-5)

pathname

String

The name of the blob to serve.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-5)

Returns nothing.

### [`handleUpload()`](https://hub.nuxt.com/docs/features/blob\#handleupload)

This is an "all in one" function to validate a `Blob` by checking its size and type and upload it to the storage.

This server util is made to be used with the [`useUpload()`](https://hub.nuxt.com/docs/features/blob#useupload) Vue composable.

It can be used to handle file uploads in API routes.

server/api/blob.put.tspages/upload.vue

```
export default eventHandler(async (event) => {
  return hubBlob().handleUpload(event, {
    formKey: 'files', // read file or files form the `formKey` field of request body (body should be a `FormData` object)
    multiple: true, // when `true`, the `formKey` field will be an array of `Blob` objects
    ensure: {
      types: ['image/jpeg', 'image/png'], // allowed types of the file
    },
    put: {
      addRandomSuffix: true
    }
  })
})

```

```
<script setup lang="ts">
const upload = useUpload('/api/blob', { method: 'PUT' })

async function onFileSelect(event: Event) {
  const uploadedFiles = await upload(event.target as HTMLInputElement)
  // file uploaded successfully
}
</script>

<template>
  <input type="file" name="file" @change="onFileSelect" multiple accept="image/jpeg, image/png" />
</template>

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-6)

formKey

string

The form key to read the file from. Defaults to `'files'`.

multiple

boolean

When `true`, the `formKey` field will be an array of `Blob` objects.

ensure

BlobEnsureOptions

See [`ensureBlob()`](https://hub.nuxt.com/docs/features/blob#ensureblob) options for more details.

put

BlobPutOptions

See [`put()`](https://hub.nuxt.com/docs/features/blob#put) options for more details.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-6)

Returns a [`BlobObject`](https://hub.nuxt.com/docs/features/blob#blobobject) or an array of [`BlobObject`](https://hub.nuxt.com/docs/features/blob#blobobject) if `multiple` is `true`.

Throws an error if `file` doesn't meet the requirements.

### [`handleMultipartUpload()`](https://hub.nuxt.com/docs/features/blob\#handlemultipartupload)

Handle the request to support multipart upload.

server/api/files/multipart/\[action\]/\[...pathname\].ts

```
export default eventHandler(async (event) => {
  return await hubBlob().handleMultipartUpload(event)
})

```

Make sure your route includes `[action]` and `[...pathname]` params.

On the client side, you can use the `useMultipartUpload()` composable to upload a file in parts.

```
<script setup lang="ts">
async function uploadFile(file: File) {
  const upload = useMultipartUpload('/api/files/multipart')

  const { progress, completed, abort } = upload(file)
}
</script>

```

See [`useMultipartUpload()`](https://hub.nuxt.com/docs/features/blob#usemultipartupload) on usage details.

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-7)

contentType

string

The content type of the blob.

contentLength

string

The content length of the blob.

addRandomSuffix

boolean

If `true`, a random suffix will be added to the blob's name. Defaults to `false`.

### [`createMultipartUpload()`](https://hub.nuxt.com/docs/features/blob\#createmultipartupload)

We suggest to use [`handleMultipartUpload()`](https://hub.nuxt.com/docs/features/blob#handlemultipartupload) method to handle the multipart upload request.

Start a new multipart upload.

server/api/files/multipart/\[...pathname\].post.ts

```
export default eventHandler(async (event) => {
  const { pathname } = getRouterParams(event)

  const mpu = await hubBlob().createMultipartUpload(pathname)

  return {
    uploadId: mpu.uploadId,
    pathname: mpu.pathname,
  }
})

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-8)

pathname

String

The name of the blob to serve.

options

Object

The put options. Any other provided field will be stored in the blob's metadata.

Show properties

contentType

String

The content type of the blob. If not given, it will be inferred from the Blob or the file extension.

contentLength

String

The content length of the blob.

addRandomSuffix

Boolean

If `true`, a random suffix will be added to the blob's name. Defaults to `true`.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-7)

Returns a `BlobMultipartUpload`

### [`resumeMultipartUpload()`](https://hub.nuxt.com/docs/features/blob\#resumemultipartupload)

We suggest to use [`handleMultipartUpload()`](https://hub.nuxt.com/docs/features/blob#handlemultipartupload) method to handle the multipart upload request.

Continue processing of unfinished multipart upload.

To upload a part of the multipart upload, you can use the `uploadPart()` method:

server/api/files/multipart/\[...pathname\].put.ts

```
export default eventHandler(async (event) => {
  const { pathname } = getRouterParams(event)
  const { uploadId, partNumber } = getQuery(event)

  const stream = getRequestWebStream(event)!
  const body = await streamToArrayBuffer(stream, contentLength)

  const mpu = hubBlob().resumeMultipartUpload(pathname, uploadId)
  return await mpu.uploadPart(partNumber, body)
})

```

Complete the upload by calling `complete()` method:

server/api/files/multipart/complete.post.ts

```
export default eventHandler(async (event) => {
  const { pathname, uploadId } = getQuery(event)
  const parts = await readBody(event)

  const mpu = hubBlob().resumeMultipartUpload(pathname, uploadId)
  return await mpu.complete(parts)
})

```

If you want to cancel the upload, you need to call `abort()` method:

server/api/files/multipart/\[...pathname\].delete.ts

```
export default eventHandler(async (event) => {
  const { pathname } = getRouterParams(event)
  const { uploadId } = getQuery(event)

  const mpu = hubBlob().resumeMultipartUpload(pathname, uploadId)
  await mpu.abort()

  return sendNoContent(event)
})

```

A simple example of multipart upload in client with above routes:

utils/multipart-upload.ts

```
async function uploadLargeFile(file: File) {
  const chunkSize = 10 * 1024 * 1024 // 10MB

  const count = Math.ceil(file.size / chunkSize)
  const { pathname, uploadId } = await $fetch(
    `/api/files/multipart/${file.name}`,
    { method: 'POST' },
  )

  const uploaded = []

  for (let i = 0; i < count; i++) {
    const start = i * chunkSize
    const end = Math.min(start + chunkSize, file.size)
    const partNumber = i + 1
    const chunk = file.slice(start, end)

    const part = await $fetch(
      `/api/files/multipart/${pathname}`,
      {
        method: 'PUT',
        query: { uploadId, partNumber },
        body: chunk,
      },
    )

    uploaded.push(part)
  }

  return await $fetch(
    '/api/files/multipart/complete',
    {
      method: 'POST',
      query: { pathname, uploadId },
      body: { parts: uploaded },
    },
  )
}

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-9)

pathname

String

The name of the blob to serve.

uploadId

String

The upload ID of the multipart upload.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-8)

Returns a `BlobMultipartUpload`

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-10)

event

H3Event required

The event to handle.

### [`createCredentials()`](https://hub.nuxt.com/docs/features/blob\#createcredentials)

Creates temporary access credentials that can be optionally scoped to prefixes or objects.

Useful to create presigned URLs to upload files to R2 from client-side ( [see example](https://hub.nuxt.com/docs/features/blob#create-presigned-urls-to-upload-files-to-r2)).

This method is only available in production or in development with `--remote` flag.

```
// Create credentials with default permission & scope (admin-read-write)
const credentials = await hubBlob().createCredentials()

// Limit the scope to a specific object & permission
const credentials = await hubBlob().createCredentials({
  permission: 'object-read-write',
  pathnames: ['only-this-file.png']
})

```

Read more about [creating presigned URLs to upload files to R2](https://hub.nuxt.com/docs/features/blob#create-presigned-urls-to-upload-files-to-r2).

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-11)

options

Object

The options to create the credentials.

Show properties

permission

string

The permission of the credentials, defaults to `'admin-read-write'`.

```
'admin-read-write' | 'admin-read-only' | 'object-read-write' | 'object-read-only'

```

ttl

number

The ttl of the credentials in seconds, defaults to `900`.

pathnames

string\[\]

The pathnames to scope the credentials to.

prefixes

string\[\]

The prefixes to scope the credentials to.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-9)

Returns an object with the following properties:

```
{
  accountId: string
  bucketName: string
  accessKeyId: string
  secretAccessKey: string
  sessionToken: string
}

```

## [`ensureBlob()`](https://hub.nuxt.com/docs/features/blob\#ensureblob)

`ensureBlob()` is a handy util to validate a `Blob` by checking its size and type:

```
// Will throw an error if the file is not an image or is larger than 1MB
ensureBlob(file, { maxSize: '1MB', types: ['image']})

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-12)

file

Blob required

The file to validate.

options

Object required

Note that at least `maxSize` or `types` should be provided.

Show properties

maxSize

BlobSize

The maximum size of the file, should be:

( `1` \| `2` \| `4` \| `8` \| `16` \| `32` \| `64` \| `128` \| `256` \| `512` \| `1024`) \+ ( `B` \| `KB` \| `MB` \| `GB`)

e.g. `'512KB'`, `'1MB'`, `'2GB'`, etc.

types

BlobType\[\]

Allowed types of the file, e.g. `['image/jpeg']`.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-10)

Returns nothing.

Throws an error if `file` doesn't meet the requirements.

## [Vue Composables](https://hub.nuxt.com/docs/features/blob\#vue-composables)

The following composables are meant to be used in the Vue side of your application (not the `server/` directory).

### [`useUpload()`](https://hub.nuxt.com/docs/features/blob\#useupload)

`useUpload` is to handle file uploads in your Nuxt application.

```
<script setup lang="ts">
const upload = useUpload('/api/blob', { method: 'PUT' })

async function onFileSelect({ target }: Event) {
  const uploadedFiles = await upload(target as HTMLInputElement)

  // file uploaded successfully
}
</script>

<template>
  <input
    accept="image/jpeg, image/png"
    type="file"
    name="file"
    multiple
    @change="onFileSelect"
  >
</template>

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-13)

apiBase

string required

The base URL of the upload API.

options

Object required

Optionally, you can pass Fetch options to the request. Read more about Fetch API [here](https://developer.mozilla.org/en-US/docs/Web/API/fetch#options).

Show properties

formKey

string

The key to add the file/files to the request form. Defaults to `'files'`.

multiple

boolean

Whether to allow multiple files to be uploaded. Defaults to `true`.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-11)

Return a `MultipartUpload` function that can be used to upload a file in parts.

```
const { completed, progress, abort } = upload(file)
const data = await completed

```

### [`useMultipartUpload()`](https://hub.nuxt.com/docs/features/blob\#usemultipartupload)

Application composable that creates a multipart upload helper.

utils/multipart-upload.ts

```
export const mpu = useMultipartUpload('/api/files/multipart')

```

#### [Params](https://hub.nuxt.com/docs/features/blob\#params-14)

baseURL

string

The base URL of the multipart upload API handled by [`handleMultipartUpload()`](https://hub.nuxt.com/docs/features/blob#handlemultipartupload).

options

The options for the multipart upload helper.

Show properties

partSize

number

The size of each part of the file to be uploaded. Defaults to `10MB`.

concurrent

number

The maximum number of concurrent uploads. Defaults to `1`.

maxRetry

number

The maximum number of retry attempts for the whole upload. Defaults to `3`.

prefix

string

The prefix to use for the blob pathname.

fetchOptions

Omit<FetchOptions, 'method' \| 'baseURL' \| 'body' \| 'parseResponse' \| 'responseType'>

Override the ofetch options.
The `query` and `headers` will be merged with the options provided by the uploader.

#### [Return](https://hub.nuxt.com/docs/features/blob\#return-12)

Return a `MultipartUpload` function that can be used to upload a file in parts.

```
const { completed, progress, abort } = mpu(file)
const data = await completed

```

## [Types](https://hub.nuxt.com/docs/features/blob\#types)

### [`BlobObject`](https://hub.nuxt.com/docs/features/blob\#blobobject)

```
interface BlobObject {
  pathname: string
  contentType: string | undefined
  size: number
  httpEtag: string
  uploadedAt: Date
  httpMetadata: Record<string, string>
  customMetadata: Record<string, string>
}

```

### [`BlobMultipartUpload`](https://hub.nuxt.com/docs/features/blob\#blobmultipartupload)

```
export interface BlobMultipartUpload {
  pathname: string
  uploadId: string
  uploadPart(
    partNumber: number,
    value: string | ReadableStream<any> | ArrayBuffer | ArrayBufferView | Blob
  ): Promise<BlobUploadedPart>
  abort(): Promise<void>
  complete(uploadedParts: BlobUploadedPart[]): Promise<BlobObject>
}

```

### [`BlobUploadedPart`](https://hub.nuxt.com/docs/features/blob\#blobuploadedpart)

```
export interface BlobUploadedPart {
  partNumber: number;
  etag: string;
}

```

### [`MultipartUploader`](https://hub.nuxt.com/docs/features/blob\#multipartuploader)

```
export type MultipartUploader = (file: File) => {
  completed: Promise<SerializeObject<BlobObject> | undefined>
  progress: Readonly<Ref<number>>
  abort: () => Promise<void>
}

```

### [`BlobListResult`](https://hub.nuxt.com/docs/features/blob\#bloblistresult)

```
interface BlobListResult {
  blobs: BlobObject[]
  hasMore: boolean
  cursor?: string
  folders?: string[]
}

```

## [Examples](https://hub.nuxt.com/docs/features/blob\#examples)

### [List blobs with pagination](https://hub.nuxt.com/docs/features/blob\#list-blobs-with-pagination)

server/api/blobs.get.tspages/blobs.vue

```
export default eventHandler(async (event) => {
  const { limit, cursor } = await getQuery(event)

  return hubBlob().list({
    limit: limit ? Number.parseInt(limit) : 10,
    cursor: cursor ? cursor : undefined
  })
})

```

```
<script setup lang="ts">
const blobs = ref<BlobObject[]>([])
const hasMore = ref(true)
const cursor = ref()

async function loadMore() {
  if (!hasMore.value) {
    return
  }
  const res = await $fetch('/api/blobs', {
    query: {
      limit: 3,
      cursor: cursor.value
    }
  })
  blobs.value.push(...res.blobs)
  hasMore.value = res.hasMore
  cursor.value = res.cursor
}
</script>
<template>
  <div>
    <div v-for="blob in blobs" :key="blob.pathname">
      {{ blob.pathname }}
    </div>
    <button @click="loadMore">
      Load more
    </button>
  </div>
</template>

```

### [Create presigned URLs to upload files to R2](https://hub.nuxt.com/docs/features/blob\#create-presigned-urls-to-upload-files-to-r2)

Presigned URLs can be used to upload files to R2 from client-side without using an API key.

![NuxtHub presigned URLs to upload files to R2](https://hub.nuxt.com/_ipx/s_915x515/images/docs/blob-presigned-urls.png)

As we use [aws4fetch](https://github.com/mhart/aws4fetch) to sign the request and [zod](https://github.com/colinhacks/zod) to validate the request, we need to install the packages:

Terminal

```
npx nypm i aws4fetch zod

```

First, we need to create an API route that will return a presigned URL to the client.

server/api/blob/sign/\[...pathname\].get.ts

```
import { z } from 'zod'
import { AwsClient } from 'aws4fetch'

export default eventHandler(async (event) => {
  const { pathname } = await getValidatedRouterParams(event, z.object({
    pathname: z.string().min(1)
  }).parse)
  // Create credentials with the right permission & scope
  const blob = hubBlob()
  const { accountId, bucketName, ...credentials } = await blob.createCredentials({
    permission: 'object-read-write',
    pathnames: [pathname]
  })
  // Create the presigned URL
  const client = new AwsClient(credentials)
  const endpoint = new URL(
    pathname,
    `https://${bucketName}.${accountId}.r2.cloudflarestorage.com`
  )
  const { url } = await client.sign(endpoint, {
    method: 'PUT',
    aws: { signQuery: true }
  })
  // Return the presigned URL to the client
  return { url }
})

```

Make sure to authenticate the request on the server side to avoid letting anyone upload files to your R2 bucket. Checkout [nuxt-auth-utils](https://github.com/atinux/nuxt-auth-utils) as one of the possible solutions.

Next, we need to create the Vue page to upload a file to our R2 bucket using the presigned URL:

pages/upload.vue

```
<script setup lang="ts">
async function uploadWithPresignedUrl(file: File) {
  const { url } = await $fetch(`/api/blob/sign/${file.name}`)
  await $fetch(url, {
    method: 'PUT',
    body: file
  })
}
</script>

<template>
  <input type="file" @change="uploadWithPresignedUrl($event.target.files[0])">
</template>

```

At this stage, you will get a CORS error because we did not setup the CORS on our R2 bucket.

To setup the CORS on our R2 bucket:

- Open the project on NuxtHub Admin with `npx nuxthub manage`
- Go to the **Blob tab** (make sure to be on the right environment: production or preview)
- Click on the Cloudflare icon on the top right corner
- Once on Cloudflare, Go to the `Settings` tab of your R2 bucket
- Scroll to **CORS policy**
- Click on `Edit CORS policy`
- Update the allowed origins with your origins by following this example:

```
[\
  {\
    "AllowedOrigins": [\
      "http://localhost:3000",\
      "https://my-app.nuxt.dev"\
    ],\
    "AllowedMethods": [\
      "GET",\
      "PUT"\
    ],\
    "AllowedHeaders": [\
      "*"\
    ]\
  }\
]

```

- Save the changes

That's it! You can now upload files to R2 using the presigned URLs.

Read more about presigned URLs on Cloudflare's [official documentation](https://developers.cloudflare.com/r2/api/s3/presigned-urls/).

## [Pricing](https://hub.nuxt.com/docs/features/blob\#pricing)

Blob

|  | Free Tier | Pricing |
| --- | --- | --- |
| List + Write | 1 million / month | 1 million / month + $4.50/million |
| Read | 10 million / month | 10 million / month + $0.36/million |
| Storage | 10 GB / month | 10 GB / month + $0.015/GB-month |
| Egress | Unlimited | Unlimited |

[Cloudflare R2 pricing](https://developers.cloudflare.com/r2/pricing/)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/blob.md)

[AutoRAG\\
\\
Create fully-managed RAG pipelines to power your AI applications with accurate and up-to-date information.](https://hub.nuxt.com/docs/features/autorag) [Browser\\
\\
Control and interact with a headless browser instance in your Nuxt application using Puppeteer.](https://hub.nuxt.com/docs/features/browser)

## Browser Rendering
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Browser Rendering

Control and interact with a headless browser instance in your Nuxt application using Puppeteer.

## [Getting Started](https://hub.nuxt.com/docs/features/browser\#getting-started)

Enable browser rendering in your Nuxt project by enabling the `hub.browser` option:

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    browser: true
  },
})

```

Lastly, install the required dependencies by running the following command:

Terminal

```
npx nypm i @cloudflare/puppeteer puppeteer

```

[nypm](https://github.com/unjs/nypm) will automatically detect the package manager you are using and install the dependencies.

## [Usage](https://hub.nuxt.com/docs/features/browser\#usage)

In your server API routes, you can use the `hubBrowser` function to get a [Puppeteer browser instance](https://github.com/puppeteer/puppeteer):

```
const { page, browser } = await hubBrowser()

```

In production, the instance will be from [`@cloudflare/puppeteer`](https://developers.cloudflare.com/browser-rendering/platform/puppeteer/) which is a fork of Puppeteer with version specialized for working within Cloudflare workers.

NuxtHub will automatically close the `page` instance when the response is sent as well as closing or disconnecting the `browser` instance when needed.

Here are some use cases for using a headless browser like Puppeteer in your Nuxt application:

- Take screenshots of pages
- Convert a page to a PDF
- Test web applications
- Gather page load performance metrics
- Crawl web pages for information retrieval (extract metadata)

## [Limits](https://hub.nuxt.com/docs/features/browser\#limits)

The Cloudflare limits are:

- 3 concurrent browsers per Cloudflare account
- 3 new browser instancess per minute
- a browser instance gets killed if no activity is detected for 60 seconds (idle timeout)

On a Workers Paid plan, you can create up to 10 concurrent browser per account and 10 new browser instances per minute.

To improve the performance in production, NuxtHub will reuse browser sessions. This means that the browser will stay open after each request (for 60 seconds), a new request will reuse the same browser session if available or open a new one.

You can extend the idle timeout by giving the `keepAlive` option when creating the browser instance:

```
// keep the browser instance alive for 120 seconds
const { page, browser } = await hubBrowser({ keepAlive: 120 })

```

The maximum idle timeout is 600 seconds (10 minutes).

Once NuxtHub supports [Durable Objects](https://github.com/nuxt-hub/core/issues/50), you will be able to create a single browser instance that will stay open for a long time, and you will be able to reuse it across requests.

## [Screenshot Capture](https://hub.nuxt.com/docs/features/browser\#screenshot-capture)

Taking a screenshot of a website is a common use case for a headless browser. Let's create an API route to capture a screenshot of a website:

server/api/screenshot.ts

```
import { z } from 'zod'

export default eventHandler(async (event) => {
  // Get the URL and theme from the query parameters
  const { url, theme } = await getValidatedQuery(event, z.object({
    url: z.string().url(),
    theme: z.enum(['light', 'dark']).optional().default('light')
  }).parse)

  // Get a browser session and open a new page
  const { page } = await hubBrowser()

  // Set the viewport to full HD & set the color-scheme
  await page.setViewport({ width: 1920, height: 1080 })
  await page.emulateMediaFeatures([{\
    name: 'prefers-color-scheme',\
    value: theme\
  }])

  // Go to the URL and wait for the page to load
  await page.goto(url, { waitUntil: 'domcontentloaded' })

  // Return the screenshot as response
  setHeader(event, 'content-type', 'image/jpeg')
  return page.screenshot()
})

```

On the application side, we can create a simple form to call our API endpoint:

pages/capture.vue

```
<script setup>
const url = ref('https://hub.nuxt.com')
const image = ref('')
const theme = ref('light')
const loading = ref(false)

async function capture {
  if (loading.value) return
  loading.value = true
  const blob = await $fetch('/api/browser/capture', {
    query: {
      url: url.value,
      theme: theme.value
    }
  })
  image.value = URL.createObjectURL(blob)
  loading.value = false
}
</script>

<template>
  <form @submit.prevent="capture">
    <input v-model="url" type="url" />
    <select v-model="theme">
      <option value="light">Light</option>
      <option value="dark">Dark</option>
    </select>
    <button type="submit" :disabled="loading">
      {{ loading ? 'Capturing...' : 'Capture' }}
    </button>
    <img v-if="image && !loading" :src="image" style="aspect-ratio: 16/9;" />
  </form>
</template>

```

That's it! You can now capture screenshots of websites using Puppeteer in your Nuxt application.

### [Storing the screenshots](https://hub.nuxt.com/docs/features/browser\#storing-the-screenshots)

You can store the screenshots in the Blob storage:

```
const screenshot = await page.screenshot()

// Upload the screenshot to the Blob storage
const filename = `screenshots/${url.value.replace(/[^a-zA-Z0-9]/g, '-')}.jpg`
const blob = await hubBlob().put(filename, screenshot)

```

Learn more about the Blob storage.

## [Metadata Extraction](https://hub.nuxt.com/docs/features/browser\#metadata-extraction)

Another common use case is to extract metadata from a website.

server/api/metadata.ts

```
import { z } from 'zod'

export default eventHandler(async (event) => {
  // Get the URL from the query parameters
  const { url } = await getValidatedQuery(event, z.object({
    url: z.string().url()
  }).parse)

  // Get a browser instance and navigate to the url
  const { page } = await hubBrowser()
  await page.goto(url, { waitUntil: 'networkidle0' })

  // Extract metadata from the page
  const metadata = await page.evaluate(() => {
    const getMetaContent = (name) => {
      const element = document.querySelector(`meta[name="${name}"], meta[property="${name}"]`)
      return element ? element.getAttribute('content') : null
    }

    return {
      title: document.title,
      description: getMetaContent('description') || getMetaContent('og:description'),
      favicon: document.querySelector('link[rel="shortcut icon"]')?.href
      || document.querySelector('link[rel="icon"]')?.href,
      ogImage: getMetaContent('og:image'),
      origin: document.location.origin
    }
  })

  return metadata
})

```

Visiting `/api/metadata?url=https://cloudflare.com` will return the metadata of the website:

```
{
  "title": "Connect, Protect and Build Everywhere | Cloudflare",
  "description": "Make employees, applications and networks faster and more secure everywhere, while reducing complexity and cost.",
  "favicon": "https://www.cloudflare.com/favicon.ico",
  "ogImage": "https://cf-assets.www.cloudflare.com/slt3lc6tev37/2FNnxFZOBEha1W2MhF44EN/e9438de558c983ccce8129ddc20e1b8b/CF_MetaImage_1200x628.png",
  "origin": "https://www.cloudflare.com"
}

```

To store the metadata of a website, you can use the [Key Value Storage](https://hub.nuxt.com/docs/features/kv).

Or directly leverage [Caching](https://hub.nuxt.com/docs/features/cache) on this API route:

server/api/metadata.ts

```
export default cachedEventHandler(async (event) => {
  // ...
}, {
  maxAge: 60 * 60 * 24 * 7, // 1 week
  swr: true,
  // Use the URL as key to invalidate the cache when the URL changes
  // We use btoa to transform the URL to a base64 string
  getKey: (event) => btoa(getQuery(event).url),
})

```

## [PDF Generation](https://hub.nuxt.com/docs/features/browser\#pdf-generation)

You can also generate PDF using `hubBrowser()`, this is useful if you want to generate an invoice or a receipt for example.

Let's create a `/_invoice` page with Vue that we will use as template to generate a PDF:

pages/\_invoice.vue

```
<script setup>
definePageMeta({
  layout: 'blank'
})

// TODO: Fetch data from API instead of hardcoding
const currentDate = ref(new Date().toLocaleDateString())
const items = ref([\
  { name: 'Item 1', quantity: 2, price: 10.00 },\
  { name: 'Item 2', quantity: 1, price: 15.00 },\
  { name: 'Item 3', quantity: 3, price: 7.50 }\
])
const total = computed(() => {
  return items.value.reduce((sum, item) => sum + item.quantity * item.price, 0)
})
</script>

<template>
  <div style="font-family: Arial, sans-serif; padding: 20px;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
      <div>
        <p><strong>Invoice To:</strong></p>
        <p>John Doe</p>
        <p>123 Main St</p>
        <p>Anytown, USA 12345</p>
      </div>
      <div>
        <p><strong>Invoice Number:</strong> INV-001</p>
        <p><strong>Date:</strong> {{ currentDate }}</p>
      </div>
    </div>
    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="(item, index) in items" :key="index">
          <td>{{ item.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>${{ item.price.toFixed(2) }}</td>
          <td>${{ (item.quantity * item.price).toFixed(2) }}</td>
        </tr>
      </tbody>
    </table>
    <div style="text-align: right; margin-top: 20px;">
      <p><strong>Total: ${{ total.toFixed(2) }}</strong></p>
    </div>
  </div>
</template>

<style scoped>
table { width: 100%; border-collapse: collapse; }
th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
th { background-color: #f2f2f2; }
</style>

```

To avoid having any styling issues, we recommend to keep your `app.vue` as minimal as possible:

app.vue

```
<template>
  <NuxtLayout>
    <NuxtPage />
  </NuxtLayout>
</template>

```

And move most of your head management, style & HTML structure in [`layouts/default.vue`](https://nuxt.com/docs/guide/directory-structure/layouts#default-layout).

Lastly, we need to create a `layouts/blank.vue` to avoid having any layout on our `_invoice` page:

layouts/blank.vue

```
<template>
  <slot />
</template>

```

This will ensure that no header, footer or any other layout elements are rendered.

Now, let's create our server route to generate the PDF:

server/routes/invoice.pdf.ts

```
export default eventHandler(async (event) => {
  const { page } = await hubBrowser()
  await page.goto(`${getRequestURL(event).origin}/_invoice`)

  setHeader(event, 'Content-Type', 'application/pdf')
  return page.pdf({ format: 'A4' })
})

```

You can now display links to download or open the PDF in your pages:

pages/index.vue

```
<template>
  <a href="/invoice.pdf" download>Download PDF</a>
  <a href="/invoice.pdf">Open PDF</a>
</template>

```

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/browser.md)

[Blob\\
\\
Upload, store and serve images, videos, music, documents and other unstructured data in your Nuxt application.](https://hub.nuxt.com/docs/features/blob) [Cache\\
\\
Learn how to cache Nuxt pages, API routes and functions in with NuxtHub cache storage.](https://hub.nuxt.com/docs/features/cache)

## NuxtHub Overview
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# What is NuxtHub?

[3min video](https://www.youtube.com/watch?v=hlmPqDkc3_s)

NuxtHub helps you build and deploy full-stack Nuxt applications globally.

On top of deploying your Nuxt application, NuxtHub aims to provide a complete backend experience on top of the framework, allowing developers to build full-stack applications on the Edge, read more about [Nuxt on the Edge](https://nuxt.com/blog/nuxt-on-the-edge).

It leverages Cloudflare features such as Pages, Workers Analytics, AI, KV, D1, R2 and more.

**NuxtHub is what Vercel / Netlify is for AWS, but for Cloudflare.**

It also deploys to your Cloudflare account so you stay in control of your data and billing as we don't mark-up Cloudflare prices.

## [Features](https://hub.nuxt.com/docs/getting-started\#features)

NuxtHub provides optional features to help you build full-stack applications:

[AI Models](https://hub.nuxt.com/docs/features/ai)

AI Models

Run machine learning models, such as LLMs.

[Blob](https://hub.nuxt.com/docs/features/blob)

Blob

Store static assets, such as images, videos and more

[Cache](https://hub.nuxt.com/docs/features/cache)

Cache

Caching system for your Nuxt pages, API routes or server functions

[SQL database](https://hub.nuxt.com/docs/features/database)

SQL database

Store your application's data in a secure and scalable serverless SQL database.

[Key-Value](https://hub.nuxt.com/docs/features/kv)

Key-Value

Key-Value to store JSON data accessible globally with low-latency

[Remote Access](https://hub.nuxt.com/docs/getting-started/remote-storage)

Remote Access

Connect to your project's resources from your local environment.

## [Dashboard](https://hub.nuxt.com/docs/getting-started\#dashboard)

ProjectsDeploymentsDatabaseKVBlobLogsOpen APICache

![NuxtHub Admin](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin.png)

![NuxtHub Admin Deployments](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-project.png)

![NuxtHub Admin Database](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-database.png)

![NuxtHub Admin KV](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-kv.png)

![NuxtHub Admin Blob](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-blob.png)

![NuxtHub Admin Logs](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-server-logs.png)

![NuxtHub Admin Open API](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-open-api.png)

![NuxtHub Admin Cache](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-cache.png)

The [NuxtHub admin](https://admin.hub.nuxt.com/) is a web based dashboard to manage your NuxtHub apps. It helps you deploy your NuxtHub apps with a single command on your Cloudflare account while provisioning all the necessary resources for you.

It abstracts the complexity of managing full-stack Nuxt applications on Cloudflare:

- Link your Cloudflare account and stay in control, we never mark-up Cloudflare prices
- [Deploy your application](https://hub.nuxt.com/docs/getting-started/deploy) with `npx nuxthub deploy` command or with Cloudflare Pages CI
- Relax while it provisions all the necessary resources (ai, blob, cache, database, kv)
- Manage your app's resources with an admin panel
- Visualize application, database, and cache metrics
- Give access to team members to manage the application without sharing your Cloudflare account
- Monitor your application with logs and analytics

Get started with NuxtHub Admin.

## [Nuxt DevTools](https://hub.nuxt.com/docs/getting-started\#nuxt-devtools)

NuxtHub also integrates with the [Nuxt DevTools](https://devtools.nuxt.com/) to provide a complete development experience.

DatabaseKVBlob

![Nuxt DevTools Database](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxt-devtools-database.png)

![Nuxt DevTools KV](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxt-devtools-kv.png)

![Nuxt DevTools Blob](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxt-devtools-blob.png)

## [Upcoming](https://hub.nuxt.com/docs/getting-started\#upcoming)

NuxtHub is built with a modular approach:

- [`@nuxthub/core`](https://github.com/nuxt-hub/core): Main package to provide storage features
- `@nuxthub/auth`: Add authentication for user management (soon)
- `@nuxthub/email`: Send transactional emails to your users (soon)
- `@nuxthub/forms`: Collect forms from users (soon)
- `@nuxthub/analytics`: Understand your traffic and track events within your application and API (soon)
- `@nuxthub/...`: You name it!

We are currently in the early stages of development (beta) and are looking for feedback from the community. If you are interested in contributing, please join us on [nuxt-hub/core](https://github.com/nuxt-hub/core).

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/1.getting-started/1.index.md)

[Installation\\
\\
Learn how to create a NuxtHub project or add it to your current Nuxt project.](https://hub.nuxt.com/docs/getting-started/installation)

## Nuxt Cache Features
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Cache Pages, API & Functions

Learn how to cache Nuxt pages, API routes and functions in with NuxtHub cache storage.

NuxtHub Cache is powered by [Nitro's cache storage](https://nitro.build/guide/cache#customize-cache-storage) and uses [Cloudflare Workers KV](https://developers.cloudflare.com/kv) as the cache storage. It allows you to cache API routes, server functions, and pages in your application.

## [Getting Started](https://hub.nuxt.com/docs/features/cache\#getting-started)

Enable the cache storage in your NuxtHub project by adding the `cache` property to the `hub` object in your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    cache: true
  }
})

```

This option will configure [Nitro's cache storage](https://nitro.build/guide/cache#customize-cache-storage) to use [Cloudflare Workers KV](https://developers.cloudflare.com/kv) as well as creating a new storage namespace for your project when you deploy it.

Once your Nuxt project is deployed, you can manage your cache entries in the `Cache` section of your project in the [NuxtHub admin](https://admin.hub.nuxt.com/).

![NuxtHub Admin Cache](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-cache.png)

In development, checkout the Hub Cache section in the Nuxt Devtools.

## [API Routes Caching](https://hub.nuxt.com/docs/features/cache\#api-routes-caching)

To cache Nuxt API and server routes, use the `cachedEventHandler` function. This function will cache the response of the server route into the cache storage.

server/api/cached-route.ts

```
import type { H3Event } from 'h3'

export default cachedEventHandler((event) => {
  return {
    success: true,
    date: new Date().toISOString()
  }
}, {
  maxAge: 60 * 60, // 1 hour
  getKey: (event: H3Event) => event.path
})

```

The above example will cache the response of the `/api/cached-route` route for 1 hour. The `getKey` function is used to generate the key for the cache entry.

Read more about [Nitro Cache options](https://nitro.build/guide/cache#options).

## [Server Functions Caching](https://hub.nuxt.com/docs/features/cache\#server-functions-caching)

Using the `cachedFunction` function, You can cache the response of a server function based on the arguments passed to the function.

This is useful to cache the result of a function used in multiple API routes or within authenticated routes.

server/utils/cached-function.ts

```
import type { H3Event } from 'h3'

export const getRepoStarCached = defineCachedFunction(async (event: H3Event, repo: string) => {
  const data: any = await $fetch(`https://api.github.com/repos/${repo}`)

  return data.stargazers_count
}, {
  maxAge: 60 * 60, // 1 hour
  name: 'ghStars',
  getKey: (event: H3Event, repo: string) => repo
})

```

The above example will cache the result of the `getRepoStarCached` function for 1 hour.

It is important to note that the `event` argument should always be the first argument of the cached function. Nitro leverages `event.waitUntil` to keep the instance alive while the cache is being updated while the response is sent to the client.

[Read more about this in the Nitro docs](https://nitro.build/guide/cache#edge-workers).

## [Routes Caching](https://hub.nuxt.com/docs/features/cache\#routes-caching)

You can enable route caching in your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  routeRules: {
    '/blog/**': {
      cache: {
        maxAge: 60 * 60,
        // other options like name, group, swr...
      }
    }
  }
})

```

Read more about [Nuxt's route rules](https://nuxt.com/docs/guide/concepts/rendering#hybrid-rendering).

## [Cache Invalidation](https://hub.nuxt.com/docs/features/cache\#cache-invalidation)

When using the `defineCachedFunction` or `defineCachedEventHandler` functions, the cache key is generated using the following pattern:

```
`${options.group}:${options.name}:${options.getKey(...args)}.json`

```

The defaults are:

- `group`: `'nitro'`
- `name`: `'handlers'` for API routes, `'functions'` for server functions, or `'routes'` for route handlers

For example, the following function:

```
const getAccessToken = defineCachedFunction(() => {
  return String(Date.now())
}, {
  maxAge: 60,
  name: 'getAccessToken',
  getKey: () => 'default'
})

```

Will generate the following cache key:

```
nitro:functions:getAccessToken:default.json

```

You can invalidate the cached function entry from your storage using cache key.

```
await useStorage('cache').removeItem('nitro:functions:getAccessToken:default.json')

```

You can use the `group` and `name` options to invalidate multiple cache entries based on their prefixes.

```
// Gets all keys that start with nitro:handlers
await useStorage('cache').clear('nitro:handlers')

```

Read more about Nitro Cache.

### [Normalizing Cache Keys](https://hub.nuxt.com/docs/features/cache\#normalizing-cache-keys)

**Cache keys are automatically normalized** using an internal utility that removes non-alphanumeric characters such as `/` and `-`. This behavior helps ensure compatibility across various storage backends (e.g., `file systems`, `key-value` stores) that might have restrictions on characters in `keys`, and also prevents potential path traversal vulnerabilities.

For example:

```
getKey: () => '/api/products/sale-items'

```

Would generate a key like:

```
api/productssaleitems.json

```

This behavior may result in keys that look different from the original route or identifier.

To manually reproduce the same normalized key pattern used by Nitro (e.g., when invalidating cache entries), you can use the `escapeKey` utility function provided below:

```
function escapeKey(key: string | string[]) {
  return String(key).replace(/\W/g, "");
}

```

It's recommended to use `escapeKey()` when invalidating manually using route paths or identifiers to ensure consistency with Nitro's internal key generation.

For example, if your `getKey` function is:

```
getKey: (id: string) => `product/${id}/details`

```

And you want to invalidate `product/123/details`, you would do:

```
const normalizedKey = escapeKey('product/123/details')
await useStorage('cache').removeItem(`nitro:functions:getProductDetails:${normalizedKey}.json`)

```

## [Cache Expiration](https://hub.nuxt.com/docs/features/cache\#cache-expiration)

As NuxtHub leverages Cloudflare Workers KV to store your cache entries, we leverage the [`expiration` property](https://developers.cloudflare.com/kv/api/write-key-value-pairs/#expiring-keys) of the KV binding to handle the cache expiration.

By default, `stale-while-revalidate` behavior is enabled. If an expired cache entry is requested, the stale value will be served while the cache is asynchronously refreshed. This also means that all cache entries will remain in your KV namespace until they are manually invalidated/deleted.

To disable this behavior, set `swr` to `false` when defining a cache rule. This will delete the cache entry once `maxAge` is reached.

nuxt.config.ts

```
export default defineNuxtConfig({
  nitro: {
    routeRules: {
      '/blog/**': {
        cache: {
          maxAge: 60 * 60,
          swr: false
          // other options like name and group...
        }
      }
  }
})

```

If you set an expiration ( `maxAge`) lower than `60` seconds, NuxtHub will set the KV entry expiration to `60` seconds in the future (Cloudflare KV limitation) so it can be removed automatically.

## [Pricing](https://hub.nuxt.com/docs/features/cache\#pricing)

KV

|  | Free | Workers Paid ($5/month) |
| --- | --- | --- |
| Read | 100,000 / day | 10 million / month + $0.50/million |
| List | 1,000 / day | 1 million / month + $5.00/million |
| Write | 1,000 / day | 1 million / month + $5.00/million |
| Delete | 1,000 / day | 1 million / month + $5.00/million |
| Storage | 1 GB | 1 GB + $0.50/GB-month |

[Cloudflare KV pricing](https://developers.cloudflare.com/kv/platform/pricing/)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/cache.md)

[Browser\\
\\
Control and interact with a headless browser instance in your Nuxt application using Puppeteer.](https://hub.nuxt.com/docs/features/browser) [Database\\
\\
Access a SQL database in your Nuxt application to store and retrieve relational data.](https://hub.nuxt.com/docs/features/database)

## hubVectorize Feature
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

October 4, 2024

# Introducing hubVectorize()

Vectorize is a globally distributed vector database that enables you to build full-stack, AI-powered applications with Nuxt.

[RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://x.com/RihanArfan)

This feature is available on both [free and pro plans](https://hub.nuxt.com/pricing) and in [`@nuxthub/core >= v0.7.24`](https://github.com/nuxt-hub/core/releases/tag/v0.7.24).

We are excited to introduce [`hubVectorize()`](https://hub.nuxt.com/docs/features/vectorize), which gives you access to a globally distributed vector database from Nuxt. Paired with [`hubAI()`](https://hub.nuxt.com/docs/features/ai), it makes Nuxt a perfect framework for easily building full-stack AI-powered applications.

![NuxtHub Vectorize command](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/nuxthub-vectorize.png)

## [What is a vector database?](https://hub.nuxt.com/changelog/hub-vectorize\#what-is-a-vector-database)

Vector databases allows you to querying embeddings, which are representations of values or objects like text, images, audio that are designed to be consumed by machine learning models and semantic search algorithms.

Some key use cases of vector databases include:

- Semantic search, used to return results similar to the input of the query.
- Classification, used to return the grouping (or groupings) closest to the input query.
- Recommendation engines, used to return content similar to the input based on different criteria (for example previous product sales, or user history).

Vector databases are commonly used for [Retrieval-Augmented Generation (RAG)](https://developers.cloudflare.com/reference-architecture/diagrams/ai/ai-rag/), which is a technique that enhances language models by retrieving relevant information from an external knowledge base before generating a response.

Learn more about vector databases on [Cloudflare's documentation](https://developers.cloudflare.com/vectorize/reference/what-is-a-vector-database/).

## [How to use hubVectorize()](https://hub.nuxt.com/changelog/hub-vectorize\#how-to-use-hubvectorize)

1. Update `@nuxthub/core` to the latest version ( `v0.7.24` or later)
2. Configure a Vectorize index in `hub.vectorize` in your `nuxt.config.ts`

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    vectorize: {
      tutorial: {
        dimensions: 768,
        metric: "cosine"
      }
    }
  }
})

```

3. Run `npx nuxthub link` to link a NuxtHub project or create a new one
4. Deploy the project to NuxtHub with `npx nuxthub deploy`
5. Start Nuxt and connect to [remote storage](https://hub.nuxt.com/docs/getting-started/remote-storage) by running [`npx nuxt dev --remote`](https://hub.nuxt.com/docs/getting-started/remote-storage)
6. You can now use [`hubVectorize('<index>')`](https://hub.nuxt.com/docs/features/vectorize) in your server routes

server/api/vectorize-search.ts

```
export default defineEventHandler(async (event) => {
  const { query, limit } = getQuery(event)
  const embeddings = await hubAI().run('@cf/baai/bge-base-en-v1.5', {
    text: query
  })
  const queryVector = embeddings.data[0]

  const index = hubVectorize('tutorial')
  return await vectorize.query(vectors, {
    topK: limit,
  })
})

```

Read the [full documentation](https://hub.nuxt.com/docs/features/vectorize) to learn more about `hubVectorize()`.

**If you already have a NuxtHub account**, make sure to add the `Vectorize` permission on your Cloudflare API token.

- Open [Cloudflare User API Tokens](https://dash.cloudflare.com/profile/api-tokens)
- Find the NuxtHub token(s)
- Add the `Account > Vectorize > Edit` permission
- Save the changes

Another solution is to link again your Cloudflare account from your NuxtHub team settings by clicking on `Link a new account` \> `Create a token with required permissions`.

This feature has been implemented in [nuxt-hub/core#177](https://github.com/nuxt-hub/core/pull/177).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Blob Presigned URLs\\
\\
It is now possible to upload files to your R2 bucket using presigned URLs with zero configuration.](https://hub.nuxt.com/changelog/blob-presigned-urls) [\`nuxthub preview\` command\\
\\
We added a new command to preview your production build locally with \`wrangler\`.](https://hub.nuxt.com/changelog/nuxthub-preview)

## Drizzle ORM Setup
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Drizzle ORM

Learn how to setup Drizzle ORM with NuxtHub.

Learn more about **Drizzle ORM**.

## [Setup](https://hub.nuxt.com/docs/recipes/drizzle\#setup)

To enhance your Developer Experience with the database, we can create a `useDrizzle()` server composable with few steps.

### [Install Drizzle](https://hub.nuxt.com/docs/recipes/drizzle\#install-drizzle)

1. Install the `drizzle-orm` package to your project:

pnpmyarnnpmbun

```
pnpm add drizzle-orm

```

```
yarn add drizzle-orm

```

```
npm install drizzle-orm

```

```
bun add drizzle-orm

```

2. Install `drizzle-kit` development dependency to your project:

pnpmyarnnpmbun

```
pnpm add -D drizzle-kit

```

```
yarn add --dev drizzle-kit

```

```
npm install --save-dev drizzle-kit

```

```
bun add --dev drizzle-kit

```

### [`drizzle.config.ts`](https://hub.nuxt.com/docs/recipes/drizzle\#drizzleconfigts)

Add a `drizzle.config.ts` file to your project:

drizzle.config.ts

```
import { defineConfig } from 'drizzle-kit'

export default defineConfig({
  dialect: 'sqlite',
  schema: './server/database/schema.ts',
  out: './server/database/migrations'
})

```

### [Database Schema](https://hub.nuxt.com/docs/recipes/drizzle\#database-schema)

server/database/schema.ts

```
import { sqliteTable, text, integer } from 'drizzle-orm/sqlite-core'

export const users = sqliteTable('users', {
  id: integer('id').primaryKey({ autoIncrement: true }),
  name: text('name').notNull(),
  email: text('email').notNull().unique(),
  password: text('password').notNull(),
  avatar: text('avatar').notNull(),
  createdAt: integer('created_at', { mode: 'timestamp' }).notNull(),
})

```

### [`npm run db:generate`](https://hub.nuxt.com/docs/recipes/drizzle\#npm-run-dbgenerate)

Let's add a `db:generate` script to the `package.json`:

package.json

```
{
  "scripts": {
    "db:generate": "drizzle-kit generate"
  }
}

```

When running the `npm run db:generate` command, `drizzle-kit` will generate the migrations based on `server/database/schema.ts` and save them in the `server/database/migrations` directory.

### [Migrations](https://hub.nuxt.com/docs/recipes/drizzle\#migrations)

Migrations created with `npm run db:generate` are automatically applied during deployment, preview and when starting the development server.

Learn more about migrations.

### [`useDrizzle()`](https://hub.nuxt.com/docs/recipes/drizzle\#usedrizzle)

Lastly, we can create a `useDrizzle()` server composable to interact with the database:

server/utils/drizzle.ts

```
import { drizzle } from 'drizzle-orm/d1'
export { sql, eq, and, or } from 'drizzle-orm'

import * as schema from '../database/schema'

export const tables = schema

export function useDrizzle() {
  return drizzle(hubDatabase(), { schema })
}

export type User = typeof schema.users.$inferSelect

```

We are exporting the `tables` object and the `useDrizzle` function to be used in our API handlers without having to import them (Nuxt does it for us as long as it's exported from a `server/utils/` file).

This allows you to conveniently reference your tables and interact directly with the [Drizzle API](https://orm.drizzle.team/docs/overview).

Note that we are also exporting the `User` type, which is inferred from the `users` table. This is useful for type-checking the results of your queries.

We also export the `sql`, `eq`, `and`, and `or` functions from `drizzle-orm` to be used in our queries.

### [Seed the database (Optional)](https://hub.nuxt.com/docs/recipes/drizzle\#seed-the-database-optional)

You can add a server task to populate your database with initial data. This uses [Nitro Tasks](https://nitro.build/guide/tasks), which is currently an experimental feature.

1. Update your nuxt.config.js:

nuxt.config.ts

```
export default defineNuxtConfig({
  nitro: {
    experimental: {
      tasks: true
    }
  }
})

```

2. Create a new file containing the task:

server/tasks/seed.ts

```
export default defineTask({
  meta: {
    name: 'db:seed',
    description: 'Run database seed task'
  },
  async run() {
    console.log('Running DB seed task...')
    const users = [\
      {\
        name: 'John Doe',\
        email: 'john@example.com',\
        password: 'password123',\
        avatar: 'https://example.com/avatar/john.png',\
        createdAt: new Date()\
      },\
      {\
        name: 'Jane Doe',\
        email: 'jane@example.com',\
        password: 'password123',\
        avatar: 'https://example.com/avatar/jane.png',\
        createdAt: new Date()\
      }\
    ]
    await useDrizzle().insert(tables.users).values(users)
    return { result: 'success' }
  }
})

```

To run the seed task, start your dev server and open the Nuxt DevTools. Go to _Tasks_ and you will see the `db:seed` task ready to run. This will add the seed data to your database and give you the first users to work with.

## [Usage](https://hub.nuxt.com/docs/recipes/drizzle\#usage)

### [Select](https://hub.nuxt.com/docs/recipes/drizzle\#select)

server/api/todos/index.get.ts

```
export default eventHandler(async () => {
  const todos = await useDrizzle().select().from(tables.todos).all()

  return todos
})

```

### [Insert](https://hub.nuxt.com/docs/recipes/drizzle\#insert)

server/api/todos/index.post.ts

```
export default eventHandler(async (event) => {
  const { title } = await readBody(event)

  const todo = await useDrizzle().insert(tables.todos).values({
    title,
    createdAt: new Date()
  }).returning().get()

  return todo
})

```

### [Update](https://hub.nuxt.com/docs/recipes/drizzle\#update)

server/api/todos/\[id\].patch.ts

```
export default eventHandler(async (event) => {
  const { id } = getRouterParams(event)
  const { completed } = await readBody(event)

  const todo = await useDrizzle().update(tables.todos).set({
    completed
  }).where(eq(tables.todos.id, Number(id))).returning().get()

  return todo
})

```

### [Delete](https://hub.nuxt.com/docs/recipes/drizzle\#delete)

server/api/todos/\[id\].delete.ts

```
export default eventHandler(async (event) => {
  const { id } = getRouterParams(event)

  const deletedTodo = await useDrizzle().delete(tables.todos).where(and(
    eq(tables.todos.id, Number(id))
  )).returning().get()

  if (!deletedTodo) {
    throw createError({
      statusCode: 404,
      message: 'Todo not found'
    })
  }
  return deletedTodo
})

```

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/3.recipes/2.drizzle.md)

[Hooks\\
\\
Use lifecycle hooks to stay synced with NuxtHub.](https://hub.nuxt.com/docs/recipes/hooks) [Pre-rendering\\
\\
Pre-render pages at build time for maximum performance and avoid CPU usage on the server.](https://hub.nuxt.com/docs/recipes/pre-rendering)

## Nuxt SQL Database
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# SQL Database

Access a SQL database in your Nuxt application to store and retrieve relational data.

NuxtHub Database uses [Cloudflare D1](https://developers.cloudflare.com/d1/), a managed, serverless database built on SQLite to store and retrieve relational data.

## [Getting Started](https://hub.nuxt.com/docs/features/database\#getting-started)

Enable the database in your NuxtHub project by adding the `database` property to the `hub` object in your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    database: true
  }
})

```

This option will use Cloudflare platform proxy in development and automatically create a [Cloudflare D1](https://developers.cloudflare.com/d1) database for your project when you [deploy it](https://hub.nuxt.com/docs/getting-started/deploy).

Checkout our [Drizzle ORM recipe](https://hub.nuxt.com/docs/recipes/drizzle) to get started with the database by providing a schema and migrations.

During local development, you can view and edit your database in the Nuxt DevTools. Once your project is deployed, you can inspect the database in the NuxtHub Admin Dashboard.

Nuxt DevToolsNuxtHub Admin

![Nuxt DevTools Database](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxt-devtools-database.png)

![NuxtHub Admin Database](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-database.png)

## [`hubDatabase()`](https://hub.nuxt.com/docs/features/database\#hubdatabase)

Server composable that returns a [D1 database client](https://developers.cloudflare.com/d1/build-databases/query-databases/).

```
const db = hubDatabase()

```

This documentation is a small reflection of the [Cloudflare D1 documentation](https://developers.cloudflare.com/d1/build-databases/query-databases/). We recommend reading it to understand the full potential of the D1 database.

### [`prepare()`](https://hub.nuxt.com/docs/features/database\#prepare)

Generates a prepared statement to be used later.

```
const stmt = db.prepare('SELECT * FROM users WHERE name = "Evan You"')

```

Best practice is to use prepared statements which are precompiled objects used by the database to run the SQL. This is because prepared statements lead to overall faster execution and prevent SQL injection attacks.

### [`bind()`](https://hub.nuxt.com/docs/features/database\#bind)

Binds parameters to a prepared statement, allowing you to pass dynamic values to the query.

```
const stmt = db.prepare('SELECT * FROM users WHERE name = ?1')

stmt.bind('Evan You')

// SELECT * FROM users WHERE name = 'Evan You'

```

The `?` character followed by a number (1-999) represents an ordered parameter. The number represents the position of the parameter when calling `.bind(...params)`.

```
const stmt = db
  .prepare('SELECT * FROM users WHERE name = ?2 AND age = ?1')
  .bind(3, 'Leo Chopin')
// SELECT * FROM users WHERE name = 'Leo Chopin' AND age = 3

```

If you instead use anonymous parameters (without a number), the values passed to `bind` will be assigned in order to the `?` placeholders in the query.

It's recommended to use ordered parameters to improve maintainable and ensure that removing or reordering parameters will not break your queries.

```
const stmt = db
  .prepare('SELECT * FROM users WHERE name = ? AND age = ?')
  .bind('Leo Chopin', 3)

// SELECT * FROM users WHERE name = 'Leo Chopin' AND age = 3

```

### [`all()`](https://hub.nuxt.com/docs/features/database\#all)

Returns all rows as an array of objects, with each result row represented as an object on the results property (see [Return Object](https://hub.nuxt.com/docs/features/database#return-object)).

```
const { results } = db.prepare('SELECT name, year FROM frameworks LIMIT 2').all()

console.log(results)
/*
[\
  {\
     name: "Laravel",\
     year: 2011,\
  },\
   {\
     name: "Nuxt",\
     year: 2016,\
  }\
 ]
*/

```

The method return an object that contains the results (if applicable), the success status and a meta object:

```
{
  results: array | null, // [] if empty, or null if it does not apply
  success: boolean, // true if the operation was successful, false otherwise
  meta: {
    duration: number, // duration of the operation in milliseconds
    rows_read: number, // the number of rows read (scanned) by this query
    rows_written: number // the number of rows written by this query
  }
}

```

### [`first()`](https://hub.nuxt.com/docs/features/database\#first)

Returns the first row of the results. This does not return metadata like the other methods. Instead, it returns the object directly.

```
const framework = db.prepare('SELECT * FROM frameworks WHERE year = ?1').bind(2016).first()

console.log(framework)
/*
{
  name: "Nuxt",
  year: 2016,
}
*/

```

Get a specific column from the first row by passing the column name as a parameter:

```
const total = db.prepare('SELECT COUNT(*) AS total FROM frameworks').first('total')
console.log(total) // 23

```

### [`raw()`](https://hub.nuxt.com/docs/features/database\#raw)

Returns results as an array of arrays, with each row represented by an array. The return type is an array of arrays, and does not include query metadata.

```
const rows = db.prepare('SELECT name, year FROM frameworks LIMIT 2').raw()
console.log(rows);

/*
[\
  [ "Laravel", 2011 ],\
  [ "Nuxt", 2016 ],\
]
*/

```

Column names are not included in the result set by default. To include column names as the first row of the result array, use `.raw({ columnNames: true })`.

```
const rows = db.prepare('SELECT name, year FROM frameworks LIMIT 2').raw({ columnNames: true })
console.log(rows);

/*
[\
  [ "name", "year" ],\
  [ "Laravel", 2011 ],\
  [ "Nuxt", 2016 ],\
]
*/

```

### [`run()`](https://hub.nuxt.com/docs/features/database\#run)

Runs the query (or queries), but returns no results. Instead, `run()` returns the metrics only. Useful for write operations like UPDATE, DELETE or INSERT.

```
const result = db
  .prepare('INSERT INTO frameworks (name, year) VALUES ("?1", ?2)')
  .bind('Nitro', 2022)
  .run()

console.log(result)
/*
{
  success: true
  meta: {
    duration: 62,
  }
}
*/

```

### [`batch()`](https://hub.nuxt.com/docs/features/database\#batch)

Sends multiple SQL statements inside a single call to the database. This can have a huge performance impact by reducing latency caused by multiple network round trips to the database. Each statement in the list will execute/commit sequentially and non-concurrently before returning the results in the same order.

`batch` acts as a SQL transaction, meaning that if any statement fails, the entire transaction is aborted and rolled back.

```
const [info1, info2] = await db.batch([\
  db.prepare('UPDATE frameworks SET version = ?1 WHERE name = ?2').bind(3, 'Nuxt'),\
  db.prepare('UPDATE authors SET age = ?1 WHERE username = ?2').bind(32, 'atinux'),\
])

```

`info1` and `info2` will contain the results of the first and second queries, similar to the results of the [`.all()`](https://hub.nuxt.com/docs/features/database#all) method (see [Return Object](https://hub.nuxt.com/docs/features/database#return-object)).

```
console.log(info1)
/*
{
  results: [],
  success: true,
  meta: {
    duration: 62,
    rows_read: 0,
    rows_written: 1
  }
}
*/

```

The object returned is the same as the [`.all()`](https://hub.nuxt.com/docs/features/database#all) method.

### [`exec()`](https://hub.nuxt.com/docs/features/database\#exec)

Executes one or more queries directly without prepared statements or parameters binding. The input can be one or multiple queries separated by \\n.

If an error occurs, an exception is thrown with the query and error messages, execution stops, and further queries are not executed.

```
const result = await hubDatabase().exec(`CREATE TABLE IF NOT EXISTS frameworks (id INTEGER PRIMARY KEY, name TEXT NOT NULL, year INTEGER NOT NULL DEFAULT 0)`)
console.log(result)
/*
{
  count: 1,
  duration: 23
}
*/

```

This method can have poorer performance (prepared statements can be reused in some cases) and, more importantly, is less safe. Only use this method for maintenance and one-shot tasks (for example, migration jobs).

## [Working with JSON](https://hub.nuxt.com/docs/features/database\#working-with-json)

Cloudflare D1 supports querying and parsing JSON data. This can improve performance by reducing the number of round trips to your database. Instead of querying a JSON column, extracting the data you need, and using that data to make another query, you can do all of this work in a single query by using JSON functions.

JSON columns are stored as `TEXT` columns in your database.

```
const framework = {
  name: 'Nuxt',
  year: 2016,
  projects: [\
    'NuxtHub',\
    'Nuxt UI'\
  ]
}

await hubDatabase()
  .prepare('INSERT INTO frameworks (info) VALUES (?1)')
  .bind(JSON.stringify(framework))
  .run()

```

Then, using D1's [JSON functions](https://developers.cloudflare.com/d1/sql-api/query-json/), which are built on the [SQLite JSON extension](https://www.sqlite.org/json1.html), you can make queries using the data in your JSON column.

```
const framework = await db.prepare('SELECT * FROM frameworks WHERE (json_extract(info, "$.name") = "Nuxt")').first()
console.log(framework)
/*
{
  "id": 1,
  "info": "{\"name\":\"Nuxt\",\"year\":2016,\"projects\":[\"NuxtHub\",\"Nuxt UI\"]}"
}
*/

```

For an in-depth guide on querying JSON and a list of all supported functions, see [Cloudlare's Query JSON documentation](https://developers.cloudflare.com/d1/sql-api/query-json/#generated-columns).

## [Using an ORM](https://hub.nuxt.com/docs/features/database\#using-an-orm)

Instead of using `hubDatabase()` to make interact with your database, you can use an ORM like [Drizzle ORM](https://hub.nuxt.com/docs/recipes/drizzle). This can improve the developer experience by providing a type-safe API, migrations, and more.

## [Database Migrations](https://hub.nuxt.com/docs/features/database\#database-migrations)

Database migrations provide version control for your database schema. They track changes and ensure consistent schema evolution across all environments through incremental updates. NuxtHub supports SQL migration files ( `.sql`).

### [Migrations Directories](https://hub.nuxt.com/docs/features/database\#migrations-directories)

NuxtHub scans the `server/database/migrations` directory for migrations **for each [Nuxt layer](https://nuxt.com/docs/getting-started/layers)**.

If you need to scan additional migrations directories, you can specify them in your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    // Array of additional migration directories to scan
    databaseMigrationsDirs: [\
      'my-module/db-migrations/'\
    ]
  }
})

```

NuxtHub will scan both `server/database/migrations` and `my-module/db-migrations` directories for `.sql` files.

If you want more control to the migrations directories or you are working on a [Nuxt module](https://nuxt.com/docs/guide/going-further/modules), you can use the `hub:database:migrations:dirs` hook:

modules/auth/index.tsmodules/auth/db-migrations/0001\_create-users.sql

```
import { createResolver, defineNuxtModule } from 'nuxt/kit'

export default defineNuxtModule({
  meta: {
    name: 'my-auth-module'
  },
  setup(options, nuxt) {
    const { resolve } = createResolver(import.meta.url)

    nuxt.hook('hub:database:migrations:dirs', (dirs) => {
      dirs.push(resolve('db-migrations'))
    })
  }
})

```

```
CREATE TABLE IF NOT EXISTS users (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  email TEXT NOT NULL
);

```

All migrations files are copied to the `.data/hub/database/migrations` directory when you run Nuxt. This consolidated view helps you track all migrations and enables you to use `npx nuxthub database migrations <command>` commands.

### [Automatic Application](https://hub.nuxt.com/docs/features/database\#automatic-application)

All `.sql` files in the database migrations directories are automatically applied when you:

- Start the development server ( `npx nuxt dev` or [`npx nuxt dev --remote`](https://hub.nuxt.com/docs/getting-started/remote-storage))
- Preview builds locally ( [`npx nuxthub preview`](https://hub.nuxt.com/changelog/nuxthub-preview))
- Deploy via [`npx nuxthub deploy`](https://hub.nuxt.com/docs/getting-started/deploy#nuxthub-cli) or [Cloudflare Pages CI](https://hub.nuxt.com/docs/getting-started/deploy#cloudflare-pages-ci)

All applied migrations are tracked in the `_hub_migrations` database table.

### [Creating Migrations](https://hub.nuxt.com/docs/features/database\#creating-migrations)

Generate a new migration file using:

Terminal

```
npx nuxthub database migrations create <name>

```

Migration names must only contain alphanumeric characters and `-` (spaces are converted to `-`).

Migration files are created in `server/database/migrations/` and are prefixed by an auto-incrementing sequence number. This migration number is used to determine the order in which migrations are run.

Example

```
> npx nuxthub database migrations create create-todos
✔ Created ./server/database/migrations/0001_create-todos.sql

```

After creation, add your SQL queries to modify the database schema. For example, migrations should be used to create tables, add/delete/modify columns, and add/remove indexes.

0001\_create-todos.sql

```
-- Migration number: 0001    2025-01-30T17:17:37.252Z

CREATE TABLE `todos` (
  `id` integer PRIMARY KEY NOT NULL,
  `user_id` integer NOT NULL,
  `title` text NOT NULL,
  `completed` integer DEFAULT 0 NOT NULL,
  `created_at` integer NOT NULL
);

```

With [Drizzle ORM](https://hub.nuxt.com/docs/recipes/drizzle), migrations are automatically created when you run `npx drizzle-kit generate`.

### [Checking Migration Status](https://hub.nuxt.com/docs/features/database\#checking-migration-status)

View pending and applied migrations across environments:

Terminal

```
# Local environment status
npx nuxthub database migrations list

# Preview environment status
npx nuxthub database migrations list --preview

# Production environment status
npx nuxthub database migrations list --production

```

Example output

```
> npx nuxthub database migrations list --production
ℹ Connected to project atidone.
ℹ Using https://todos.nuxt.dev to retrieve migrations.
✔ Found 1 migration on atidone...
✅ ./server/database/migrations/0001_create-todos.sql 10/25/2024, 2:43:32 PM
🕒 ./server/database/migrations/0002_create-users.sql Pending

```

### [Marking Migrations as Applied](https://hub.nuxt.com/docs/features/database\#marking-migrations-as-applied)

For databases with existing migrations, prevent NuxtHub from rerunning them by marking them as applied:

Terminal

```
# Mark applied in local environment
npx nuxthub database migrations mark-all-applied

# Mark applied in preview environment
npx nuxthub database migrations mark-all-applied --preview

# Mark applied in production environment
npx nuxthub database migrations mark-all-applied --production

```

Show self-hosting docs

When [self-hosting](https://hub.nuxt.com/docs/getting-started/deploy#self-hosted), set these environment variables before running commands:

Terminal

```
NUXT_HUB_PROJECT_URL=<url> NUXT_HUB_PROJECT_SECRET_KEY=<secret> nuxthub database migrations mark-all-applied

```

### [Post-Migration Queries](https://hub.nuxt.com/docs/features/database\#post-migration-queries)

This feature is for advanced use cases. As the queries are run after the migrations process (see [Automatic Application](https://hub.nuxt.com/docs/features/database#automatic-application)), you want to make sure your queries are idempotent.

Sometimes you need to run additional queries after migrations are applied without tracking them in the migrations table.

NuxtHub provides the `hub:database:queries:paths` hook for this purpose:

modules/admin/index.tsmodules/admin/db-queries/seed-admin.sql

```
import { createResolver, defineNuxtModule } from 'nuxt/kit'

export default defineNuxtModule({
  meta: {
    name: 'my-auth-module'
  },
  setup(options, nuxt) {
    const { resolve } = createResolver(import.meta.url)

    nuxt.hook('hub:database:queries:paths', (queries) => {
      // Add SQL files to run after migrations
      queries.push(resolve('./db-queries/seed-admin.sql'))
    })
  }
})

```

```
INSERT OR IGNORE INTO admin_users (id, email, password) VALUES (1, 'admin@nuxt.com', 'admin');

```

These queries run after all migrations are applied but are not tracked in the `_hub_migrations` table. Use this for operations that should run when deploying your project.

### [Foreign Key Constraints](https://hub.nuxt.com/docs/features/database\#foreign-key-constraints)

If you are using [Drizzle ORM](https://hub.nuxt.com/docs/recipes/drizzle) to generate your database migrations, your generated migration files will use `PRAGMA foreign_keys = ON | OFF;`. This is not supported by Cloudflare D1. Instead, they support [defer foreign key constraints](https://developers.cloudflare.com/d1/sql-api/foreign-keys/#defer-foreign-key-constraints).

You need to update your migration file to use `PRAGMA defer_foreign_keys = on|off;` instead:

Example

```
-PRAGMA foreign_keys = OFF;
+PRAGMA defer_foreign_keys = on;

ALTER TABLE ...

-PRAGMA foreign_keys = ON;
+PRAGMA defer_foreign_keys = off;

```

## [Limits](https://hub.nuxt.com/docs/features/database\#limits)

- The maximum database size is 10 GB
- The maximum number of columns per table is 100

See all of the [D1 Limits](https://developers.cloudflare.com/d1/platform/limits/)

## [Pricing](https://hub.nuxt.com/docs/features/database\#pricing)

DB

|  | Free | Workers Paid ($5/month) |
| --- | --- | --- |
| Databases | 10 | 50,000 |
| Rows read | 5 million / day | 25 billion / month + $0.001/million |
| Rows written | 100,000 / day | 50 million / month + $1.00/million |
| Storage | 5 GB | 5 GB + $0.75/GB-month |
| Max database size | 500 MB | 10 GB ( [learn more](https://developers.cloudflare.com/d1/platform/limits/)) |

[Cloudflare D1 pricing](https://developers.cloudflare.com/d1/platform/pricing/)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/database.md)

[Cache\\
\\
Learn how to cache Nuxt pages, API routes and functions in with NuxtHub cache storage.](https://hub.nuxt.com/docs/features/cache) [Key Value\\
\\
Add a global, low-latency key-value data storage to your Nuxt application.](https://hub.nuxt.com/docs/features/kv)

## AutoRAG for AI
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# AutoRAG

Create fully-managed RAG pipelines to power your AI applications with accurate and up-to-date information.

[AutoRAG](https://developers.cloudflare.com/autorag/) lets you create fully-managed, retrieval-augmented generation (RAG) pipelines that continuously updates and scales on Cloudflare. With AutoRAG, you can integrate context-aware AI into your Nuxt applications without managing infrastructure.

Cloudflare AutoRAG automatically indexes your data into vector embeddings optimized for semantic search. Once a data source is connected, indexing runs continuously in the background to keep your knowledge base fresh and queryable.

## [Getting Started](https://hub.nuxt.com/docs/features/autorag\#getting-started)

Use AutoRAG by enabling AI in your NuxtHub project by adding the `ai` property to the `hub` object in your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    ai: true
  },
})

```

This option will enable [Workers AI](https://developers.cloudflare.com/workers-ai) (LLM powered by serverless GPUs on Cloudflare’s global network) and automatically add the binding to your project when you [deploy it](https://hub.nuxt.com/docs/getting-started/deploy).

Then create an AutoRAG instance from the [Cloudflare dashboard](https://dash.cloudflare.com/?to=/:account/ai/autorag) and add your data source.

Go to [AutoRAG](https://dash.cloudflare.com/?to=/:account/ai/autorag) in the [Cloudflare dashboard](https://dash.cloudflare.com/?to=/:account/ai/autorag)

## [Local Development](https://hub.nuxt.com/docs/features/autorag\#local-development)

During development, `hubAutoRAG()` will call the Cloudflare API. Make sure to run `npx nuxthub link` to create/link a NuxtHub project (even if the project is empty). This project is where your AutoRAG requests will run.

AutoRAG will always run on your Cloudflare account, including during local development. [See pricing on Cloudflare's documentation](https://developers.cloudflare.com/autorag/platform/limits-pricing/).

## [`hubAutoRAG()`](https://hub.nuxt.com/docs/features/autorag\#hubautorag)

`hubAutoRAG()` is a server composable that returns a [AutoRAG instance](https://developers.cloudflare.com/autorag/usage/workers-binding/).

```
const autorag = hubAutoRAG("my-autorag")

```

This documentation is a small reflection of the [Cloudflare AutoRAG documentation](https://developers.cloudflare.com/autorag/usage/workers-binding/). We recommend reading it to understand the full potential of AutoRAG.

### [`aiSearch()`](https://hub.nuxt.com/docs/features/autorag\#aisearch)

This method searches for relevant results from your data source and generates a response using your default model and the retrieved context, for an AutoRAG named `my-autorag`:

server/api/autorag-test.ts

```
export default defineEventHandler(async () => {
  const autorag = hubAutoRAG("my-autorag") // access AutoRAG instance
  return await autorag.aiSearch({
    query: "How do I create a modal with Nuxt UI?",
    model: "@cf/meta/llama-3.3-70b-instruct-sd",
    rewrite_query: true,
    max_num_results: 2,
    ranking_options: {
      score_threshold: 0.7,
    },
  })
})

```

#### [Options](https://hub.nuxt.com/docs/features/autorag\#options)

query

string required

The input query.

model

string

The text-generation model that is used to generate the response for the query. For a list of valid options, check the AutoRAG Generation model Settings. Defaults to the generation model selected in the AutoRAG Settings.

rewrite\_query

boolean

Rewrites the original query into a search optimized query to improve retrieval accuracy. Defaults to `false`.

max\_num\_results

number

The maximum number of results that can be returned from the Vectorize database. Defaults to `10`. Must be between `1` and `50`.

ranking\_options

object

Configurations for customizing result ranking. Defaults to `{}`.

Show properties

score\_threshold

number

The minimum match score required for a result to be considered a match. Defaults to `0`. Must be between `0` and `1`.

stream

boolean

Returns a stream of results as they are available. Defaults to `false`.

filters

object

Narrow down search results based on metadata, like folder and date, so only relevant content is retrieved. For more details, refer to [Metadata filtering](https://developers.cloudflare.com/autorag/configuration/metadata-filtering/).

#### [Response](https://hub.nuxt.com/docs/features/autorag\#response)

This is the response structure without `stream` enabled.

```
{
  "object": "vector_store.search_results.page",
  "search_query": "How do I train a llama to deliver coffee?",
  "response": "To train a llama to deliver coffee:\n\n1. **Build trust** — Llamas appreciate patience (and decaf).\n2. **Know limits** — Max 3 cups per llama, per `llama-logistics.md`.\n3. **Use voice commands**\n4. — Start with \"Espresso Express!\"",
  "data": [\
    {\
      "file_id": "llama001",\
      "filename": "docs/llama-logistics.md",\
      "score": 0.98,\
      "attributes": {},\
      "content": [\
        {\
          "id": "llama001",\
          "type": "text",\
          "text": "Llamas can carry 3 drinks max."\
        }\
      ]\
    },\
    {\
      "file_id": "llama042",\
      "filename": "docs/llama-commands.md",\
      "score": 0.95,\
      "attributes": {},\
      "content": [\
        {\
          "id": "llama042",\
          "type": "text",\
          "text": "Start with basic commands like 'Espresso Express!' Llamas love alliteration."\
        }\
      ]\
    },\
  ],
  "has_more": false,
  "next_page": null
}

```

### [`search()`](https://hub.nuxt.com/docs/features/autorag\#search)

Runs a model. Takes a model as the first parameter, and an object as the second parameter.

server/api/autorag-test.ts

```
export default defineEventHandler(async () => {
  const autorag = hubAutoRAG("my-autorag") // access AutoRAG instance
  return await autorag.search({
    query: "When did I sign my agreement contract?",
    rewrite_query: true,
    max_num_results: 2,
    ranking_options: {
      score_threshold: 0.7,
    },
    filters: {
      type: "eq",
      key: "folder",
      value: "customer-a/contracts/",
    },
  })
})

```

#### [Options](https://hub.nuxt.com/docs/features/autorag\#options-1)

query

string required

The input query.

rewrite\_query

boolean

Rewrites the original query into a search optimized query to improve retrieval accuracy. Defaults to `false`.

max\_num\_results

number

The maximum number of results that can be returned from the Vectorize database. Defaults to `10`. Must be between `1` and `50`.

ranking\_options

object

Configurations for customizing result ranking. Defaults to `{}`.

Show properties

score\_threshold

number

The minimum match score required for a result to be considered a match. Defaults to `0`. Must be between `0` and `1`.

filters

object

Narrow down search results based on metadata, like folder and date, so only relevant content is retrieved. For more details, refer to [Metadata filtering](https://developers.cloudflare.com/autorag/configuration/metadata-filtering/).

#### [Response](https://hub.nuxt.com/docs/features/autorag\#response-1)

```
{
  "object": "vector_store.search_results.page",
  "search_query": "How do I train a llama to deliver coffee?",
  "data": [\
    {\
      "file_id": "llama001",\
      "filename": "docs/llama-logistics.md",\
      "score": 0.98,\
      "attributes": {},\
      "content": [\
        {\
          "id": "llama001",\
          "type": "text",\
          "text": "Llamas can carry 3 drinks max."\
        }\
      ]\
    },\
    {\
      "file_id": "llama042",\
      "filename": "docs/llama-commands.md",\
      "score": 0.95,\
      "attributes": {},\
      "content": [\
        {\
          "id": "llama042",\
          "type": "text",\
          "text": "Start with basic commands like 'Espresso Express!' Llamas love alliteration."\
        }\
      ]\
    },\
  ],
  "has_more": false,
  "next_page": null
}

```

## [Supported data sources](https://hub.nuxt.com/docs/features/autorag\#supported-data-sources)

AutoRAG sets up and manages your RAG pipeline for you. It connects the tools needed for indexing, retrieval, and generation, and keeps everything up to date by syncing with your data with the index regularly. Once set up, AutoRAG indexes your content in the background and responds to queries in real time.

You can use AutoRAG with the following data sources:

- **Blob**: Upload files to Cloudflare and use them as a data source.
- **Database** (Coming Soon): Connect to a database and use it as a data source.
- **Web Crawler** (Coming Soon): Crawl a website and use it as a data source.
- **Nuxt Content** (Coming Soon): Use Nuxt Content as a data source.

Learn more about supported data sources and file types in the [AutoRAG documentation](https://developers.cloudflare.com/autorag/configuration/data-source/).

## [Pricing](https://hub.nuxt.com/docs/features/autorag\#pricing)

During the open beta, AutoRAG is free to enable. When you create an AutoRAG instance, it provisions and runs on top of Cloudflare services in your account. These resources are billed as part of your Cloudflare usage, and includes AI, Blob storage, and Vectorize.

Learn more about pricing in the [AutoRAG documentation](https://developers.cloudflare.com/autorag/platform/limits-pricing/).

AI

|  | Free | Workers Paid ($5/month) |
| --- | --- | --- |
| Text Generation | 10,000 tokens / day | 10,000 tokens / day + start at $0.10 / million tokens |
| Embeddings | 10,000 tokens / day | 10,000 tokens / day + start at $0.10 / million tokens |
| Images | 250 steps (up to 1024x1024) / day | 250 steps / day + start at $0.00125 per 25 steps |
| Speech to Text | 10 minutes of audio / day | 10 minutes of audio / day + $0.0039 per minute of audio input |

[Cloudflare AI pricing](https://developers.cloudflare.com/workers-ai/platform/pricing/)

Blob

|  | Free Tier | Pricing |
| --- | --- | --- |
| List + Write | 1 million / month | 1 million / month + $4.50/million |
| Read | 10 million / month | 10 million / month + $0.36/million |
| Storage | 10 GB / month | 10 GB / month + $0.015/GB-month |
| Egress | Unlimited | Unlimited |

[Cloudflare R2 pricing](https://developers.cloudflare.com/r2/pricing/)

Vectorize

|  | Free Tier | Pricing |
| --- | --- | --- |
| Writes | Free | Free |
| Queried vector dimensions | 30 million / month | 50 million / month + $0.01/million |
| Stored vector dimensions | 5 million / month | 10 million / month + $0.05/100 million |

[Cloudflare Vectorize pricing](https://developers.cloudflare.com/vectorize/platform/pricing/)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/autorag.md)

[AI\\
\\
Run machine learning models, such as LLMs, in Nuxt.](https://hub.nuxt.com/docs/features/ai) [Blob\\
\\
Upload, store and serve images, videos, music, documents and other unstructured data in your Nuxt application.](https://hub.nuxt.com/docs/features/blob)

## Database Migrations Overview
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

October 25, 2024

# Automatic Database Migrations

Database migrations now automatically apply during development and deployment.

[RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://x.com/RihanArfan) [SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

This feature is available on both [free and pro plans](https://hub.nuxt.com/pricing) starting with [`@nuxthub/core >= v0.8.0`](https://github.com/nuxt-hub/core/releases).

We're excited to introduce automatic [database migrations](https://hub.nuxt.com/docs/features/database#database-migrations) in NuxtHub.

![Automatic Database Migrations](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/database-migrations.png)

## [Automatic Migration Application](https://hub.nuxt.com/changelog/database-migrations\#automatic-migration-application)

SQL migrations in `server/database/migrations/*.sql` are automatically applied when you:

- Start the development server ( `npx nuxt dev` or [`npx nuxt dev --remote`](https://hub.nuxt.com/docs/getting-started/remote-storage))
- Preview builds locally ( [`npx nuxthub preview`](https://hub.nuxt.com/changelog/nuxthub-preview))
- Deploy via [`npx nuxthub deploy`](https://hub.nuxt.com/docs/getting-started/deploy#nuxthub-cli) or [Cloudflare Pages CI](https://hub.nuxt.com/docs/getting-started/deploy#cloudflare-pages-ci)

Starting now, when you clone any of [our templates](https://hub.nuxt.com/templates) with a database, all migrations apply automatically!

[→ Deploy the Todo App template](https://admin.hub.nuxt.com/new?template=atidone)

![Database Migrations applied during deployment](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/database-migration-on-deploy.png)

Learn more about database migrations in our **full documentation**.

## [New CLI Commands](https://hub.nuxt.com/changelog/database-migrations\#new-cli-commands)

[`nuxthub@0.7.0`](https://github.com/nuxt-hub/cli) introduces these database migration commands:

Terminal

```
# Create a new migration
npx nuxthub database migrations create <name>

# View migration status
npx nuxthub database migrations list

# Mark all migrations as applied
npx nuxthub database migrations mark-all-applied

```

Learn more about:

- [Creating migrations](https://hub.nuxt.com/docs/features/database#creating-migrations)
- [Checking migration status](https://hub.nuxt.com/docs/features/database#checking-migration-status)
- [Marking migrations as applied](https://hub.nuxt.com/docs/features/database#marking-migrations-as-applied)

## [Migrating from Existing ORMs](https://hub.nuxt.com/changelog/database-migrations\#migrating-from-existing-orms)

**Current Drizzle ORM users:** Follow these specific migration steps.

Since NuxtHub doesn't recognize previously applied Drizzle ORM migrations (stored in `__drizzle_migrations`), it will attempt to rerun all migrations in `server/database/migrations/*.sql`. To prevent this:

1. Mark existing migrations as applied in each environment:


Terminal



```
# Local environment
npx nuxthub database migrations mark-all-applied

# Preview environment
npx nuxthub database migrations mark-all-applied --preview

# Production environment
npx nuxthub database migrations mark-all-applied --production

```

2. Remove `server/plugins/database.ts` as it's no longer needed.

That's it! You can keep using `npx drizzle-kit generate` to generate migrations when updating your Drizzle ORM schema.

## [Understanding Database Migrations](https://hub.nuxt.com/changelog/database-migrations\#understanding-database-migrations)

Database migrations provide version control for your database schema. They track changes and ensure consistent schema evolution across all environments through incremental updates.

Implemented in [nuxt-hub/core#333](https://github.com/nuxt-hub/core/pull/333) and [nuxt-hub/cli#31](https://github.com/nuxt-hub/cli/pull/31).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Cloudflare Access integration\\
\\
We now support Cloudflare Access within NuxtHub admin, module and CLI](https://hub.nuxt.com/changelog/cloudflare-access) [Blob Presigned URLs\\
\\
It is now possible to upload files to your R2 bucket using presigned URLs with zero configuration.](https://hub.nuxt.com/changelog/blob-presigned-urls)

## Key Value Storage
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Key Value Storage

Add a global, low-latency key-value data storage to your Nuxt application.

NuxtHub Key Value Storage uses [Unstorage](https://unstorage.unjs.io/) with [Cloudflare Workers KV](https://developers.cloudflare.com/kv) to store key-value data.

## [Use Cases](https://hub.nuxt.com/docs/features/kv\#use-cases)

- **Frequently Read Data** \- values are cached in regional data centers closer to the user so multiple requests from the same region will be faster
- **Per-Object Expiration** \- passing a `ttl` when writing object will delete it after a certain amount of time
- **Eventual Consistency** \- cached values are eventually consistent and may take up to 60 seconds to update across all regions, allowing for improved performance when strong consistency is not required

## [Getting Started](https://hub.nuxt.com/docs/features/kv\#getting-started)

Enable the key-value storage in your NuxtHub project by adding the `kv` property to the `hub` object in your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    kv: true
  }
})

```

This option will use Cloudflare platform proxy in development and automatically create a [Cloudflare Workers KV](https://developers.cloudflare.com/kv) namespace for your project when you [deploy it](https://hub.nuxt.com/docs/getting-started/deploy).

You can inspect your KV namespace during local development in the Nuxt DevTools or after a deployment using the NuxtHub Admin Dashboard.

Nuxt DevToolsNuxtHub Admin

![Nuxt DevTools KV](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxt-devtools-kv.png)

![NuxtHub Admin KV](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-kv.png)

::

## [How KV Works](https://hub.nuxt.com/docs/features/kv\#how-kv-works)

NuxtHub uses [Cloudflare Workers KV](https://developers.cloudflare.com/kv) to store key-value data a few centralized data
centers. Then, when data is requested, it will cache the responses in regional data centers closer to the user to speed up future requests coming from the same region.

This caching means that KV is optimized for high-read use cases, but it also means that changes like editing or deleting data are **eventually consistent** and may take up to 60 seconds to propagate to all regions. Even if a request is made for a key that does not exist in the KV namespace, that result will be cached for up to 60 seconds.

If you need a strongly consistent data model, where changes are immediately visible to all users, a [NuxtHub database](https://hub.nuxt.com/docs/features/database) may be a better fit.

To learn more about how KV works, check out the [Cloudflare KV documentation](https://developers.cloudflare.com/kv/concepts/how-kv-works/).

## [`hubKV()`](https://hub.nuxt.com/docs/features/kv\#hubkv)

`hubKV()` is a server composable that returns an [Unstorage](https://unstorage.unjs.io/) instance with [Cloudflare KV binding](https://unstorage.unjs.io/drivers/cloudflare#cloudflare-kv-binding) as the [driver](https://unstorage.unjs.io/drivers/cloudflare).

### [Set an item](https://hub.nuxt.com/docs/features/kv\#set-an-item)

Puts an item in the storage.

```
await hubKV().set('vue', { year: 2014 })

// using prefixes to organize your KV namespace, useful for the `keys` operation
await hubKV().set('vue:nuxt', { year: 2016 })

```

The maximum size of a value is 25 MiB and the maximum length of a key is 512 bytes.

#### [Expiration](https://hub.nuxt.com/docs/features/kv\#expiration)

By default, items in your KV namespace will never expire. You can delete them manually using the [`del()`](https://hub.nuxt.com/docs/features/kv#delete-an-item) method or set a TTL (time to live) in seconds.

The item will be deleted after the TTL has expired. The `ttl` option maps to Cloudflare's [`expirationTtl`](https://developers.cloudflare.com/kv/api/write-key-value-pairs/#reference) option. Values that have recently been read will continue to return the cached value for up to 60 seconds and may not be immediately deleted for all regions.

```
await hubKV().set('vue:nuxt', { year: 2016 }, { ttl: 60 })

```

### [Get an item](https://hub.nuxt.com/docs/features/kv\#get-an-item)

Retrieves an item from the Key-Value storage.

```
const vue = await hubKV().get('vue')
/*
{
  year: 2014
}
*/

```

### [Has an item](https://hub.nuxt.com/docs/features/kv\#has-an-item)

Checks if an item exists in the storage.

```
const hasAngular = await hubKV().has('angular') // false
const hasVue = await hubKV().has('vue') // true

```

### [Delete an item](https://hub.nuxt.com/docs/features/kv\#delete-an-item)

Delete an item with the given key from the storage.

```
await hubKV().del('react')

```

### [Clear the KV namespace](https://hub.nuxt.com/docs/features/kv\#clear-the-kv-namespace)

Deletes all items from the KV namespace..

```
await hubKV().clear()

```

To delete all items for a specific prefix, you can pass the prefix as an argument. We recommend using prefixes for better organization in your KV namespace.

```
await hubKV().clear('react')

```

### [List all keys](https://hub.nuxt.com/docs/features/kv\#list-all-keys)

Retrieves all keys from the KV storage.

```
const keys = await hubKV().keys()
/*
[\
  'react',\
  'react:gatsby',\
  'react:next',\
  'vue',\
  'vue:nuxt',\
  'vue:quasar'\
]

```

To get the keys starting with a specific prefix, you can pass the prefix as an argument. We recommend using prefixes for better organization in your KV namespace.

```
const vueKeys = await hubKV().keys('vue')
/*
[\
  'vue:nuxt',\
  'vue:quasar'\
]
*/

```

## [Limits](https://hub.nuxt.com/docs/features/kv\#limits)

- The maximum size of a value is 25 MiB.
- The maximum length of a key is 512 bytes.
- The TTL must be at least 60 seconds.
- There is a maximum of 1 write to the same key per second ( [KV write rate limit](https://developers.cloudflare.com/kv/api/write-key-value-pairs/#limits-to-kv-writes-to-the-same-key)).

Learn more about [Cloudflare KV limits](https://developers.cloudflare.com/kv/platform/limits/).

## [Learn More](https://hub.nuxt.com/docs/features/kv\#learn-more)

`hubKV()` is an instance of [unstorage](https://unstorage.unjs.io/guide#interface) with the [Cloudflare KV binding](https://unstorage.unjs.io/drivers/cloudflare#cloudflare-kv-binding) driver.

## [Pricing](https://hub.nuxt.com/docs/features/kv\#pricing)

KV

|  | Free | Workers Paid ($5/month) |
| --- | --- | --- |
| Read | 100,000 / day | 10 million / month + $0.50/million |
| List | 1,000 / day | 1 million / month + $5.00/million |
| Write | 1,000 / day | 1 million / month + $5.00/million |
| Delete | 1,000 / day | 1 million / month + $5.00/million |
| Storage | 1 GB | 1 GB + $0.50/GB-month |

[Cloudflare KV pricing](https://developers.cloudflare.com/kv/platform/pricing/)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/kv.md)

[Database\\
\\
Access a SQL database in your Nuxt application to store and retrieve relational data.](https://hub.nuxt.com/docs/features/database) [Open API\\
\\
Generate an Open API documentation for your Nuxt project with Scalar.](https://hub.nuxt.com/docs/features/open-api)

## NuxtHub Preview Command
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

September 15, 2024

# \`nuxthub preview\` command

We added a new command to preview your production build locally with \`wrangler\`.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

As developers working with Cloudflare Workers and edge runtimes, we've long grappled with the challenges of accurately previewing our production builds locally. The edge runtime environment differs significantly from Node.js, which is why Cloudflare introduced the `wrangler pages dev` command.

However, as NuxtHub doesn't rely on a `wrangler.toml` file, this solution wasn't quite perfect.

Today, I'm excited to introduce the `nuxthub preview` command. This new addition to our CLI bridges the gap between local development and edge runtime environments, making it easier than ever to test and refine your NuxtHub projects before deployment.

## [Usage](https://hub.nuxt.com/changelog/nuxthub-preview\#usage)

With the latest release of the `nuxthub` CLI (v0.6.0), you can now preview your production build locally with a new command.

Terminal

```
# 1/ Build your application for production
npx nuxt build
# 2/ Preview your production build locally
npx nuxthub preview

```

This command will:

1. read the `dist/hub.config.json` file and generate a local `dist/wrangler.toml` file
2. start the server using the `wrangler pages dev` command within the `dist/` director

![NuxtHub Preview command](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/nuxthub-preview.png)

## [Limitations](https://hub.nuxt.com/changelog/nuxthub-preview\#limitations)

At the moment, the `nuxthub preview` command has the following limitations:

- It does not work with the `--remote` flag (only local bindings)
- [`hubAI()`](https://hub.nuxt.com/docs/features/ai) will ask you connect within the terminal with wrangler
- [`hubBrowser()`](https://hub.nuxt.com/docs/features/browser) is not supported as not supported by `wrangler pages dev`

## [Open Source](https://hub.nuxt.com/changelog/nuxthub-preview\#open-source)

The CLI is full open source on GitHub, feel free to contribute and improve it.

Checkout the `nuxthub` CLI on GitHub.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Introducing hubVectorize()\\
\\
Vectorize is a globally distributed vector database that enables you to build full-stack, AI-powered applications with Nuxt.](https://hub.nuxt.com/changelog/hub-vectorize) [Introducing hubBrowser()\\
\\
Taking screenshots, crawling websites, generating PDFs and more has never been easier with \`hubBrowser()\`.](https://hub.nuxt.com/changelog/hub-browser)

## hubAI() Introduction
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

August 14, 2024

# Introducing hubAI()

Run machine learning models, such as LLMs in your Nuxt application, with minimal setup.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://x.com/RihanArfan)

This feature is available on both [free and pro plans](https://hub.nuxt.com/pricing) and in [`@nuxthub/core >= v0.7.2`](https://github.com/nuxt-hub/core/releases/tag/v0.7.2).

We are excited to introduce [`hubAI()`](https://hub.nuxt.com/docs/features/ai). This new method allows you to run machine learning models, such as LLMs, directly within your Nuxt application with minimal setup.

At NuxtHub, we care about DX and we want to make it easy for you to leverage AI in your application using Cloudflare AI **without having to manage API keys, account ID or using the `wrangler` CLI**.

## [How to use hubAI()](https://hub.nuxt.com/changelog/hub-ai\#how-to-use-hubai)

1. Update `@nuxthub/core` to the latest version ( `v0.7.2` or later)
2. Enable `hub.ai` in your `nuxt.config.ts`

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    ai: true
  },
})

```

3. Run `npx nuxthub link` to link a NuxtHub project or create a new one
4. You can now use [`hubAI()`](https://hub.nuxt.com/docs/features/ai) in your server routes

server/api/ai-test.ts

```
export default defineEventHandler(async (event) => {
  return await hubAI().run('@cf/meta/llama-3.1-8b-instruct', {
    prompt: 'Who is the author of Nuxt?'
  })
})

```

Read the [full documentation](https://hub.nuxt.com/docs/features/ai) to learn more about `hubAI()`.

**If you already have a NuxtHub account**, make sure to add the `Worker AI` permission on your Cloudflare API token.

- Open [Cloudflare User API Tokens](https://dash.cloudflare.com/profile/api-tokens)
- Find the NuxtHub token(s)
- Add the `Account > Worker AI > Read` permission
- Save the changes

Another solution is to link again your Cloudflare account from your NuxtHub team settings by clicking on `Link a new account` \> `Create a token with required permissions`.

This feature has been implemented in [nuxt-hub/core#173](https://github.com/nuxt-hub/core/pull/173).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Hyperdrive bindings\\
\\
It is now possible to use PostgreSQL & Cloudflare Hyperdrive in your Nuxt application.](https://hub.nuxt.com/changelog/hyperdrive-bindings) [Deploy to NuxtHub button\\
\\
The Deploy to NuxtHub button allows you to deploy a GitHub template directly from the NuxtHub Admin.](https://hub.nuxt.com/changelog/deploy-button)

## Introducing hubBrowser()
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

September 8, 2024

# Introducing hubBrowser()

Taking screenshots, crawling websites, generating PDFs and more has never been easier with \`hubBrowser()\`.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

This feature is available on both [free and pro plans](https://hub.nuxt.com/pricing) of NuxtHub but on the [Workers Paid plan](https://www.cloudflare.com/plans/developer-platform/) for your Cloudflare account.

We are excited to introduce [`hubBrowser()`](https://hub.nuxt.com/docs/features/browser). This new method allows you to run a headless browser directly in your Nuxt application using [Puppeteer](https://github.com/puppeteer/puppeteer).

## [How to use hubBrowser()](https://hub.nuxt.com/changelog/hub-browser\#how-to-use-hubbrowser)

1. Update `@nuxthub/core` to the latest version ( `v0.7.11` or later)
2. Enable `hub.browser` in your `nuxt.config.ts`

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    browser: true
  }
})

```

3. Install the required dependencies

Terminal

```
npx nypm i @cloudflare/puppeteer puppeteer

```

4. Start using [`hubBrowser()`](https://hub.nuxt.com/docs/features/browser) in your server routes

server/api/screenshot.ts

```
export default eventHandler(async (event) => {
  const { page } = await hubBrowser()

  await page.setViewport({ width: 1920, height: 1080 })
  await page.goto('https://cloudflare.com')

  setHeader(event, 'content-type', 'image/jpeg')
  return page.screenshot()
})

```

5. Before deploying, make sure you are subscribed to the [Workers Paid plan](https://www.cloudflare.com/plans/developer-platform/)
6. [Deploy your project with NuxtHub](https://hub.nuxt.com/docs/getting-started/deploy)

Read the documentation about `hubBrowser()` with more examples.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[\`nuxthub preview\` command\\
\\
We added a new command to preview your production build locally with \`wrangler\`.](https://hub.nuxt.com/changelog/nuxthub-preview) [Hyperdrive bindings\\
\\
It is now possible to use PostgreSQL & Cloudflare Hyperdrive in your Nuxt application.](https://hub.nuxt.com/changelog/hyperdrive-bindings)

## PostgreSQL with Nuxt
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# PostgreSQL Database

Learn how to use PostgreSQL in your Nuxt application deployed on Cloudflare Workers / Pages and how to speed up your queries using Hyperdrive.

## [Pre-requisites](https://hub.nuxt.com/docs/recipes/postgres\#pre-requisites)

Cloudflare does not host PostgreSQL databases, you need to setup your own PostgreSQL database.

See a list of professional PostgreSQL hosting providers.

If you prefer to use Cloudflare services, you can use Cloudflare D1 which is built on SQLite, see our [Database](https://hub.nuxt.com/docs/features/database) section.

## [Setup](https://hub.nuxt.com/docs/recipes/postgres\#setup)

1. Make sure to use the `@nuxthub/core` module, see the [installation section](https://hub.nuxt.com/docs/getting-started/installation#add-to-a-nuxt-project) for instructions.

nuxt.config.ts

```
export default defineNuxtConfig({
  modules: ['@nuxthub/core'],
});

```

The module ensures that you can connect to your PostgreSQL database using [Cloudflare TCP Sockets](https://developers.cloudflare.com/workers/runtime-apis/tcp-sockets/)

2. Install the [`postgres`](https://www.npmjs.com/package/postgres) NPM package in your project.

```
npx nypm i postgres

```

That's it, you can now use the `postgres` package to connect to your PostgreSQL database.

Please note that in order to use [`pg`](https://www.npmjs.com/package/pg) a minimum version of `8.13.0` is required, alongside wrangler `3.78.7` or later and `compatibility_date = "2024-09-23"`.

## [Usage](https://hub.nuxt.com/docs/recipes/postgres\#usage)

We can add our PostgreSQL database connection in our `.env` file.

.env

```
NUXT_POSTGRES_URL=postgresql://user:password@localhost:5432/database

```

Then, we can create a `usePostgres()` server util to connect to our database in our API route.

server/utils/postgres.ts

```
import postgres from 'postgres'

export function usePostgres () {
  if (!process.env.NUXT_POSTGRES_URL) {
    throw createError('Missing `NUXT_POSTGRES_URL` environment variable')
  }

  return postgres(process.env.NUXT_POSTGRES_URL as string, {
    ssl: 'require'
  })
}

```

We can now use the `usePostgres()` function to connect to our database in our API route.

server/api/db.ts

```
export default eventHandler(async (event) => {
  const sql = usePostgres()

  const products = await sql`SELECT * FROM products`

  // Ensure the database connection is closed after the request is processed
  event.waitUntil(sql.end())
  return products
})

```

You may notice that we don't import `usePostgres()`. This is because Nuxt auto-imports the exported variables & functions from `server/utils/*.ts` when used.

## [Hyperdrive](https://hub.nuxt.com/docs/recipes/postgres\#hyperdrive)

[Hyperdrive](https://developers.cloudflare.com/hyperdrive/) is a Cloudflare service that accelerates queries you make to existing databases, making it faster to access your data from across the globe. By maintaining a connection pool to your database within Cloudflare’s network, Hyperdrive reduces seven round-trips to your database before you can even send a query: the TCP handshake (1x), TLS negotiation (3x), and database authentication (3x).

Hyperdrive is limited to 100,000 queries/day on the Workers Free plan. **Learn more**.

To use Hyperdrive in your Nuxt application:

1. [Create a Hyperdrive configuration](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive/create)
2. Add your Hyperdrive ID in your `nuxt.config.ts` file

nuxt.config.ts

```
export default defineNuxtConfig({
  modules: ['@nuxthub/core'],
  hub: {
    bindings: {
      hyperdrive: {
        // <BINDING_NAME>: <HYPERDRIVE_ID>
        POSTGRES: 'your-hyperdrive-id'
      }
    }
  }
})

```

3. Update our `usePostgres()` function to use the `POSTGRES` binding when available.

server/utils/postgres.ts

```
import type { Hyperdrive } from '@cloudflare/workers-types'
import postgres from 'postgres'

export function usePostgres() {
  // @ts-expect-error globalThis.__env__ is not defined
  const hyperdrive = process.env.POSTGRES || globalThis.__env__?.POSTGRES || globalThis.POSTGRES as Hyperdrive | undefined
  const dbUrl = hyperdrive?.connectionString || process.env.NUXT_POSTGRES_URL
  if (!dbUrl) {
    throw createError('Missing `POSTGRES` hyperdrive binding or `NUXT_POSTGRES_URL` env variable')
  }

  return postgres(dbUrl, {
    ssl: !hyperdrive ? 'require' : undefined
  })
}

```

Hyperdrive is currently not available in development mode at the moment. We are working on a solution to make it work in development mode and remote storage with an upcoming `hubHyperdrive()`.

4. [Deploy your application](https://hub.nuxt.com/docs/getting-started/deploy) with the NuxtHub CLI or Admin to make sure the Hyperdrive bindings are set.

You can now access your PostgreSQL database from anywhere in the world at maximum speed.

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/3.recipes/5.postgres.md)

[Debugging\\
\\
Learn how to debug your Nuxt application which cannot start on Cloudflare Workers / Pages.](https://hub.nuxt.com/docs/recipes/debug) [Cloudflare Access\\
\\
Learn how to use Cloudflare Access to protect your Nuxt application deployed on Cloudflare Pages.](https://hub.nuxt.com/docs/recipes/cloudflare-access)

## hubAutoRAG Introduction
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

May 5, 2025

# Introducing hubAutoRAG()

Create fully-managed RAG pipelines to power your AI applications with accurate and up-to-date information.

[RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev)

This feature is available from [`@nuxthub/core >= v0.8.26`](https://github.com/nuxt-hub/core/releases/tag/v0.8.26)

We are excited to introduce [`hubAutoRAG()`](https://hub.nuxt.com/docs/features/autorag). Cloudflare [AutoRAG](https://developers.cloudflare.com/autorag/) lets you create fully-managed, retrieval-augmented generation pipelines that continuously updates and scales on Cloudflare. With AutoRAG, you can integrate context-aware AI into your Nuxt applications without managing infrastructure.

If you are currently using [`hubVectorize()`](https://hub.nuxt.com/docs/features/vectorize), you may be interested in switching to `hubAutoRAG()` for a simplified developer experience. AutoRAG automatically indexes your data into vector embeddings optimized for semantic search. Once a data source is connected, indexing runs continuously in the background to keep your knowledge base fresh and queryable.

## [How to use hubAutoRAG()](https://hub.nuxt.com/changelog/hub-autorag\#how-to-use-hubautorag)

1. Update `@nuxthub/core` to the latest version ( `v0.8.26` or later)
2. Enable `hub.ai` in your `nuxt.config.ts`

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    ai: true
  }
})

```

3. Create an AutoRAG instance from the [Cloudflare dashboard](https://dash.cloudflare.com/?to=/:account/ai/autorag) and add your data source.

Go to [AutoRAG](https://dash.cloudflare.com/?to=/:account/ai/autorag) in the [Cloudflare dashboard](https://dash.cloudflare.com/?to=/:account/ai/autorag)

4. Start using [`hubAutoRAG()`](https://hub.nuxt.com/docs/features/browser) in your server routes

server/api/rag.ts

```
export default eventHandler(async () => {
  const autorag = hubAutoRAG("nuxt-ui") // access AutoRAG instance
  return await autorag.aiSearch({
    query: "How do I create a modal with Nuxt UI?",
    model: "@cf/meta/llama-3.3-70b-instruct-sd",
    rewrite_query: true,
    max_num_results: 2,
    ranking_options: {
      score_threshold: 0.7,
    },
  })
})

```

5. [Deploy your project with NuxtHub](https://hub.nuxt.com/docs/getting-started/deploy)

Read the documentation about `hubAutoRAG()` to learn more.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Worker logs with history on NuxtHub Admin\\
\\
Worker logs are now available on NuxtHub Admin, allowing you to filter and analyze historical logs from your deployed Nuxt App.](https://hub.nuxt.com/changelog/workers-logs-history) [Worker Logs & Additional Bindings\\
\\
Support for Worker Logs and adding additional bindings for Worker projects.](https://hub.nuxt.com/changelog/observability-additional-bindings)

## Team Webhooks Feature
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

May 21, 2024

# Team Webhooks

It is now possible to trigger webhooks for your team's projects when a new deployment is created.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

We are excited to announce that we have added a new feature to NuxtHub: **Team Webhooks**!

This feature is available on all [NuxtHub plans](https://hub.nuxt.com/pricing).

## [What are Team Webhooks?](https://hub.nuxt.com/changelog/team-webhooks\#what-are-team-webhooks)

They allow you to get notified about your project deployments. You can use them to trigger custom actions, like sending notifications to your team's chat, updating your project management tool and more.

![Team Webhooks](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/team-webhooks.png)

## [Creating a Webhook](https://hub.nuxt.com/changelog/team-webhooks\#creating-a-webhook)

To create a webhook, go to your team settings and click on the "Webhooks" tab. You can then add a new webhook by providing an endpoint and selecting the events you want to trigger the webhook for.

![Creating a NuxtHub Webhook](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/team-webhooks-new.png)

## [Slack & Discord Integration](https://hub.nuxt.com/changelog/team-webhooks\#slack-discord-integration)

We have also added built-in integrations for [Slack Incoming Webhooks](https://api.slack.com/messaging/webhooks) and [Discord Webhooks](https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks).

When pasting a webhook URL from these services, we will automatically send a pre-formatted message to your channel or user.

![NuxtHub Slack Integration](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/team-webhooks-slack.png)

Thank you to [Israel Ortuno](https://github.com/IsraelOrtuno) for suggesting this feature on [nuxt-hub/core#102](https://github.com/nuxt-hub/core/issues/102).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Deployment Details\\
\\
We redesigned the deployment listing as well as added the deployment page to provide more information about each deployment.](https://hub.nuxt.com/changelog/deployment-details) [Server Cache UI\\
\\
It is now possible to manage your server cache with our new UI for Server Cache.](https://hub.nuxt.com/changelog/server-cache)

## Realtime WebSockets
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Realtime & WebSockets

Build realtime experiences with NuxtHub using Cloudflare Workers & Durable Objects.

## [Getting Started](https://hub.nuxt.com/docs/features/realtime\#getting-started)

Enable [Nitro's experimental WebSocket](https://nitro.build/guide/websocket) support by adding the following to your `nuxt.config.ts` file:

nuxt.config.ts

```
export default defineNuxtConfig({
  nitro: {
    experimental: {
      websocket: true
    }
  },
  hub: {
    workers: true
  }
})

```

We need to enable the `workers` option to use the WebSocket support as Durable Objects are only supported on Cloudflare Workers.

## [Example](https://hub.nuxt.com/docs/features/realtime\#example)

Let's create a simple application that display how many users are connected to the website.

First, let's create a websocket handler on `/ws/visitors` route:

server/routes/ws/visitors.ts

```
export default defineWebSocketHandler({
  open(peer) {
    // We subscribe to the 'visitors' channel
    peer.subscribe('visitors')
    // We publish the number of connected users to the 'visitors' channel
    peer.publish('visitors', peer.peers.size)
    // We send the number of connected users to the client
    peer.send(peer.peers.size)
  },
  close(peer) {
    peer.unsubscribe('visitors')
    // Wait 500ms before sending the updated locations to the server
    setTimeout(() => {
      peer.publish('visitors', peer.peers.size)
    }, 500)
  },
})

```

Install VueUse if you haven't already:

Terminal

```
npx nuxi module add vueuse

```

Let's use the [`useWebSocket`](https://vueuse.org/core/useWebSocket/) composable from VueUse to subscribe to the `visitors` channel and display the number of connected users.

pages/visitors.vue

```
<script setup lang="ts">
const visitors = ref(0)
const { open } = useWebSocket('/ws/visitors', {
  immediate: false,
  async onMessage(ws, event) {
    // We parse the number of connected users from the message
    // The message might be a string or a Blob
    visitors.value = parseInt(typeof event.data === 'string' ? event.data : await event.data.text())
  },
})

// We open the connection when the component is mounted
onMounted(() => {
  open()
})
</script>

<template>
  <div>
    <h1>Visitors: {{ visitors }}</h1>
  </div>
</template>

```

See a full open source example on [GitHub](https://github.com/nuxt-hub/multiplayer-globe), including geolocation tracking.

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/realtime.md)

[Open API\\
\\
Generate an Open API documentation for your Nuxt project with Scalar.](https://hub.nuxt.com/docs/features/open-api) [Vectorize\\
\\
Access a vector database to build full-stack AI-powered applications in Nuxt.](https://hub.nuxt.com/docs/features/vectorize)

## NuxtHub Deploy Button
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

July 21, 2024

# Deploy to NuxtHub button

The Deploy to NuxtHub button allows you to deploy a GitHub template directly from the NuxtHub Admin.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

The button is designed to be used in the README of a GitHub repository, documentations or any other place where you want to allow users to deploy your project with one click.

![NuxtHub Deploy Button](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/deploy-button.png)

## [Deploy Button](https://hub.nuxt.com/changelog/deploy-button\#deploy-button)

1. The image of the button is on `https://hub.nuxt.com/button.svg`
2. The link to deploy the project is `https://hub.nuxt.com/new?repo=ORG/REPO` (replace `ORG/REPO` with your GitHub repository)
3. Your repository must be public and marked as "Template repository" on GitHub

To use the button, you need to add the following markdown to your README:

MarkdownHTML

```
[![Deploy to NuxtHub](https://hub.nuxt.com/button.svg)](https://hub.nuxt.com/new?repo=ORG/REPO)

```

```
<a href="https://hub.nuxt.com/new?repo=ORG/REPO"><img src="https://hub.nuxt.com/button.svg" alt="Deploy to NuxtHub"></a>

```

You can see an example of the button in action in the [Instadraw repository](https://github.com/atinux/instadraw).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Introducing hubAI()\\
\\
Run machine learning models, such as LLMs in your Nuxt application, with minimal setup.](https://hub.nuxt.com/changelog/hub-ai) [Blob Upload Prefix\\
\\
It is now possible to upload a blob and setting the prefix beforehand.](https://hub.nuxt.com/changelog/blob-upload-prefix)

## Hello Edge Template
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

June 17, 2024

# Hello World Template

Hello Edge is our minimal Nuxt template to get started with server-side rendering on the Edge.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

This template is a great starting point for your next Nuxt project. It's simple, fast and ready to be deployed to the Edge.

## [Minimal by design](https://hub.nuxt.com/changelog/hello-edge\#minimal-by-design)

This template is a minimal Nuxt project **with no storage**, just a simple "Hello from the Edge 👋" message that you can configure with an environment variable:

.env

```
NUXT_PUBLIC_HELLO_TEXT="My custom message!"

```

We enabled the Nuxt 4 upcoming directory structure, ESLint and the Nuxt DevTools for a great developer experience.

The source code is open source and available on GitHub at [nuxt-hub/hello-edge](https://github.com/nuxt-hub/hello-edge).

## [Deploy with one-click](https://hub.nuxt.com/changelog/hello-edge\#deploy-with-one-click)

From now on, you can deploy this template to the Edge (globally, all over the world) with a single click directly from the [NuxtHub Admin](https://admin.hub.nuxt.com/):

Checkout the demo of the project from the video at [vue.nuxt.dev](https://vue.nuxt.dev/).

You can deploy this template on a free NuxtHub account and a free Cloudflare account.

You can also visit [our templates page](https://hub.nuxt.com/templates) to get started.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Blob Upload Prefix\\
\\
It is now possible to upload a blob and setting the prefix beforehand.](https://hub.nuxt.com/changelog/blob-upload-prefix) [Webhooks Environment Selection\\
\\
It is now possible to select the environment to be notified about.](https://hub.nuxt.com/changelog/team-webhooks-env)

## NuxtHub Deployment Details
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

May 27, 2024

# Deployment Details

We redesigned the deployment listing as well as added the deployment page to provide more information about each deployment.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang) [SM\\
\\
Sarah Moriceau\\
\\
@moriceau\_sarah](https://x.com/moriceau_sarah)

We are excited to announce that we have added a new page to NuxtHub: **Deployment Details**!

![NuxtHub Deployment Details](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/deployment-details.png)

You can now access more information about each deployment such as:

- **Details:** Status, Branch, Commit and more
- **Build Logs:** Access your deployment build logs
- **Server Logs:** Access your deployment server logs in real-time

Based on the deployment status, you can also manage your deployment by:

- Retrying the deployment
- Cancelling the pending deployment
- Rolling back to a previous deployment

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Blob Folders\\
\\
It is now possible to change the view of your blobs to a folder structure.](https://hub.nuxt.com/changelog/blob-folders) [Team Webhooks\\
\\
It is now possible to trigger webhooks for your team's projects when a new deployment is created.](https://hub.nuxt.com/changelog/team-webhooks)

## Nuxt Debugging Guide
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Debugging

Learn how to debug your Nuxt application which cannot start on Cloudflare Workers / Pages.

Some Nuxt modules or librairies you use in your project may not be compatible with the edge runtime yet. When this happens, your Nuxt server cannot even start in production, producing a 500 error.

The current solution to debug is the following.

1. Disable Nitro minification in your `nuxt.config.ts`

nuxt.config.ts

```
export default defineNuxtConfig({
  modules: ['@nuxthub/core'],
  nitro: {
    minify: false
  }
})

```

2. Build your application for production with the Cloudflare Pages preset

Terminal

```
npx nuxt build

```

3. Preview the production server in the Worker environment

Terminal

```
npx nuxthub preview

```

4. Open the browser by pressing the **b** shortcut (most of the time it starts on [http://localhost:8788](http://localhost:8788/))
5. Go back to your terminal and look at the error and stack trace, then open the file (should be in the `dist/` directory) to know the line causing the error.

Most of the time, you will need to find scroll above to know what library is causing the error.

6. [Open an issue](https://github.com/nuxt-hub/core) in our repository so we can help making more libraries Edge compatible.

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/3.recipes/4.debug.md)

[Pre-rendering\\
\\
Pre-render pages at build time for maximum performance and avoid CPU usage on the server.](https://hub.nuxt.com/docs/recipes/pre-rendering) [PostgreSQL\\
\\
Learn how to use PostgreSQL in your Nuxt application deployed on Cloudflare Workers / Pages and how to speed up your queries using Hyperdrive.](https://hub.nuxt.com/docs/recipes/postgres)

## Cloudflare Access Integration
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

October 28, 2024

# Cloudflare Access integration

We now support Cloudflare Access within NuxtHub admin, module and CLI

[RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://x.com/RihanArfan)

This feature is available on all [NuxtHub plans](https://hub.nuxt.com/pricing) and comes with the [v0.8.4](https://github.com/nuxt-hub/core/releases/tag/v0.8.4) release of `@nuxthub/core`.

We now fully support Cloudflare Access across admin, module and CLI.

## [What is Cloudflare Access](https://hub.nuxt.com/changelog/cloudflare-access\#what-is-cloudflare-access)

![Cloudflare Access](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/cloudflare-access.png)

[Cloudflare Access](https://www.cloudflare.com/zero-trust/products/access/) allows you to secure your web applications by restricting who can reach your application by applying configured identity-aware Access policies. Cloudflare Access is part of [Cloudflare's Zero Trust](https://www.cloudflare.com/plans/zero-trust-services/) offerings.

## [What does this mean for NuxtHub](https://hub.nuxt.com/changelog/cloudflare-access\#what-does-this-mean-for-nuxthub)

This enables you to create secure internal web applications on NuxtHub, without compromising on features like NuxtHub admin for management and remote storage during development.

Learn more about enabling Cloudflare Access with NuxtHub.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[NuxtHub GitHub App & Action\\
\\
Introducing our GitHub App & Action for automating your Nuxt deployments with GitHub as well as a new project creation flow.](https://hub.nuxt.com/changelog/github-app-and-action) [Automatic Database Migrations\\
\\
Database migrations now automatically apply during development and deployment.](https://hub.nuxt.com/changelog/database-migrations)

## NuxtHub Hooks Guide
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Hooks

Use lifecycle hooks to stay synced with NuxtHub.

## [`onHubReady()`](https://hub.nuxt.com/docs/recipes/hooks\#onhubready)

Use `onHubReady()` to ensure the execution of some code once NuxtHub environment bindings are set up and database migrations are applied.

`onHubReady()` is a shortcut using the [`hubHooks`](https://hub.nuxt.com/docs/recipes/hooks#hubhooks) object under the hood that listens to the `bindings:ready` and `database:migrations:done` events.

server/plugins/migrations.ts

```
export default defineNitroPlugin(() => {
  // Only run in development
  if (import.meta.dev) {
    onHubReady(async () => {
      console.log('NuxtHub is ready! 🚀')
    })
  }
})

```

## [`hubHooks`](https://hub.nuxt.com/docs/recipes/hooks\#hubhooks)

The `hubHooks` object is a collection of hooks that can be used to stay synced with NuxtHub.

### [Signature](https://hub.nuxt.com/docs/recipes/hooks\#signature)

Signature

```
export interface HubHooks {
  'bindings:ready': () => any | void
  'database:migrations:done': () => any | void
}

```

### [Usage](https://hub.nuxt.com/docs/recipes/hooks\#usage)

You can use the `hubHooks` object to listen to `HubHooks` events in your server plugins:

server/plugins/hub.ts

```
export default defineNitroPlugin(() => {
  hubHooks.hook('bindings:ready', () => {
    console.log('NuxtHub bindings are ready!')
    const db = hubDatabase()
  })
  // Only run in development and if the database is enabled
  if (import.meta.dev) {
    hubHooks.hook('database:migrations:done', () => {
      console.log('Database migrations are done!')
    })
  }
})

```

Note that `hubHooks` is a [hookable](https://hookable.unjs.io/) instance.

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/3.recipes/1.hooks.md)

[Vectorize\\
\\
Access a vector database to build full-stack AI-powered applications in Nuxt.](https://hub.nuxt.com/docs/features/vectorize) [Drizzle ORM\\
\\
Learn how to setup Drizzle ORM with NuxtHub.](https://hub.nuxt.com/docs/recipes/drizzle)

## Hyperdrive Bindings Update
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

August 27, 2024

# Hyperdrive bindings

It is now possible to use PostgreSQL & Cloudflare Hyperdrive in your Nuxt application.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

If you are not comfortable with Cloudflare D1 database (SQLite), you can now use your own PostgreSQL database.

We wrote a recipe on [How to use a PostgreSQL database](https://hub.nuxt.com/docs/recipes/postgres) with NuxtHub.

This recipe explains how to connect to your PostgreSQL database and how to leverage Hyperdrive bindings in your Nuxt application to accelerate your database responses.

Right now, hyperdrive bindings are not available in development mode, we are working with the Cloudflare team to make them available in development mode as well with remote storage.

This feature is available on both [free and pro plans](https://hub.nuxt.com/pricing) and in [`@nuxthub/core >= v0.7.6`](https://github.com/nuxt-hub/core/releases/tag/v0.7.6).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Introducing hubBrowser()\\
\\
Taking screenshots, crawling websites, generating PDFs and more has never been easier with \`hubBrowser()\`.](https://hub.nuxt.com/changelog/hub-browser) [Introducing hubAI()\\
\\
Run machine learning models, such as LLMs in your Nuxt application, with minimal setup.](https://hub.nuxt.com/changelog/hub-ai)

## Blob Folders Feature
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

June 2, 2024

# Blob Folders

It is now possible to change the view of your blobs to a folder structure.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

We are excited to announce that we have added a new feature to NuxtHub Blobs: **Folders**!

This feature is available on all [NuxtHub plans](https://hub.nuxt.com/pricing).

It comes with the [v0.6.0](https://github.com/nuxt-hub/core/releases/tag/v0.6.0) release of `@nuxthub/core`.

When uploading a blob, you can now specify a folder path with the `prefix`. This will allow you to organize your blobs in a more structured way.

```
const { put } = hubBlob()

await put('my-blob.txt', myFile, {
  prefix: 'folder/subfolder'
})

```

Learn more about Blob Storage.

When viewing your blobs in the [NuxtHub admin](https://admin.hub.nuxt.com/), you will now see a folder structure:

![NuxtHub Deployment Details](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/server-cache.png)

Thank you to [Gerben Mulder](https://github.com/Gerbuuun) for suggesting this feature on [nuxt-hub/core#101](https://github.com/nuxt-hub/core/issues/101).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Drizzle Studio Remembers\\
\\
The database admin UI now remembers where you were last time, speeding up your workflow.](https://hub.nuxt.com/changelog/drizzle-studio-remembers) [Deployment Details\\
\\
We redesigned the deployment listing as well as added the deployment page to provide more information about each deployment.](https://hub.nuxt.com/changelog/deployment-details)

## Server Cache Management
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

April 17, 2024

# Server Cache UI

It is now possible to manage your server cache with our new UI for Server Cache.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

We are excited to announce that we have added a new page to your NuxtHub project: **Server Cache**!

![NuxtHub Deployment Details](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/server-cache.png)

It works with:

- [`cachedEventHandler`](https://nitro.build/guide/cache#cached-event-handlers)
- [`cachedFunction`](https://nitro.build/guide/cache#cached-functions)
- [`routeRules`](https://nitro.build/guide/cache#caching-route-rules)

Learn more about server cache.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Team Webhooks\\
\\
It is now possible to trigger webhooks for your team's projects when a new deployment is created.](https://hub.nuxt.com/changelog/team-webhooks)

## Cloudflare Access Integration
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Cloudflare Access Integration

Learn how to use Cloudflare Access to protect your Nuxt application deployed on Cloudflare Pages.

[Cloudflare Access](https://www.cloudflare.com/zero-trust/products/access/) allows you to secure your web applications by restricting who can reach your application by applying configured identity-aware Access policies. Cloudflare Access is part of [Cloudflare's Zero Trust](https://www.cloudflare.com/plans/zero-trust-services/) offerings.

NuxtHub fully supports Cloudflare Access across the NuxtHub admin, module and CLI.

## [Setup Cloudflare Access](https://hub.nuxt.com/docs/recipes/cloudflare-access\#setup-cloudflare-access)

These steps covers setting up Cloudflare Access for a deployed NuxtHub project.

When using Cloudflare Access with NuxtHub, the nuxt.dev subdomain is unavailable due to a Cloudflare limitation. [Learn more](https://hub.nuxt.com/docs/recipes/cloudflare-access#nuxtdev-subdomain-with-cloudflare-access).

1. Create a Cloudflare Access [service token](https://developers.cloudflare.com/cloudflare-one/identity/service-tokens/) in the [Cloudflare Zero Trust dashboard](https://one.dash.cloudflare.com/)
1. In [Zero Trust](https://one.dash.cloudflare.com/), go to Access → Service Auth → Service Tokens
2. Select Create Service Token
3. Name the service token. For example, the NuxtHub project's name

      - The name allows you to easily identify events related to the token in the logs
4. Choose a Service Token Duration. This sets the expiration date for the token
5. Select Generate token. You will see the generated Client ID and Client Secret for the service token

      This is the only time Cloudflare Access will display the Client Secret. If you lose the Client Secret, you will need to rotate the service token
2. Configure the Cloudflare Access integration within [NuxtHub admin](https://admin.hub.nuxt.com/)
1. In the [NuxtHub admin](https://admin.hub.nuxt.com/), go to Projects → Settings → General → Cloudflare Access
2. Provide the Client ID and Client Secret generated in the previous step
3. Enable Cloudflare Access on the Pages project

1. On the [Cloudflare dashboard](https://dash.cloudflare.com/login?to=/:account/workers-and-pages) → Workers & Pages → Your Pages project
2. Go to Settings → General → Access Policy
3. Select Enable to create a Cloudflare Access application.

      The default policy covers the preview environments on the `pages.dev` subdomain, adds an allow policy with all members of the account, and uses the email one-time-pin IdP.
4. Add an Access policy to permit the service token

1. In [Zero Trust](https://one.dash.cloudflare.com/), go to Access → Applications and select the application
2. Create a new policy with the name "NuxtHub" and the action Service Auth
3. Enable the 401 Response boolean
4. Within Configure rules, set Selector to Service Token and the value to the service token created earlier
5. Save the policy
5. Optionally edit your Allow Access policy

Learn more about Cloudflare Access policies on Cloudflare's documentation.

6. Optionally add additional domains to your Access application

1. In [Zero Trust](https://one.dash.cloudflare.com/), go to Access → Applications and select the application
2. From the header, select Overview
3. Add additional application domains, such as the production domain, or any custom domains assigned to the project

### [Importing Pages projects](https://hub.nuxt.com/docs/recipes/cloudflare-access\#importing-pages-projects)

We plan to directly support importing existing Pages projects that are protected with Cloudflare Access enabled in the future.

Currently, you will need to temporarily create an Access application which sets a Bypass policy for Everyone on the project's default pages.dev domain and the path `/api/_hub/manifest`.

## [Service token expiry and rotation](https://hub.nuxt.com/docs/recipes/cloudflare-access\#service-token-expiry-and-rotation)

### [Service token expiry](https://hub.nuxt.com/docs/recipes/cloudflare-access\#service-token-expiry)

When a service token is expired, it can be rotated from the Cloudflare dashboard.

1. In [Zero Trust](https://one.dash.cloudflare.com/), go to Access → Service Auth → Service Tokens
2. Click `...` on the expired token
3. Select Rotate

The duration of active service tokens can be extended by refreshing it from the Zero Trust dashboard

### [Service token rotation](https://hub.nuxt.com/docs/recipes/cloudflare-access\#service-token-rotation)

If a service token is rotated, the new Client Secret needs to be provided on [NuxtHub admin](https://admin.hub.nuxt.com/).

1. In the [NuxtHub admin](https://admin.hub.nuxt.com/), go to Projects → Settings → General → Cloudflare Access
2. Click Disable integration
3. Provide the Client ID and Client Secret generated in the previous step
4. Click Enable integration

## [Remote storage](https://hub.nuxt.com/docs/recipes/cloudflare-access\#remote-storage)

These steps will cover using [remote storage](https://hub.nuxt.com/docs/getting-started/remote-storage) with an environment protected by Cloudflare Access.

1. Open `.env`
2. Set the following variables with your service token's Client ID and Client Secret

   - `NUXT_HUB_CLOUDFLARE_ACCESS_CLIENT_ID`
   - `NUXT_HUB_CLOUDFLARE_ACCESS_CLIENT_SECRET`

A separate service token can optionally be created only for local development

No configuration is required if using [Cloudflare WARP](https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/) with Cloudflare Zero Trust, as WARP handles authenticating with Cloudflare Access

## [CLI](https://hub.nuxt.com/docs/recipes/cloudflare-access\#cli)

The following environment variables can be passed to the CLI

- `NUXT_HUB_CLOUDFLARE_ACCESS_CLIENT_ID`
- `NUXT_HUB_CLOUDFLARE_ACCESS_CLIENT_SECRET`

Terminal

```
export NUXT_HUB_CLOUDFLARE_ACCESS_CLIENT_ID=""
export NUXT_HUB_CLOUDFLARE_ACCESS_CLIENT_SECRET=""
npx nuxthub database migrations list --preview

```

## [`nuxt.dev` subdomain with Cloudflare Access](https://hub.nuxt.com/docs/recipes/cloudflare-access\#nuxtdev-subdomain-with-cloudflare-access)

Due to a technical Cloudflare limitation, when using Cloudflare Access with NuxtHub, the nuxt.dev subdomain is unavailable.

If the nuxt.dev subdomain is the primary domain, enabling the Cloudflare Access integration will set the primary domain to the pages.dev subdomain.

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/3.recipes/6.cloudflare-access.md)

[PostgreSQL\\
\\
Learn how to use PostgreSQL in your Nuxt application deployed on Cloudflare Workers / Pages and how to speed up your queries using Hyperdrive.](https://hub.nuxt.com/docs/recipes/postgres)

## Nuxt Pre-rendering Guide
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Pre-rendering

Pre-render pages at build time for maximum performance and avoid CPU usage on the server.

When using NuxtHub, you need to build your application with the [`nuxt build`](https://nuxt.com/docs/api/commands/build) in order to keep your server when deploying your application.

However, you can also pre-render your pages at build time to improve performance and avoid CPU usage on the server.

This is possible thanks to **Nuxt's Hybrid Rendering** to allow different caching rules per route.

## [Route Rules](https://hub.nuxt.com/docs/recipes/pre-rendering\#route-rules)

### [Globally](https://hub.nuxt.com/docs/recipes/pre-rendering\#globally)

You can define route rules in your `nuxt.config.ts` to specify how each route should be rendered:

nuxt.config.ts

```
export default defineNuxtConfig({
  routeRules: {
    '/': { prerender: true }
  }
})

```

When running `nuxt build`, Nuxt will pre-render the `/` route and save the `index.html` file in the output directory.

When deploying with NuxtHub on Cloudflare Pages, it will serve the pre-rendered HTML file directly from the edge for maximum performance and avoid CPU usage on the server.

### [Page Level](https://hub.nuxt.com/docs/recipes/pre-rendering\#page-level)

It is also possible to define route rules at the page level using the [`defineRouteRules`](https://nuxt.com/docs/api/utils/define-route-rules) util in the page component:

pages/index.vue

```
<script setup lang="ts">
defineRouteRules({
  prerender: true
})
</script>

<template>
  <h1>Hello world!</h1>
</template>

```

This is equivalent of our example above in the `nuxt.config.ts` file.

**Notes:**

- A rule defined in `~/pages/foo/bar.vue` will be applied to `/foo/bar` requests.
- A rule in `~/pages/foo/[id].vue` will be applied to `/foo/**` requests.

As this is an experimental feature, you need to enable it in your `nuxt.config.ts` files with `experimental: { inlineRouteRules: true }`.

## [Dynamic Pre-rendering](https://hub.nuxt.com/docs/recipes/pre-rendering\#dynamic-pre-rendering)

In some cases, you may want to Nuxt to pre-render other pages when pre-rendering a specific page.

This is useful when pre-rendering all the blog posts when pre-rendering the blog index page. To achieve this, we can use the [`prerenderRoutes`](https://nuxt.com/docs/api/utils/prerender-routes) util in the page component:

pages/blog/index.vue

```
<script setup lang="ts">
// Pre-render the /blog page
defineRouteRules({ prerender: true })

const { data: posts } = await useFetch('/api/posts')

// Tell Nuxt to pre-render all blog posts
prerenderRoutes(posts.value.map(post => `/blog/${post.slug}`))
</script>

```

It is important to tell Nuxt to pre-render the `/blog` using the `defineRouteRules`, we can also do it globally in the `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  routeRules: {
    // If not using `defineRouteRules` in the page component
    '/blog': { prerender: true }
  }
})

```

### [Using a Nuxt Module](https://hub.nuxt.com/docs/recipes/pre-rendering\#using-a-nuxt-module)

You can also use a [local Nuxt module](https://nuxt.com/docs/guide/going-further/modules) to pre-render dynamic pages, which is particularly useful if you don't have a single root page (such as `/blog`) but still need to pre-render specific routes, such as `/page-1`, `/parent/page-2`, and so on.

modules/prerender-routes.ts

```
import { defineNuxtModule, addPrerenderRoutes } from '@nuxt/kit'

export default defineNuxtModule({
  meta: {
    name: 'nuxt-prerender-routes',
  },
  async setup() {
    const pages = await getDynamicPages()
    addPrerenderRoutes(pages)
  },
})

async function getDynamicPages(): string[] {
  // Replace this function with the logic for retrieving the slugs for your pages.
  return ['/page-1', '/parent/page-2']
}

```

## [Pre-render All Pages](https://hub.nuxt.com/docs/recipes/pre-rendering\#pre-render-all-pages)

To have the same behavior as [`nuxt generate`](https://nuxt.com/docs/api/commands/generate) while keeping the server part, you can pre-render all pages by configuring the `nitro.prerender` option in the `nuxt.config.ts`:

nuxt.config.ts

```
export default defineNuxtConfig({
  nitro: {
    prerender: {
      // Pre-render the homepage
      routes: ['/'],
      // Then crawl all the links on the page
      crawlLinks: true
    }
  }
})

```

When running `nuxt build`, Nuxt will pre-render all pages and save the `index.html` file in the `dist/` directory.

Learn more about Nuxt prerendering.

### [Cloudflare 100 routes limit](https://hub.nuxt.com/docs/recipes/pre-rendering\#cloudflare-100-routes-limit)

NuxtHub will generate a [`dist/_routes.json`](https://developers.cloudflare.com/pages/functions/routing/#create-a-_routesjson-file) for Cloudflare Pages, but it has a limit of 100 excluded routes (used for static assets).

As each pre-rendered page will be added to the exclude list, we recommend to add your known pre-rendered pattern in the `nitro.cloudflare.pages.routes.exclude` option:

nuxt.config.ts

```
export default defineNuxtConfig({
  // ...
  nitro: {
    cloudflare: {
      pages: {
        routes: {
          exclude: [\
            // we know that all docs and blog pages are pre-rendered\
            '/docs/*',\
            '/blog/*'\
          ]
        }
      }
    }
  }
})

```

## [Caveats](https://hub.nuxt.com/docs/recipes/pre-rendering\#caveats)

If you are using authentication in your application such as [`nuxt-auth-utils`](https://github.com/Atinux/nuxt-auth-utils), you need to remember that the authentication state will not be available during the pre-rendering process.

For example, if you have a header component that either display the logged in user or a login button, you need to wrap the logic inside the [`<AuthState>`](https://github.com/atinux/nuxt-auth-utils?tab=readme-ov-file#authstate-component) component to display a placeholder while the page is being pre-rendered.

components/AppHeader.vue

```
<script setup lang="ts">
const { loggedIn, user } = useUserSession()

const links = [\
  { label: 'Docs', to: '/docs' },\
  { label: 'Blog', to: '/blog' }\
]
</script>

<template>
  <UHeader title="ACME" :links="links">
    <template #right>
      <AuthState>
        <UButton v-if="loggedIn" to="/profile">{{ user.name }}</UButton>
        <UButton v-else to="/login">Login</UButton>
        <template #placeholder>
          <!-- Display loading state -->
          <UButton :loading="true" />
        </template>
      </AuthState>
  </template>
</template>

```

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/3.recipes/3.pre-rendering.md)

[Drizzle ORM\\
\\
Learn how to setup Drizzle ORM with NuxtHub.](https://hub.nuxt.com/docs/recipes/drizzle) [Debugging\\
\\
Learn how to debug your Nuxt application which cannot start on Cloudflare Workers / Pages.](https://hub.nuxt.com/docs/recipes/debug)

## Deploy Nuxt Applications
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Deploy Nuxt on the Edge

Learn how to host your full-stack Nuxt application globally with minimal configuration.

To deploy your Nuxt application on the Edge, we use Cloudflare Pages. Therefore, we require you to create a [Cloudflare](https://www.cloudflare.com/) account. **You can deploy NuxtHub projects with a free Cloudflare account.**

The [NuxtHub Admin](https://admin.hub.nuxt.com/) is made to simplify your experience with NuxtHub, enabling you to effortlessly manage teams and projects, as well as deploying NuxtHub application with zero-configuration on your Cloudflare account.

DeploymentsDeployment Details

![NuxtHub Admin Deployments](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-project.png)

![NuxtHub Admin Deployment](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-deployment.png)

## [Production vs Preview Deployments](https://hub.nuxt.com/docs/getting-started/deploy\#production-vs-preview-deployments)

NuxtHub supports two types of deployments: production and preview.

### [Production Deployments](https://hub.nuxt.com/docs/getting-started/deploy\#production-deployments)

- When setting up your project, you can specify a production branch (defaults to `main`)
- Successful deployments to the production branch will be:

  - Accessible via your primary domain
  - Also available at `<commit>.<project>.pages.dev`

### [Preview Deployments](https://hub.nuxt.com/docs/getting-started/deploy\#preview-deployments)

- Any deployment from a non-production branch (including pull requests) is considered a preview
- Successful preview deployments are accessible via:

  - `<commit>.<project>.pages.dev`
  - `<branch>.<project>.pages.dev`

Toggle between production and preview environments in the NuxtHub admin using the "Preview mode" switch.

## [NuxtHub CLI](https://hub.nuxt.com/docs/getting-started/deploy\#nuxthub-cli)

Deploy your local project with a single command:

Terminal

```
npx nuxthub deploy

```

The command will:

1. Ensure you are logged in on [admin.hub.nuxt.com](https://admin.hub.nuxt.com/)
2. Make sure you linked your Cloudflare account
3. Link your local project with a NuxtHub project or help you create a new one
4. Build your Nuxt project with the correct preset
5. Deploy it to your Cloudflare account with all the necessary resources (D1, KV, R2, etc.)
6. Provide you with a URL to access your project with a free `<my-app>.nuxt.dev` domain

You can also install the [NuxtHub CLI](https://github.com/nuxt-hub/cli) globally with: `npm i -g nuxthub`.

### [Usage with CI/CD](https://hub.nuxt.com/docs/getting-started/deploy\#usage-with-cicd)

If you are using GitHub for your project, jump to the [Github Action](https://hub.nuxt.com/docs/getting-started/deploy#github-action) section.

The `nuxthub deploy` command is designed to run **non-interactively** in CI/CD environments. It won’t prompt for additional input (such as logging in or linking the project). As long as the required environment variables are set, deployment will proceed automatically.

To integrate the `nuxthub deploy` command within your CI/CD pipeline, set the following environment variables:

- `NUXT_HUB_PROJECT_KEY` – Your project key available in:

  - Your project settings in the [NuxtHub Admin](https://admin.hub.nuxt.com/)
  - Your `.env` file (if you ran `npx nuxthub link`)
- `NUXT_HUB_USER_TOKEN` – Your personal token, available in **User settings** → **Tokens** in the [NuxtHub Admin](https://admin.hub.nuxt.com/)

**Example command:**

Terminal

```
NUXT_HUB_PROJECT_KEY=<my-project-key> NUXT_HUB_USER_TOKEN=<my-user-token> npx nuxthub deploy

```

This will authenticate your user and link your NuxtHub project for deployment.

For security, **do not hardcode these values**. Instead, store them as environment variables in your CI/CD pipeline.

## [GitHub Action](https://hub.nuxt.com/docs/getting-started/deploy\#github-action)

After linking a GitHub repository to your project, NuxtHub automatically adds a GitHub Actions workflow to automatically deploy your application on every commit using the [NuxtHub GitHub Action](https://github.com/marketplace/actions/deploy-to-nuxthub).

NuxtHub integrates with [GitHub deployments](https://docs.github.com/en/actions/managing-workflow-runs-and-deployments/managing-deployments). This allows you to:

- [View deployment statuses within GitHub](https://docs.github.com/en/actions/managing-workflow-runs-and-deployments/managing-deployments/viewing-deployment-history)
- [Setup deployment concurrency](https://docs.github.com/en/actions/use-cases-and-examples/deploying/deploying-with-github-actions#using-concurrency)
- [Require approvals for deploying to environments](https://docs.github.com/en/actions/managing-workflow-runs-and-deployments/managing-deployments/reviewing-deployments)

After deploying from a pull request, NuxtHub automatically adds a comment with information about the deployment.

![NuxtHUb GitHub Action commenting on pull requests](https://hub.nuxt.com/_ipx/s_926x520/images/docs/nuxthub-github-app-pr-comment.png)

You can customise the workflow to tailor to any specific custom DevOps requirements.

Projects created prior to releasing our GitHub Action uses Pages CI for deployments. Read our [migration guide](https://hub.nuxt.com/docs/getting-started/deploy#linking-a-repository-to-existing-projects).

### [Default workflow](https://hub.nuxt.com/docs/getting-started/deploy\#default-workflow)

The GitHub Workflow added to your repository is automatically tailored to your project's package manager. This is an example of a workflow added for a project using pnpm.

We support pnpm, yarn, npm and Corepack. If you use a different package manager, you can customise the generated `nuxthub.yml` GitHub Action.

.github/workflows/nuxthub.yml

```
name: Deploy to NuxtHub
on: push

jobs:
  deploy:
    name: "Deploy to NuxtHub"
    runs-on: ubuntu-latest
    permissions:
      contents: read
      id-token: write

    steps:
      - uses: actions/checkout@v4

      - name: Install pnpm
        uses: pnpm/action-setup@v4
        with:
          version: 10

      - name: Install Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 24
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install

      - name: Build & Deploy to NuxtHub
        uses: nuxt-hub/action@v2

```

Expand code

### [Options](https://hub.nuxt.com/docs/getting-started/deploy\#options)

#### [Inputs](https://hub.nuxt.com/docs/getting-started/deploy\#inputs)

The following input parameters can be provided to the GitHub Action. Learn more about [Workflow syntax for GitHub Actions](https://docs.github.com/en/actions/writing-workflows/workflow-syntax-for-github-actions#jobsjob_idstepswith) on GitHub's documentation.

directory

string

The directory of the Nuxt application to build.

output-directory

The output directory containing the built Nuxt application to deploy, relative to the directory specified in `directory`.

project-key

string

The project key of the NuxtHub project to deploy to. If the repository is linked to more than one project, project key is required.

#### [Outputs](https://hub.nuxt.com/docs/getting-started/deploy\#outputs)

The GitHub Action provides the following outputs that you can use in subsequent workflow steps.

environment

'production' \| 'preview'

The environment of the deployment (e.g. production, preview).

deployment-url

string

The URL of the deployment. For preview environments, it links to the deployment of the commit.Examples:

- [https://example.nuxt.dev](https://example.nuxt.dev/) (main)
- [https://abcdefg.example.pages.dev](https://abcdefg.example.pages.dev/) (feat/example)

branch-url

string

The permanent URL for the current branch deployment.Examples:

- [https://example.nuxt.dev](https://example.nuxt.dev/) (main)
- [https://feat-example.example.pages.dev](https://feat-example.example.pages.dev/) (feat/example)

environment-url

string

The permanent URL of the environment.Examples:

- [https://hello-world-staging.example.workers.dev](https://hello-world-staging.example.workers.dev/) ('staging' environment)

### [Environment Variables & Secrets](https://hub.nuxt.com/docs/getting-started/deploy\#environment-variables-secrets)

The NuxtHub GitHub Action builds the Nuxt application using build-time environment variables and secrets specified within NuxtHub Admin.

You can scope variables to only be available during build-time, This is useful in cases such as `NUXT_UI_PRO_LICENSE`.

### [Setup](https://hub.nuxt.com/docs/getting-started/deploy\#setup)

#### [Creating a new project](https://hub.nuxt.com/docs/getting-started/deploy\#creating-a-new-project)

When creating a new project from a template, or importing a Git repository, the GitHub Action workflow will automatically be set up for you.

#### [Linking a repository to existing projects](https://hub.nuxt.com/docs/getting-started/deploy\#linking-a-repository-to-existing-projects)

Link your project to a GitHub repository within [NuxtHub Admin](https://admin.hub.nuxt.com/) → Projects → `<Your Project>` → Settings → General → Git Repository

#### [Migration from Cloudflare CI to GitHub Actions](https://hub.nuxt.com/docs/getting-started/deploy\#migration-from-cloudflare-ci-to-github-actions)

Migrate your project to GitHub Actions within [NuxtHub Admin](https://admin.hub.nuxt.com/) → Projects → `<Your Project>` → Settings → General → Git Repository → Begin Migration.

Only non-secret environment variables are automatically copied to GitHub. Existing environment secrets are not automatically migrated to GitHub, and should be updated to sync them to GitHub.

#### [Monorepo setup](https://hub.nuxt.com/docs/getting-started/deploy\#monorepo-setup)

Our GitHub integration supports deploying multiple applications from the same repository.

When linking a Git repository, set "project root directory" to the base folder of your Nuxt application corresponding to that NuxtHub project.

When a repository is already linked to at least one project, additional projects linked will have the generated GitHub Actions workflow named `nuxthub-<projectSlug>.yml`.

When multiple projects are linked to the same repository, the [`project-key`](https://hub.nuxt.com/docs/getting-started/deploy#inputs) input parameter must be specified on each [Deploy to NuxtHub GitHub Action](https://github.com/marketplace/actions/deploy-to-nuxthub).

**Current limitations**

- Separate applications should be deployed using different workflow jobs.

## [GitLab CI](https://hub.nuxt.com/docs/getting-started/deploy\#gitlab-ci)

This section will guide you to implement the GitLab CI.
The integration with GitLab CI builds on the [Usage with CI/CD](https://hub.nuxt.com/docs/getting-started/deploy#usage-with-cicd) section,
make sure you have those two variables `NUXT_HUB_PROJECT_KEY` and `NUXT_HUB_USER_TOKEN`.

### [User Token Variable](https://hub.nuxt.com/docs/getting-started/deploy\#user-token-variable)

It is good practice to place the user token inside GitLab CI Variables.

1. Open your Repository (on GitLab) > Settings > CI/CD > Variables
2. Click on _Add variable_
3. Set Visibility to Masked and hidden
4. Remove protected Flag (since we may use this variable also on non-protected branches)
5. Give a Key name = `NUXT_HUB_USER_TOKEN`
6. Paste your `NUXT_HUB_USER_TOKEN` — Your personal token, available in **User settings** → **Tokens** in the [NuxtHub Admin](https://admin.hub.nuxt.com/)
7. Click Add variable

The `NUXT_HUB_PROJECT_KEY` is used later in [Configure Projects for GitLab](https://hub.nuxt.com/docs/getting-started/deploy#configure-projects-for-gitlab).

### [Project Configuration](https://hub.nuxt.com/docs/getting-started/deploy\#project-configuration)

1. Create a `.gitlab-ci.yml` in your repository root
2. Paste the following configuration

.gitlab-ci.yml

```
# if one job fails, pipeline should fail
workflow:
  auto_cancel:
    on_job_failure: all

variables:
  APP_PATH: "PATH/TO/YOUR/APP"
  NUXT_HUB_PROJECT_KEY: "YOUR_NUXT_HUB_PROJECT_KEY"

# add additional steps as needed
stages:
  - deploy
  - callback

deploy_project:
  stage: deploy
  # here we use Bun, you can change this.
  image: "oven/bun:slim"
  script:
    - echo "Deploying project_a app..."
    - cd $APP_PATH
    # you can not use node_modules from cache, since nuxthub needs write access
    - bun install
    # if you set up your variables correctly this should deploy successfully
    - bunx nuxthub deploy
  rules:
    # here we configure auto deploy on branch: staging and main
    - if: '$CI_COMMIT_BRANCH == "staging" || $CI_COMMIT_BRANCH == "main"'

manual_deploy_project:
  stage: deploy
  image: "oven/bun:slim"
  when: manual
  script:
    - echo "Deploying project_a app..."
    - cd $APP_PATH
    - bun install
    - bunx nuxthub deploy

callback:
  stage: callback
  script:
    - echo "Deploy reached."

```

Expand code

If you have a monorepo with multiple projects (apps), do this step for each of your project (e.g. `./apps/project-foo/.gitlab-ci.yml`). Then follow the [Monorepo Setup](https://hub.nuxt.com/docs/getting-started/deploy#monorepo-setup-1) section.

The `callback` job is needed to mark the pipeline as successfully,
especially if `deploy_project` has not run.

You can avoid this by setting `allow-failure: true` but this will result in other drawbacks.
Or simply deploy on every branch, which results in more traffic.

You can always deploy from your working branches, just use the manual trigger.
Deployed branches different from 'main' (or what you configured in nuxthub dashboard as your main) will be marked as `preview`.

### [Monorepo Setup](https://hub.nuxt.com/docs/getting-started/deploy\#monorepo-setup-1)

If you have a monorepo with multiple apps (e.g. `./apps/project-foo`), then we make sure our pipelines can run parallel.

1. Create in your repository root a `.gitlab-ci.yml`
2. Paste the following configuration

.gitlab-ci.yml

```
# if one job fails, pipeline should fail
workflow:
  auto_cancel:
    on_job_failure: all
stages:
  - trigger_apps

trigger_project_a:
  stage: trigger_apps
  rules:
    - changes:
        - "apps/project-foo/**/*"
  trigger:
    strategy: depend
    include:
      - local: "apps/project-foo/.gitlab-ci.yml"

trigger_project_b:
  stage: trigger_apps
  rules:
    - changes:
        - "apps/project-bar/**/*"
  trigger:
    strategy: depend
    include:
      - local: "apps/project-bar/.gitlab-ci.yml"

add_manual_triggers:
  stage: trigger_apps
  trigger:
    strategy: depend
    include:
      - local: ".manual-triggers.yml"

```

Expand code

Change the paths to your own project paths.

This configuration separates your main pipeline from child pipelines, each project (app) has its own `.gitlab-ci.yml` Those child pipelines are only triggered if changes are made in their app folder.

Sometimes GitLab changes are not recognized (previous pipeline failed and new push has no changes in app folder), for that case, you can add manual triggers for the child pipelines by adding a `.manual-triggers.yml` in the project root.

.manual-triggers.yml

```
workflow:
  auto_cancel:
    on_job_failure: all

stages:
  - trigger_apps
  - callback

trigger_project_a:
  stage: trigger_apps
  when: manual
  trigger:
    strategy: depend
    include:
      - local: "apps/project-foo/.gitlab-ci.yml"

trigger_project_b:
  stage: trigger_apps
  when: manual
  trigger:
    strategy: depend
    include:
      - local: "apps/project-bar/.gitlab-ci.yml"

callback:
  stage: callback
  script:
    - echo "manual triggers set"

```

Expand code

With the options `depends` and `workflow.auto_cancel.on_job_failure: all` a pipeline is failed, if one job fails.
This assures a clean main / staging branch. Change it to your needs.

## [Cloudflare Pages CI](https://hub.nuxt.com/docs/getting-started/deploy\#cloudflare-pages-ci)

Importing an existing Cloudflare Pages project that is already linked to a Git repository will use [Cloudflare Pages CI](https://pages.cloudflare.com/) to deploy your project.

- Each commit will trigger a new deployment within Pages CI.
- Environment variables set within NuxtHub Admin will be available during CI.

All existing projects with a Git repository linked to Cloudflare Pages prior to our GitHub Action being released uses [Cloudflare Pages CI](https://pages.cloudflare.com/) for automated deployments.

You can migrate from Cloudflare Pages CI to [GitHub Actions](https://hub.nuxt.com/docs/getting-started/deploy#github-action) at any time. Read our [migration guide](https://hub.nuxt.com/docs/getting-started/deploy#linking-a-repository-to-existing-projects).

## [Self-hosted](https://hub.nuxt.com/docs/getting-started/deploy\#self-hosted)

You can deploy your project on your own Cloudflare account without using the NuxtHub Admin.

For that, you need to create the necessary resources in your Cloudflare account and configure your project to use them ( [D1](https://dash.cloudflare.com/?to=/:account/workers/d1), [KV](https://dash.cloudflare.com/?to=/:account/workers/kv/namespaces), [R2](https://dash.cloudflare.com/?to=/:account/r2/new), etc.).

You only need to create these resources if you have explicitly enabled them in the Hub Config.

Then, create a [Cloudflare Pages project](https://dash.cloudflare.com/?to=/:account/pages/new/provider/github) and link your GitHub or GitLab repository and choose the Nuxt Framework preset in the build settings.

Once your project is created, open the `Settings` tab and set:

- Runtime > Compatibility flags

  - Add the `nodejs_compat` flag
- Bindings

  - KV namespace: `KV` and select your KV namespace created
  - KV namespace: `CACHE` and select your KV namespace for caching created
  - R2 bucket: `BLOB` and select your R2 bucket created
  - D1 database: `DB` and select your D1 database created
  - AI: `AI`
  - Browser: `BROWSER`
  - Vectorize: `VECTORIZE_<index name in upper case>` and select your Vectorize index created




    ```
    # Create the Vectorize index manually using
    npx wrangler vectorize create <index-name> --dimensions=<dimensions> --metric=<metric>

    ```

Go back to the `Deployment` tab and retry the last deployment by clicking on `...` then `Retry deployment`.

Once the deployment is done, you should be able to use `npx nuxt dev --remote` after [configuring the remote storage](https://hub.nuxt.com/docs/getting-started/remote-storage#self-hosted)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/1.getting-started/3.deploy.md)

[Installation\\
\\
Learn how to create a NuxtHub project or add it to your current Nuxt project.](https://hub.nuxt.com/docs/getting-started/installation) [Remote Storage\\
\\
Access your remote data locally or from external Nuxt projects with our secured proxy.](https://hub.nuxt.com/docs/getting-started/remote-storage)

## Blob Presigned URLs
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

October 14, 2024

# Blob Presigned URLs

It is now possible to upload files to your R2 bucket using presigned URLs with zero configuration.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

It is now possible to upload files to your R2 bucket using presigned URLs with zero configuration.

This feature is available on all [NuxtHub plans](https://hub.nuxt.com/pricing) and comes with the [v0.7.32](https://github.com/nuxt-hub/core/releases/tag/v0.7.32) release of `@nuxthub/core`.

## [Why presigned URLs?](https://hub.nuxt.com/changelog/blob-presigned-urls\#why-presigned-urls)

By allowing users to upload files to your R2 bucket using presigned URLs, you can:

- Reduce the server load
- Direct client-to-storage uploads, saving bandwidth and costs
- Use a secure and performant way to upload files to your R2 bucket
- By-pass the Workers limitation (100MiB max payload size) using regular upload

## [How does it work?](https://hub.nuxt.com/changelog/blob-presigned-urls\#how-does-it-work)

This is a diagrame of the process of creating a presigned URL and uploading a file to R2:

![NuxtHub presigned URLs to upload files to R2](https://hub.nuxt.com/_ipx/s_915x515/images/docs/blob-presigned-urls.png)

In order to create the presigned URL, we created the [`hubBlob().createCredentials()`](https://hub.nuxt.com/docs/features/blob#createcredentials) method.

This method will create temporary access credentials that can be optionally scoped to prefixes or objects in your bucket.

```
const {
  accountId,
  bucketName,
  accessKeyId,
  secretAccessKey,
  sessionToken
} = await hubBlob().createCredentials({
  permission: 'object-read-write',
  pathnames: ['only-this-file.png']
})

```

With these credentials, you can now use the [aws4fetch](https://github.com/mhart/aws4fetch) library to create a presigned URL that can be used to upload a file to R2.

```
import { AwsClient } from 'aws4fetch'

// Create the presigned URL
const client = new AwsClient({ accessKeyId, secretAccessKey, sessionToken })
const endpoint = new URL(
  '/only-this-file.png',
  `https://${bucketName}.${accountId}.r2.cloudflarestorage.com`
)
const { url } = await client.sign(endpoint, {
  method: 'PUT',
  aws: { signQuery: true }
})

```

Checkout the example on how to create a presigned URL with NuxtHub.

## [Alternative](https://hub.nuxt.com/changelog/blob-presigned-urls\#alternative)

If you don't want to use presigned URLs and want to upload files bigger than 100MiB, you can use the [NuxtHub Multipart Upload](https://hub.nuxt.com/docs/features/blob#handlemultipartuploadd) feature.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Automatic Database Migrations\\
\\
Database migrations now automatically apply during development and deployment.](https://hub.nuxt.com/changelog/database-migrations) [Introducing hubVectorize()\\
\\
Vectorize is a globally distributed vector database that enables you to build full-stack, AI-powered applications with Nuxt.](https://hub.nuxt.com/changelog/hub-vectorize)

## Libsodium in Cloudflare
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

Tutorial·  December 18, 2024

# How to use Libsodium in Cloudflare Workers

Learn how to leverage NaCL to crypto box seal values, useful when working with GitHub repository secrets.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

While working on the NuxtHub's GitHub app and action, we decided to synchronise the environment variables and secrets to the repository so both the runtime and build environments would be similar.

## [The problem](https://hub.nuxt.com/blog/libsodium-cloudflare-workers\#the-problem)

When creating repository secrets with the GitHub REST API, you need to [encrypt them using the Libsodium library](https://docs.github.com/en/rest/guides/encrypting-secrets-for-the-rest-api?apiVersion=2022-11-28).

```
import libsodium from 'libsodium-wrappers'

// Check if libsodium is ready and then proceed.
await sodium.ready

const publicKey = 'repositoryProductionPublicKeyAsBase64'
// Convert base64 key to Uint8Array
const binaryPublicKey = Uint8Array.from(Buffer.from(publicKey.data.key, 'base64'))
// Convert string value to Uint8Array
const binarySecretValue = new TextEncoder().encode('my-secret-value')
// Encrypt with libsodium
const encryptedBytes = libsodium.crypto_box_seal(binaryValue, binaryKey)
// Convert to base64
const encryptedBase64 = Buffer.from(encryptedBytes).toString('base64')

// Call GitHub API with the encryptedBase64 value

```

By trying the [libsodium-wrappers](https://github.com/jedisct1/libsodium.js) NPM library, we quickly hit the [TypeError: Cannot read properties of undefined (reading 'href')](https://github.com/jedisct1/libsodium.js/issues/323) error when awaiting `.ready` .

We decided to not hack around it like [suggested here](https://github.com/jedisct1/libsodium.js/issues/212#issuecomment-1181238495).

## [Inside Libsodium: NaCl](https://hub.nuxt.com/blog/libsodium-cloudflare-workers\#inside-libsodium-nacl)

I decided to checkout the Libsodium documentation which mentions that the library is a portable, cross-compilable, installable, and package-able fork of [NaCl](https://nacl.cr.yp.to/), with a compatible but extended API to improve usability even further.

As we only use the `crypto_box_seal` function from Libsodium, I believed that we could directly use a compatible NaCl library that would work on edge runtimes.

This is how I found the [TweetNaCl](https://tweetnacl.js.org/) library that works perfectly in Cloudflare Workers.

One problem: `tweetnacl` does not have a `crypto_box_seal` method, so what to do?

## [Learning about Sealed Boxes](https://hub.nuxt.com/blog/libsodium-cloudflare-workers\#learning-about-sealed-boxes)

Libsodium did a great job explaining the [Sealed boxes](https://libsodium.gitbook.io/doc/public-key_cryptography/sealed_boxes) concept.

Sealed boxes are designed to anonymously send messages to a recipient given their public key.

Only the recipient can decrypt these messages using their private key. While the recipient can verify the integrity of the message, they cannot verify the identity of the sender.

A message is encrypted using an ephemeral key pair, with the secret key being erased right after the encryption process.:br

Without knowing the secret key used for a given message, the sender cannot decrypt the message later. Furthermore, without additional data, a message cannot be correlated with the identity of its sender.

The documentation also gives us the algorithm implementation details:

```
ephemeral_pk ‖ box(m, recipient_pk, ephemeral_sk, nonce=blake2b(ephemeral_pk ‖ recipient_pk))

```

We can re-create the crypto box seal algorithm with NaCL:

1. Generate an ephemeral key pair using `nacl.box.keyPair()`
2. Derive the nonce using Blake2b cryptographic hash function
3. Encrypt the message with `nacl.box()` by combining the ephemeral secret key and the repository public key
4. Combine the ephemeral public key and our encrypted message

## [The Solution](https://hub.nuxt.com/blog/libsodium-cloudflare-workers\#the-solution)

To create our edge-compatible `crypto_box_seal` function using `tweetnacl` and `blakejs`.

First, we need to install the dependencies:

Terminal

```
npm i tweetnacl blakejs

```

Then create the `cryptoBoxSeal` and `deviceNonce` methods in a Nuxt server util:

server/utils/crypto.ts

```
import nacl from 'tweetnacl'
import { blake2b } from 'blakejs'

// Function to derive the nonce using Blake2b
function deriveNonce(ephemeralPublicKey: Uint8Array, recipientPublicKey: Uint8Array) {
  // Concatenate ephemeralPublicKey ‖ recipientPublicKey
  const input = new Uint8Array(
    ephemeralPublicKey.length + recipientPublicKey.length
  )
  input.set(ephemeralPublicKey, 0)
  input.set(recipientPublicKey, ephemeralPublicKey.length)

  // Derive the nonce using Blake2b
  return blake2b(input, undefined, nacl.box.nonceLength)
}

export function cryptoBoxSeal(message: Uint8Array, recipientPublicKey: Uint8Array) {
  // Generate ephemeral key pair
  const ephemeralKeyPair = nacl.box.keyPair()

  // Derive the nonce using Blake2b
  const nonce = deriveNonce(ephemeralKeyPair.publicKey, recipientPublicKey)
  // Encrypt the message using the ephemeral secret key and recipient's public key
  const encryptedMessage = nacl.box(
    message,
    nonce,
    recipientPublicKey,
    ephemeralKeyPair.secretKey
  )

  // Combine the ephemeral public key and encrypted message
  const sealedBox = new Uint8Array(
    ephemeralKeyPair.publicKey.length + encryptedMessage.length
  )

  // Similar signature from libsodium
  // ephemeral_pk ‖ box(m, recipient_pk, ephemeral_sk, nonce=blake2b(ephemeral_pk ‖ recipient_pk))
  sealedBox.set(ephemeralKeyPair.publicKey, 0)
  sealedBox.set(encryptedMessage, ephemeralKeyPair.publicKey.length)

  return sealedBox
}

```

Finally, we can replace our example above to use our new helper:

example.ts

```
- // Encrypt with libsodium
- const encryptedBytes = libsodium.crypto_box_seal(binaryValue, binaryKey)
+ // Encrypt using cryptoBoxSeal
+ const encryptedBytes = cryptoBoxSeal(binaryValue, binaryPublicKey)

```

That's it! This was a good opportunity to learn more on how encrypting secrets work for GitHub and not be afraid on diving into how librairies work under the hood.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to blog](https://hub.nuxt.com/blog)

Share:

[Using Cloudflare AI Models for User Experience\\
\\
Learn how I leverage Cloudflare AI models in Nuxt to improve my drawing app accessibility, SEO and User Experience.](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience)

## Open API Documentation
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Open API Documentation

Generate an Open API documentation for your Nuxt project with Scalar.

This is currently experimental and subject to change in the future.

## [Getting Started](https://hub.nuxt.com/docs/features/open-api\#getting-started)

NuxtHub uses Nitro's OpenAPI generation to access your Nuxt project's API.

To enable the API, you need to add enable Nitro's experimental `openAPI` feature. You can do this by adding the `nitro.experimental.openAPI` property to your `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  nitro: {
    experimental: {
      openAPI: true
    }
  }
})

```

After you deploy your project, NuxtHub Admin will showcase your API documentation using [Scalar](https://scalar.com/).

![Nuxt Open API Scalar integration](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-open-api.png)

You can define route handler meta (at build time) using the `defineRouteMeta` macro:

pages/api/ok.ts

```
defineRouteMeta({
  openAPI: {
    description: 'Test route description',
    parameters: [{ in: "query", name: "test", required: true }],
  },
});

export default defineEventHandler(() => "OK");

```

See swagger specification for available OpenAPI options.

## [Nuxt DevTools](https://hub.nuxt.com/docs/features/open-api\#nuxt-devtools)

In development, you can use Nuxt DevTools to access your API routes using the `Open API` or `Server Routes` tabs.

It list all the API routes in your project as well as providing a playground to send and test your endpoints.

Check out the [Nuxt DevTools](https://devtools.nuxt.com/) documentation for more information.

![NuxtHub Admin Cache](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxt-devtools-api-routes.png)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/open-api.md)

[Key Value\\
\\
Add a global, low-latency key-value data storage to your Nuxt application.](https://hub.nuxt.com/docs/features/kv) [Realtime\\
\\
Build realtime experiences with NuxtHub using Cloudflare Workers & Durable Objects.](https://hub.nuxt.com/docs/features/realtime)

## NuxtHub Worker Logs
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

May 7, 2025

# Worker logs with history on NuxtHub Admin

Worker logs are now available on NuxtHub Admin, allowing you to filter and analyze historical logs from your deployed Nuxt App.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://bsky.app/profile/atinux.com) [RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev) [AB\\
\\
Ahad Birang\\
\\
@farnabaz.dev](https://bsky.app/profile/farnabaz.dev)

Worker logs are available from [`@nuxthub/core >= v0.8.27`](https://github.com/nuxt-hub/core/releases/tag/v0.8.27). In the latest version, Worker Logs are enabled by default.

It is now possible to view, filter and analyze worker logs within the NuxtHub Admin.

The logs page are refactored to be more user-friendly and easier to use. The new UI is easier to read and allows you to view the whole log message. This new logs page is available for both Pages and Workers.

![Worker logs](https://hub.nuxt.com/_ipx/_/images/changelog/worker-logs-admin.png)

## [Enable Worker Logs](https://hub.nuxt.com/changelog/workers-logs-history\#enable-worker-logs)

Worker logs are enabled by default in the latest version of NuxtHub core module ( `@nuxthub/core >= v0.8.27`).

If you are using older versions and you cannot upgrade, you can enable Worker Logs by setting `hub.bindings.observability.logs` to `true` in your `nuxt.config.ts`.

```
export default defineNuxtConfig({
  hub: {
    bindings: {
      observability: {
        logs: true,
      },
    },
  },
});

```

Learn more about enabling Worker Logs and additional bindings.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Environments & Improved variable management\\
\\
Create additional deployment environments & revamped environment variable management](https://hub.nuxt.com/changelog/environments) [Introducing hubAutoRAG()\\
\\
Create fully-managed RAG pipelines to power your AI applications with accurate and up-to-date information.](https://hub.nuxt.com/changelog/hub-autorag)

## Worker Logs & Bindings
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

April 17, 2025

# Worker Logs & Additional Bindings

Support for Worker Logs and adding additional bindings for Worker projects.

[RA\\
\\
Rihan Arfan\\
\\
@rihan.dev](https://bsky.app/profile/rihan.dev)

This feature is available from [`@nuxthub/core >= v0.8.25`](https://github.com/nuxt-hub/core/releases/tag/v0.8.25)

Worker projects on NuxtHub can now enable Worker Logs, and associate additional bindings to deployments all from within the NuxtHub config. This opens the possibility of adding additional [databases](https://developers.cloudflare.com/d1/worker-api/), [R2 buckets](https://developers.cloudflare.com/r2/api/workers/workers-api-reference/), [service bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/service-bindings/), [rate limiting](https://developers.cloudflare.com/workers/runtime-apis/bindings/rate-limit/), [queues](https://developers.cloudflare.com/queues/configuration/javascript-apis/) and [more](https://developers.cloudflare.com/workers/runtime-apis/bindings/) to projects.

## [Worker Logs](https://hub.nuxt.com/changelog/observability-additional-bindings\#worker-logs)

Workers Logs lets you automatically collect, store, filter, and analyze logging data emitted from your Nuxt app. Currently, you can query it in the dashboard for each of your Workers projects within the Cloudflare Dashboard.

Logs include [invocation logs](https://developers.cloudflare.com/workers/observability/logs/workers-logs/#invocation-logs), [custom logs](https://developers.cloudflare.com/workers/observability/logs/workers-logs/#custom-logs), errors, and uncaught exceptions.

Learn more about enabling Worker Logs.

![Observability Overview](https://hub.nuxt.com/_ipx/_/images/docs/observability-overview.png)

Enable Worker Logs within `hub.bindings.observability.logs` in your `nuxt.config.ts`.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    bindings: {
      observability: {
        // enable with default settings
        logs: true,

        // customise settings
        logs: {
          head_sampling_rate: 0.5,
          invocation_logs: false
        }
      }
    }
  },

```

## [Additional bindings](https://hub.nuxt.com/changelog/observability-additional-bindings\#additional-bindings)

Additional bindings can be configured within `hub.bindings` in your `nuxt.config.ts`. All options are suggested via IntelliSense, however, you can refer to [Cloudflare's API documentation](https://developers.cloudflare.com/api/resources/workers/subresources/scripts/subresources/versions/methods/create/#(params)%200%20%3E%20(param)%20metadata%20%3E%20(schema)%20%3E%20(property)%20bindings) too.

Resources for additional bindings are not provisioned automatically like they are with NuxtHub features such as `hub.database`. You will need to create the resources manually from the Cloudflare dashboard.

Learn more about assigning additional bindings.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    bindings: {
      // <binding type>: {
      //   <BINDING NAME>: {
      //     // binding options
      //   }
      // }

      // additional cloudflare bindings
      analytics_engine: {
        ANALYTICS_TESTING: {
          dataset: 'testing'
        }
      },
      mtls_certificate: {
        CERT: {
          certificate_id: '<CERTIFICATE_ID>'
        }
      }
    }
  },

```

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Introducing hubAutoRAG()\\
\\
Create fully-managed RAG pipelines to power your AI applications with accurate and up-to-date information.](https://hub.nuxt.com/changelog/hub-autorag) [NuxtHub on Workers\\
\\
Deploy your Nuxt apps to Cloudflare Workers and build real-time experiences with zero configuration.](https://hub.nuxt.com/changelog/workers)

## Cloudflare Bindings Guide
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Additional features

Add additional Cloudflare resource bindings to deployments

Cloudflare offer additional resources that aren't directly supported in NuxtHub yet. You can add bindings to associate these resources to your NuxtHub project. Custom bindings can be configured within `hub.bindings` in your `nuxt.config.ts`.

Additional bindings are not provisioned automatically like they are with NuxtHub features such as [`hub.database`](https://hub.nuxt.com/docs/features/database). You will need to create the resources manually from the Cloudflare dashboard or [wrangler](https://developers.cloudflare.com/workers/wrangler/commands/).

You can add additional bindings to:

- Add additional [D1 databases](https://developers.cloudflare.com/d1/worker-api/), [R2 buckets](https://developers.cloudflare.com/r2/api/workers/workers-api-reference/) (blob), [KV namespaces](https://developers.cloudflare.com/kv/api/) & [analytics datasets](https://developers.cloudflare.com/analytics/analytics-engine/get-started/#2-write-data-points-from-your-worker)
- or use [service bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/service-bindings/), [rate limiting](https://developers.cloudflare.com/workers/runtime-apis/bindings/rate-limit/), [queues](https://developers.cloudflare.com/queues/configuration/javascript-apis/), and more

View all available binding types on the Cloudflare documentation.

## [Configuration](https://hub.nuxt.com/docs/features/additional-bindings\#configuration)

Properties on `hub.bindings`

compatibilityDate

string

Set a custom compatibility date.

Learn more on [Cloudflare's documentation](https://developers.cloudflare.com/workers/configuration/compatibility-dates/).

compatibilityFlags

string

Set additional compatibility flags, separated with a `space`.

Learn more on [Cloudflare's documentation](https://developers.cloudflare.com/workers/configuration/compatibility-flags/).

The [`nodejs_compat`](https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag) flag is always enabled.

observability

Observability configurations. View all options on the [observability docs](https://hub.nuxt.com/docs/getting-started/server-logs#cloudflare-dashboard).

hyperdrive

object

Hyperdrive configuration. Learn more about Hyperdrive on the [PostgreSQL docs](https://hub.nuxt.com/docs/recipes/postgres#hyperdrive).

> <BINDING NAME>
>
> string
>
> Binding name and Hyperdrive ID.

<additional binding type>

object

Refer to [Cloudflare's API documentation](https://developers.cloudflare.com/api/resources/workers/subresources/scripts/subresources/versions/methods/create/#(params)%200%20%3E%20(param)%20metadata%20%3E%20(schema)%20%3E%20(property)%20bindings) to see a list of binding type names under `Body parameters` → `metadata` → `bindings`.

> <BINDING NAME>
>
> object
>
> Binding options (excluding properties `name` and `type`)

Additional bindings are only available within Worker project types.

## [Example](https://hub.nuxt.com/docs/features/additional-bindings\#example)

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    bindings: {
      // <binding type>: {
      //   <BINDING NAME>: {
      //     // binding options
      //   }
      // }

      // additional cloudflare bindings
      analytics_engine: {
        ANALYTICS_TESTING: {
          dataset: 'testing'
        }
      },
      mtls_certificate: {
        CERT: {
          certificate_id: '<CERTIFICATE_ID>'
        }
      }
    }
  },

```

## [Disallowed bindings](https://hub.nuxt.com/docs/features/additional-bindings\#disallowed-bindings)

Some bindings types cannot be added for certain features already handled by NuxtHub that do not have additional options, or already support multiple bindings. Refer to the table below.

- `ai` → [`hub.ai`](https://hub.nuxt.com/docs/features/ai)
- `assets` → [`hub.workers`](https://hub.nuxt.com/changelog/workers)
- `browser_rendering` → [`hub.browser`](https://hub.nuxt.com/docs/features/browser)
- `vectorize` → [`hub.vectorize`](https://hub.nuxt.com/docs/features/vectorize)

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/2.features/additional-bindings.md)

[Server Logs\\
\\
Access real-time logs of your deployed Nuxt application.](https://hub.nuxt.com/docs/getting-started/server-logs) [AI\\
\\
Run machine learning models, such as LLMs, in Nuxt.](https://hub.nuxt.com/docs/features/ai)

## Drizzle Studio Update
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

June 3, 2024

# Drizzle Studio Remembers

The database admin UI now remembers where you were last time, speeding up your workflow.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

We partnered with the Drizzle team to leverage [Drizzle Studio](https://orm.drizzle.team/drizzle-studio/overview) for the admin UI of your databases within NuxtHub.

Allowing you to explore your production & preview SQL database connected to your project.

We improved the experience so Drizzle Studio remembers you current state when you navigate away and come back. When opening the database tab, you will be taken back to the same table you were last time with the same filters applied.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Webhooks Environment Selection\\
\\
It is now possible to select the environment to be notified about.](https://hub.nuxt.com/changelog/team-webhooks-env) [Blob Folders\\
\\
It is now possible to change the view of your blobs to a folder structure.](https://hub.nuxt.com/changelog/blob-folders)

## Webhook Environment Selection
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

June 14, 2024

# Webhooks Environment Selection

It is now possible to select the environment to be notified about.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

This feature is available on all [NuxtHub plans](https://hub.nuxt.com/pricing).

It is now possible to select the environment to be notified about when creating a webhook.

You can select to be notified about all environments, only the production or preview environment.

We also added the possibility to add a name to the webhook for better identification.

![Team Webhooks Env selection](https://hub.nuxt.com/_ipx/s_915x515/images/changelog/team-webhooks-env.png)

Learn more about team webhooks.

Thank you to [Estéban Soubiran](https://github.com/Barbapapazes) for suggesting this feature on [nuxt-hub/core#127](https://github.com/nuxt-hub/core/issues/127).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Hello World Template\\
\\
Hello Edge is our minimal Nuxt template to get started with server-side rendering on the Edge.](https://hub.nuxt.com/changelog/hello-edge) [Drizzle Studio Remembers\\
\\
The database admin UI now remembers where you were last time, speeding up your workflow.](https://hub.nuxt.com/changelog/drizzle-studio-remembers)

## Blob Upload Feature
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

July 1, 2024

# Blob Upload Prefix

It is now possible to upload a blob and setting the prefix beforehand.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux) [AB\\
\\
Ahad Birang\\
\\
@a\_birang](https://x.com/a_birang)

It is now possible to set the prefix before uploading a blob in the NuxtHub admin and in the Nuxt DevTools (NuxtHub Blob tab).

Learn more about Blob Storage.

This feature is available on all [NuxtHub plans](https://hub.nuxt.com/pricing).

Head over the [NuxtHub admin](https://admin.hub.nuxt.com/) to try this feature or locally in the Nuxt DevTools.

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[Deploy to NuxtHub button\\
\\
The Deploy to NuxtHub button allows you to deploy a GitHub template directly from the NuxtHub Admin.](https://hub.nuxt.com/changelog/deploy-button) [Hello World Template\\
\\
Hello Edge is our minimal Nuxt template to get started with server-side rendering on the Edge.](https://hub.nuxt.com/changelog/hello-edge)

## Remote Storage Access
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Remote Storage

Access your remote data locally or from external Nuxt projects with our secured proxy.

![NuxtHub Remote Access](https://hub.nuxt.com/_ipx/s_766x377/images/docs/nuxthub-remote-access.png)

One of the main features of NuxtHub is the ability to access your remote storage from your local environment or from external Nuxt projects. This is made possible by our secured proxy system.

There are two ways to use the remote storage:

- [**Local development**](https://hub.nuxt.com/docs/getting-started/remote-storage#local-development): Access your remote storage from your local environment, useful for sharing your database, KV, and blob data with your team or work with your production data.
- [**External Nuxt projects**](https://hub.nuxt.com/docs/getting-started/remote-storage#external-nuxt-projects): Access your remote storage from another Nuxt project, useful if your frontend is deployed on a different hosting platform and you want to use your NuxtHub project as a backend.

Your project [must be deployed](https://hub.nuxt.com/docs/getting-started/deploy) in order to use this feature.

## [Local Development](https://hub.nuxt.com/docs/getting-started/remote-storage\#local-development)

Once your project is deployed, you can use the remote storage in your local project.

Start your Nuxt project with:

Terminal

```
npx nuxt dev --remote

```

The development project will now use the remote storage from your deployed project and these logs should happen in your terminal:

Terminal

```
ℹ Using production environment
ℹ Using remote storage from https://my-project.nuxt.dev
ℹ Remote storage available: database, kv, blob

```

That's it! Your local project is now using the remote storage from your deployed project.

To always use the remote storage in your local project in development, you can use the `remote` option in your `nuxt.config` file:

nuxt.config.ts

```
export default defineNuxtConfig({
  // Apply only in development
  $development: {
    hub: {
      remote: true
    }
  }
})

```

You should not use the `remote` option in your `nuxt.config` file in production if you are deploying your project to NuxtHub or Cloudflare Pages. Use it in production only when you are [connecting from external Nuxt projects](https://hub.nuxt.com/docs/getting-started/remote-storage#external-nuxt-projects).

NuxtHub will use the remote storage from your deployed project **as long as you are logged in with the [NuxtHub CLI](https://github.com/nuxt-hub/cli) and the local project is linked to a NuxtHub project** with `npx nuxthub link` or `npx nuxthub deploy`.

### [Production vs Preview](https://hub.nuxt.com/docs/getting-started/remote-storage\#production-vs-preview)

Based on your current git branch, NuxtHub will either use your production or preview environment. You can configure your production environment in your project settings on the [NuxtHub Admin](https://admin.hub.nuxt.com/), default is set to `main`.

To force a specific environment, you can set the value to the `--remote` option:

Terminal

```
# Force remote storage from the production environment
npx nuxt dev --remote=production

# Force remote storage from the preview environment
npx nuxt dev --remote=preview

```

You can also set the `remote` options in your `nuxt.config` file to force a specific environment:

nuxt.config.ts

```
export default defineNuxtConfig({
  // Apply only in development
  $development: {
    hub: {
      // Force remote storage to preview environment
      remote: 'preview'
    }
  }
})

```

### [Custom Preview URL](https://hub.nuxt.com/docs/getting-started/remote-storage\#custom-preview-url)

By default, NuxtHub will fetch the latest preview deployment URL to connect to the remote storage. If you want to use a custom preview URL, you can use the `hub.projectUrl` option:

nuxt.config.ts

```
export default defineNuxtConfig({
  // Apply only in development
  $development: {
    hub: {
      projectUrl ({ env, branch }) {
        // Select the preview URL from the dev branch
        if (env === 'preview') {
          return 'https://dev.my-project.nuxt.dev'
        }
        return 'https://my-project.nuxt.dev'
      }
    }
  }
})

```

### [Self-hosted](https://hub.nuxt.com/docs/getting-started/remote-storage\#self-hosted)

If you are not using the [NuxtHub Admin](https://admin.hub.nuxt.com/) to manage your project, you can still use the remote storage in your local development environment.

1. Set the `NUXT_HUB_PROJECT_SECRET_KEY` environment variable in your Cloudflare Pages project settings and retry the last deployment to apply the changes (you can generate a random secret on [https://www.uuidgenerator.net/version4](https://www.uuidgenerator.net/version4))
2. Set the same `NUXT_HUB_PROJECT_SECRET_KEY` and `NUXT_HUB_PROJECT_URL` environment variables in your local project



.env



```
NUXT_HUB_PROJECT_SECRET_KEY=my-project-secret-used-in-cloudflare-env
NUXT_HUB_PROJECT_URL=https://my-nuxthub-project.pages.dev

```


Then, start your Nuxt project with:

Terminal

```
npx nuxt dev --remote

```

NuxtHub will use the remote data from your deployed project as long as the `NUXT_HUB_PROJECT_SECRET_KEY` matches the one in your Cloudflare Pages project settings.

You cannot specify the environment (production or preview) when using the remote option with a self-hosted project since you specify the deployed URL with the `NUXT_HUB_PROJECT_URL` environment variable.

## [External Nuxt Projects](https://hub.nuxt.com/docs/getting-started/remote-storage\#external-nuxt-projects)

It is possible to use the remote storage from another Nuxt project. This can be useful if your frontend is deployed on another hosting platform and you want to use your NuxtHub as your backend.

[See an example in video](https://twitter.com/Atinux/status/1766622889992757317).

To access your remote storage from another Nuxt project:

1. Install `@nuxthub/core` to your project:

pnpmyarnnpmbun

```
pnpm add @nuxthub/core

```

```
yarn add @nuxthub/core

```

```
npm install @nuxthub/core

```

```
bun add @nuxthub/core

```

2. Add it to the `modules` section in your `nuxt.config` and set the `remote` option to `true`:

nuxt.config.ts

```
export default defineNuxtConfig({
  modules: ['@nuxthub/core'],
  hub: {
    remote: true
  }
})

```

3. Add the `NUXT_HUB_PROJECT_URL` and `NUXT_HUB_PROJECT_SECRET_KEY` environment variables to your project:

.env

```
NUXT_HUB_PROJECT_URL=https://my-nuxthub-project.pages.dev
NUXT_HUB_PROJECT_SECRET_KEY=my-project-secret-used-in-cloudflare-env

```

If you haven't, set the `NUXT_HUB_PROJECT_SECRET_KEY` environment variable in your NuxtHub deployed project and make sure to redeploy.

You can now use the remote storage from your NuxtHub project in your external Nuxt project (both locally and in production).

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/1.getting-started/4.remote-storage.md)

[Deploy\\
\\
Learn how to host your full-stack Nuxt application globally with minimal configuration.](https://hub.nuxt.com/docs/getting-started/deploy) [Server Logs\\
\\
Access real-time logs of your deployed Nuxt application.](https://hub.nuxt.com/docs/getting-started/server-logs)

## Nuxt Server Logs
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

# Server Logs

Access real-time logs of your deployed Nuxt application.

## [NuxtHub Admin](https://hub.nuxt.com/docs/getting-started/server-logs\#nuxthub-admin)

When you have a successful deployment, you can access to the logs of the deployment in the [NuxtHub Admin](https://admin.hub.nuxt.com/).

Logs are available under the `Server > Logs` section of your project page. You can also access to the logs of each successful deployment in the `Deployments` section.

![NuxtHub Admin Server Logs](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-admin-server-logs.png)

## [NuxtHub CLI](https://hub.nuxt.com/docs/getting-started/server-logs\#nuxthub-cli)

Using the [NuxtHub CLI](https://github.com/nuxt-hub/cli), you can access to the logs of both `production` and `preview` deployments.

By default, the CLI will detect based on the current branch the canonical deployment of your project and stream the logs of that deployment in the CLI.

Terminal

```
npx nuxthub logs

```

![NuxtHub CLI Server Logs](https://hub.nuxt.com/_ipx/s_915x515/images/landing/nuxthub-cli-server-logs.png)

### [Production environment](https://hub.nuxt.com/docs/getting-started/server-logs\#production-environment)

To access the logs of the production environment, you can use the `--production` flag.

Terminal

```
npx nuxthub logs --production

```

### [Preview environment](https://hub.nuxt.com/docs/getting-started/server-logs\#preview-environment)

In preview environment, NuxtHub will stream the logs of the latest successful deployment in the CLI.

Terminal

```
npx nuxthub logs --preview

```

## [Cloudflare Dashboard](https://hub.nuxt.com/docs/getting-started/server-logs\#cloudflare-dashboard)

Worker project types can enable Worker Logs and view the Workers Observability tab dashboard in Cloudflare. Learn more on the [Cloudflare documentation](https://developers.cloudflare.com/workers/observability/).

![Observability Overview](https://hub.nuxt.com/_ipx/s_915x515/images/docs/observability-overview.png)

Go to the Workers Observability tab in the Cloudflare Dashboard

### [Enable Worker Logs](https://hub.nuxt.com/docs/getting-started/server-logs\#enable-worker-logs)

Enable Worker Logs within `hub.bindings.observability.logs` in your `nuxt.config.ts`.

observability

string

Observability settings

> logs
>
> boolean \| object
>
> Enable Worker Logs with default configuration.
>
> Defaults to `head_sampling_rate: 1` and `invocation_logs: true`
>
> logs
>
> boolean \| object
>
> Enable Worker Logs with custom configuration.
>
> Show properties
>
> head\_sampling\_rate
>
> number
>
> Head-based sampling allows you to log a percentage of incoming requests to your Nuxt app. Especially for high-traffic
> applications, this helps reduce log volume and manage costs, while still providing meaningful insights into your application's
> performance. When you configure a head-based sampling rate, you can control the percentage of requests that get logged.
> All logs within the context of the request are collected.
>
> To enable head-based sampling, set `head_sampling_rate` within the observability configuration.
> The valid range is from 0 to 1, where 0 indicates zero out of one hundred requests are logged, and 1 indicates
> every request is logged. If `head_sampling_rate` is unspecified, it is configured to a default value of 1 (100%).
> In the example below, `head_sampling_rate` is set to 0.01, which > means one out of every one hundred requests is logged.
>
> invocation\_logs
>
> boolean?
>
> Each Workers invocation returns a single invocation log that contains details such as the Request, Response, and related metadata. These invocation logs can be identified by the field $cloudflare.$metadata.type = "cf-worker-event". Each invocation log is enriched with information available to Cloudflare in the context of the invocation.
>
> In the Workers Logs UI, logs are presented with a localized timestamp and a message. The message is dependent on the invocation handler. For example, Fetch requests will have a message describing the request method and the request URL, while cron events will be listed as cron. Below is a list of invocation handlers along with their invocation message.

[Report an issue](https://github.com/nuxt-hub/core/issues/new/choose) or [Edit this page on GitHub](https://github.com/nuxt-hub/core/edit/main/docs/content/docs/1.getting-started/5.server-logs.md)

[Remote Storage\\
\\
Access your remote data locally or from external Nuxt projects with our secured proxy.](https://hub.nuxt.com/docs/getting-started/remote-storage) [Additional\\
\\
Add additional Cloudflare resource bindings to deployments](https://hub.nuxt.com/docs/features/additional-bindings)

## NuxtHub GitHub Integration
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

December 22, 2024

# NuxtHub GitHub App & Action

Introducing our GitHub App & Action for automating your Nuxt deployments with GitHub as well as a new project creation flow.

[RA\\
\\
Rihan Arfan\\
\\
@RihanArfan](https://bsky.app/profile/rihan.dev) [SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://bsky.app/profile/atinux.com)

We're thrilled to release our brand new [GitHub Application](https://github.com/apps/nuxthub-admin) & [GitHub Action](https://github.com/marketplace/actions/deploy-to-nuxthub) to help you create and deploy Nuxt applications to NuxtHub.

## [Pull Request Integration](https://hub.nuxt.com/changelog/github-app-and-action\#pull-request-integration)

Once setup, NuxtHub will automatically comment on pull requests with branch URLs, permalinks and QR codes for easy preview access.

![GitHub Action](https://hub.nuxt.com/_ipx/s_926x520/images/changelog/nuxthub-github-app-action.png)

## [GitHub Deployments](https://hub.nuxt.com/changelog/github-app-and-action\#github-deployments)

NuxtHub also integrates with GitHub's deployment system, including status updates and environment tracking.

![NuxtHub GitHub Action deployments](https://hub.nuxt.com/_ipx/s_926x521/images/changelog/nuxthub-github-action-deployment.png)

This includes GitHub Deployments support in pull requests.

![NuxtHub GitHub Action deployments](https://hub.nuxt.com/_ipx/s_926x219/images/changelog/nuxthub-github-action-deployment-pr.png)

And many more:

- **Deployment Protection**: Support for GitHub's deployment protection rules which enable approval workflows and environment restrictions ( [learn more on GitHub's documentation](https://docs.github.com/en/actions/managing-workflow-runs-and-deployments/managing-deployments/managing-environments-for-deployment#deployment-protection-rules))
- **Secure**: Our GitHub integration prevents the need for long-lived secrets as it uses OIDC under the hood
- **Customizable**: You can create tailored workflows to fit your DevOps requirements using our GitHub Action

## [Cloning a Template](https://hub.nuxt.com/changelog/github-app-and-action\#cloning-a-template)

Thanks to the new GitHub App, you can now clone a template from NuxtHub Admin and deploy it with a single click.

![NuxtHub GitHub App clone template](https://hub.nuxt.com/_ipx/s_2596x1460/images/changelog/nuxthub-github-app-clone-template.png)

The repository will be created in your GitHub account with the GitHub Actions workflow already configured.

## [Migrating to GitHub Actions](https://hub.nuxt.com/changelog/github-app-and-action\#migrating-to-github-actions)

Migrating from Cloudflare Pages CI or the legacy GitHub Action is simple and can be done from [NuxtHub Admin](https://admin.hub.nuxt.com/) → Project → Settings → Git.

When migrating from Cloudflare Pages CI, please note:

- Deployment quotas will shift from [Pages CI limits](https://developers.cloudflare.com/pages/platform/limits/#builds) to your [GitHub Actions usage](https://docs.github.com/en/billing/managing-billing-for-your-products/managing-billing-for-github-actions/about-billing-for-github-actions#included-storage-and-minutes)
- Environment variables and secrets needed at build time should be managed through [GitHub Environment settings](https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/store-information-in-variables#creating-configuration-variables-for-an-environment) (we are working on a way to synchronize them automatically)

Learn more about deploying with GitHub Actions to NuxtHub.

P.S. Give our new [GitHub Action](https://github.com/nuxt-hub/action) a star 🌟💚

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to changelog](https://hub.nuxt.com/changelog)

Share:

[NuxtHub on Workers\\
\\
Deploy your Nuxt apps to Cloudflare Workers and build real-time experiences with zero configuration.](https://hub.nuxt.com/changelog/workers) [Cloudflare Access integration\\
\\
We now support Cloudflare Access within NuxtHub admin, module and CLI](https://hub.nuxt.com/changelog/cloudflare-access)

## Cloudflare AI for UX
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

Tutorial·  August 25, 2024

# Using Cloudflare AI Models for User Experience

Learn how I leverage Cloudflare AI models in Nuxt to improve my drawing app accessibility, SEO and User Experience.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

## [Introduction](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience\#introduction)

Let's improve [Atidraw](https://github.com/atinux/atidraw), an open source collaborative drawing app made with Nuxt.

The application has basic features such as:

- Authentication with Google, GitHub or login anonymously based on [`nuxt-auth-utils`](https://github.com/Atinux/nuxt-auth-utils)
- Drawing with [`signature_pad`](https://github.com/szimek/signature_pad)
- Upload and store drawings with Cloudflare R2 using [`hubBlob()`](https://hub.nuxt.com/docs/features/blob)

You can play with it on [draw.nuxt.dev](https://draw.nuxt.dev/).

Checkout how we created Atidraw in the ["Code, Draw, Deploy: A drawing app with Nuxt & Cloudflare R2"](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2) blog post.

## [Cloudflare AI Pricing](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience\#cloudflare-ai-pricing)

This is important to know how Cloudflare AI models are billed.

Cloudflare free allocation allows anyone to use a total of 10,000 Neurons per day at no charge.

Neurons are Cloudflare's way of measuring AI outputs across different models. To give you a sense of what you can accomplish with 10,000 Neurons, you can generate one of the following (or an equivalent mix):

- 100-200 LLM responses
- 500 translations
- 500 seconds of speech-to-text audio
- 10,000 text classifications
- 1,500 - 15,000 embeddings

Once you reach the free allocation, you can use the AI models with a pay-as-you-go model of $0.011 / 1,000 Neurons.

**AI Models in beta are free to use**, at this time, all the models we use in this tutorial are in beta, **so you we use them for free**.

Read more about **Cloudflare AI pricing**.

## [Add AI to Nuxt](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience\#add-ai-to-nuxt)

To add AI to our Nuxt application, we need to enable the AI feature in our `nuxt.config.ts` file.

nuxt.config.ts

```
export default defineNuxtConfig({
  hub: {
    ai: true, // <--- Enable AI
    blob: true,
  }
})

```

Then, we want to make sure our project is linked to our NuxtHub account.

Terminal

```
npx nuxthub link

```

This will allow the module to call AI models from your linked Cloudflare account in development mode.

That's it! We can now use the AI models from Cloudflare using [`hubAI()`](https://hub.nuxt.com/docs/features/ai).

I've been thinking about two features:

- Generate the alternative text for the user drawings, improving the accessibility of the application & SEO.
- Generate an image based on the drawing and the alternative text, as a way to make the application more interactive.

Before starting, I took a look at [Cloudflare's multi modal playground](https://multi-modal.ai.cloudflare.com/) and played with some models.

![Atidraw AI models](https://hub.nuxt.com/_ipx/s_915x515/images/blog/atidraw-ai-models.png)

This guided me to the following models:

- [LLaVA](https://developers.cloudflare.com/workers-ai/models/llava-1.5-7b-hf/) for the alternative text generation
- [Stable Diffusion IMG2IMG](https://developers.cloudflare.com/workers-ai/models/stable-diffusion-v1-5-img2img/) for the alternative drawing generation

See all **Cloudflare AI models** available.

## [Image Alternative Text](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience\#image-alternative-text)

To generate the alternative text for the user drawings, we use the [LLaVA](https://developers.cloudflare.com/workers-ai/models/llava-1.5-7b-hf/) model.

Let's see our current `/api/upload` route:

server/api/upload.post.ts

```
export default eventHandler(async (event) => {
  // Make sure the user is authenticated to upload
  const { user } = await requireUserSession(event)

  // Read the form data
  const form = await readFormData(event)
  const drawing = form.get('drawing') as File

  // Make sure the drawing is a jpeg image and is not larger than 1MB
  ensureBlob(drawing, { maxSize: '1MB', types: ['image/jpeg'] })

  // Create a new pathname to be smaller than the last one uploaded (for a desc ordering)
  const name = `${new Date('2050-01-01').getTime() - Date.now()}`
  // Store the image in the R2 bucket with the `drawings/` prefix
  return hubBlob().put(`${name}.jpg`, drawing, {
    prefix: 'drawings/',
    addRandomSuffix: true,
    customMetadata: {
      userProvider: user.provider,
      userId: user.id,
      userName: user.name,
      userAvatar: user.avatar,
      userUrl: user.url,
    },
  })
})

```

The `LLaVA` model is expecting a `Uint8Array` of the image and a `prompt` to generate the alternative text:

```
const { description } = await hubAI().run('@cf/llava-hf/llava-1.5-7b-hf', {
  prompt: 'Describe this drawing in one sentence.',
  // Convert the drawing from File to Uint8Array
  image: [...new Uint8Array(await drawing.arrayBuffer())],
}))

```

We can add the description to the custom metadata of the drawing:

server/api/upload.post.ts

```
export default eventHandler(async (event) => {
  // ...
+  const { description } = await hubAI().run('@cf/llava-hf/llava-1.5-7b-hf', {
+    prompt: 'Describe this drawing in one sentence.',
+    image: [...new Uint8Array(await drawing.arrayBuffer())],
+  }))

  // ...
  return hubBlob().put(`${name}.jpg`, drawing, {
    // ...
    customMetadata: {
       // ...
       userUrl: user.url,
+      description
    },
  })
})

```

Lastly, we need to update our listing page to display the description in the `<img>` tag but also in the `title` attribute so the user can see the description when hovering the image.

app/pages/index.vue

```
<script setup lang="ts">
const { data } = await useFetch('/api/drawings')
</script>

<template>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
    <div v-for="drawing in data?.blobs" :key="drawing.pathname" class="flex flex-col gap-2">
      <img
        :src="`/drawings/${drawing.pathname}`"
        :alt="drawing.customMetadata.description"
        :title="drawing.customMetadata.description"
      />
      <!-- ... -->
    </div>
  </div>
</template>

```

Let's see the result:

## [Alternative Drawing](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience\#alternative-drawing)

To generate a new drawing based from the drawing and the alternative text, we need to use the [Stable Diffusion IMG2IMG](https://developers.cloudflare.com/workers-ai/models/stable-diffusion-v1-5-img2img/) model.

```
await hubAI().run('@cf/runwayml/stable-diffusion-v1-5-img2img', {
  image: imageAsUint8Array,
  prompt: imageAltText,
  guidance: 8,
  strength: 0.5,
})

```

It takes the following inputs:

- `image` (as `Uint8Array`) to use as a reference for the image generation
- `prompt` to guide the model in generating the image
- `guidance` to control how closely the generated image adheres to the given text prompt
- `strength` to control how much the model changes the input image, with higher values creating bigger changes.

Let's update our `/api/upload` route to generate the alternative drawing and store it our R2 bucket.

server/api/upload.post.ts

```
export default eventHandler(async (event) => {
  // ...

  const aiImage = await hubAI().run('@cf/runwayml/stable-diffusion-v1-5-img2img', {
    prompt: description || 'A drawing',
    guidance: 8,
    strength: 0.5,
    image: [...new Uint8Array(await drawing.arrayBuffer())],
  })
    .then((blob: Blob | Uint8Array) => {
      // Convert Uint8Array to Blob
      if (blob instanceof Uint8Array) {
        blob = new Blob([blob])
      }
      // Store the image in the R2 bucket with the `ai/` prefix
      return hubBlob().put(`${name}.png`, blob, {
        prefix: 'ai/',
        addRandomSuffix: true,
        contentType: 'image/png',
      })
    })

  // ...
  return hubBlob().put(`${name}.jpg`, drawing, {
    // ...
    customMetadata: {
      // ...
      aiImage: aiImage.pathname,
    },
  })
})

```

As you can see, we store the `pathname` of the AI generated image in the custom metadata of the drawing.

Now, we can display the AI generated image in our listing page when hovering the user's drawing:

app/pages/index.vue

```
<script setup lang="ts">
const { data } = await useFetch('/api/drawings')
</script>

<template>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
    <div v-for="drawing in data?.blobs" :key="drawing.pathname" class="flex flex-col gap-2">
      <div
          class="group relative max-w-[400px]"
          :title="drawing.customMetadata.description"
        >
          <!-- User drawing -->
          <img
            :src="`/drawings/${drawing.pathname}`"
            :alt="drawing.customMetadata.description"
            class="w-full rounded aspect-1"
            loading="lazy"
          >
          <!-- AI generated image, displayed on hover -->
          <img
            :src="`/drawings/${drawing.customMetadata?.aiImage}`"
            :alt="`AI generated image of ${drawing.customMetadata?.description}`"
            class="w-full rounded aspect-1 absolute inset-0 opacity-0 group-hover:opacity-100"
            loading="lazy"
          >
        </div>
    </div>
  </div>
</template>

```

I am quite happy with the result:

Sometimes the AI generated image is black, this is because the model is not able to generate an image from the description, most of the time because it is sensitive content or it misunderstood the description.

## [Conclusion](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience\#conclusion)

This is the end of this tutorial on how to use Cloudflare AI models in a Nuxt application. I hope you enjoyed it and that it gave you some ideas on how to use AI for improving accessibility, SEO or User Experience.

Feel free to expand on this foundation and add your own unique features to make Atidraw yours!

The source code of the app is available at **github.com/atinux/atidraw**.

The demo is available at **draw.nuxt.dev**.

If you prefer, you can also deploy this project on your Cloudflare account by clicking on the button below:

[![Deploy to NuxtHub](https://hub.nuxt.com/button.svg)](https://hub.nuxt.com/new?repo=atinux/atidraw)

Happy coding & drawing!

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to blog](https://hub.nuxt.com/blog)

Share:

[How to use Libsodium in Cloudflare Workers\\
\\
Learn how to leverage NaCL to crypto box seal values, useful when working with GitHub repository secrets.](https://hub.nuxt.com/blog/libsodium-cloudflare-workers) [Code, Draw, Deploy: A drawing app with Nuxt & Cloudflare R2\\
\\
Let's walk through the process of creating Atidraw, a web-based drawing application built with Nuxt and using Cloudflare R2 for storage.](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2)

## Drawing App Tutorial
[NuxtLabs is joining Vercel](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

NuxtLabs is joining Vercel

[Read the announcement](https://nuxtlabs.com/?utm_source=nuxthub&utm_medium=banner&utm_campaign=nuxtlabs-vercel)

Tutorial·  August 10, 2024

# Code, Draw, Deploy: A drawing app with Nuxt & Cloudflare R2

Let's walk through the process of creating Atidraw, a web-based drawing application built with Nuxt and using Cloudflare R2 for storage.

[SC\\
\\
Sebastien Chopin\\
\\
@atinux](https://x.com/atinux)

## [Introduction](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#introduction)

I won't go into each detail of the code, but I'll try to explain the main concepts and how to build a drawing app with Nuxt and Cloudflare R2.

Atidraw is a web application that lets you create and share your drawings with the world. Our app uses OAuth for user authentication and Cloudflare R2 to store and list drawings.

The application runs with server-side rendering on the edge using Cloudflare Pages on the Workers free plan.

The demo is available at **draw.nuxt.dev**.

The source code of the app is available at **github.com/atinux/atidraw**.

## [Project Dependencies](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#project-dependencies)

Our Nuxt application uses the following dependencies:

- [`nuxt-auth-utils`](https://github.com/atinux/nuxt-auth-utils) for user authentication
- [`signature_pad`](https://github.com/szimek/signature_pad) for the drawing canvas
- [`@nuxt/ui`](https://ui.nuxt.com/) for the UI components
- [`@nuxthub/core`](https://github.com/nuxthub/core) for a zero config experience with Cloudflare R2

In our `nuxt.config.ts` we need to enable the following modules and options:

nuxt.config.ts

```
export default defineNuxtConfig({
  modules: [\
    '@nuxthub/core',\
    '@nuxt/ui',\
    'nuxt-auth-utils'\
  ],
  hub: {
    // Enable Cloudflare R2 storage
    blob: true
  },
})

```

The `blob` option will use Cloudflare platform proxy in development and automatically create a Cloudflare R2 bucket for your project when you deploy it. It also provides helpers to upload and list files.

The project is also using the `future.compatibilityVersion: 4` option to leverage the [new directory structure](https://nuxt.com/docs/getting-started/upgrade#new-directory-structure).

## [User Authentication](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#user-authentication)

For user authentication, we'll use [`nuxt-auth-utils`](https://github.com/atinux/nuxt-auth-utils). It provides functions to authenticate users with OAuth providers and stores the user session in encrypted cookies.

First, we need to set up a session secret (used to encrypt & decrypt the session cookie) and our OAuth application credentials in the `.env` file:

.env

```
NUXT_SESSION_PASSWORD=our_session_secret
NUXT_OAUTH_GITHUB_CLIENT_ID=our_github_client_id
NUXT_OAUTH_GITHUB_CLIENT_SECRET=our_github_client_secret

```

Then, create a server route to handle the OAuth callback in `server/auth/github.get.ts`:

server/auth/github.get.ts

```
export default oauthGitHubEventHandler({
  async onSuccess(event, { user }) {
    await setUserSession(event, {
      user: {
        provider: 'github',
        id: String(user.id),
        name: user.name || user.login,
        avatar: user.avatar_url,
        url: user.html_url,
      },
    })

    return sendRedirect(event, '/draw')
  },
})

```

The `.get.ts` suffix indicates that only GET requests will be handled by this route.

When the user hits `/auth/github`:

1. `oauthGitHubEventHandler` redirects the user to the GitHub OAuth page
2. The user is then redirected back to **/auth/github**
3. `onSuccess()` is called and the user session is set in a cookie
4. The user is finally redirected to **/draw**

In [`app/pages/draw.vue`](https://github.com/atinux/atidraw/blob/main/app/pages/draw.vue), we can leverage [`useUserSession()`](https://github.com/atinux/nuxt-auth-utils?tab=readme-ov-file#vue-composable) to know if the user is authenticated or not.

app/pages/draw.vue

```
<script setup lang="ts">
const { loggedIn } = useUserSession()
// ...
</script>

<template>
  <DrawPad v-if="loggedIn" @save="save" />
  <UButton v-else to="/auth/github" label="Sign-in with GitHub" external />
</template>

```

Learn more about the `useUserSession()` composable.

As we use TypeScript, we can type the session object to get autocompletion and type checking by creating a `types/auth.d.ts` file:

types/auth.d.ts

```
declare module '#auth-utils' {
  interface User {
    provider: 'github' | 'google'
    id: string
    name: string
    avatar: string
    url: string
  }
}
// export is required to avoid type errors
export {}

```

## [Drawing Canvas](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#drawing-canvas)

For the drawing interface, we'll use the `signature_pad` library and create a new component in `components/DrawPad.vue`:

app/components/DrawPad.vue

```
<script setup lang="ts">
import SignaturePad from 'signature_pad'

const emit = defineEmits(['save'])
const canvas = ref()
const signaturePad = ref()

onMounted(() => {
  signaturePad.value = new SignaturePad(canvas.value, {
    penColor: '#030712',
    backgroundColor: '#f9fafb',
  })
})

async function save() {
  const dataURL = signaturePad.value.toDataURL('image/jpeg')
  // Emit the dataURL to the parent component
  emit('save', dataURL)
}
</script>

<template>
  <div class="max-w-[400px]">
    <canvas ref="canvas" class="border rounded-md" />
    <UButton @click="save" />
  </div>
</template>

```

See the full source code of **app/components/DrawPad.vue**.

## [Upload Drawings](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#upload-drawings)

In the `app/pages/draw.vue` page, we need to upload the drawing to our Cloudflare R2 bucket.

For this, we want to convert the `dataURL` we receive from the drawing canvas to a [`Blob`](https://developer.mozilla.org/en-US/docs/Web/API/Blob), then the Blob to a [`File`](https://developer.mozilla.org/en-US/docs/Web/API/File) to specify the file type and name.

Finally we create a [`FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData) object with the file and upload it to the **/api/upload** API route.

app/pages/draw.vue

```
<script setup lang="ts">
const { loggedIn } = useUserSession()

async function save(dataURL: string) {
  // Transform the dataURL to a Blob
  const blob = await fetch(dataURL).then(res => res.blob())
  // Transform the Blob to a File
  const file = new File([blob], `drawing.jpg`, { type: 'image/jpeg' })
  // Create the form data
  const form = new FormData()
  form.append('drawing', file)

  // Upload the file to the server
  await $fetch('/api/upload', {
    method: 'POST',
    body: form
  })
    .then(() => navigateTo('/'))
    .catch((err) => alert(err.data?.message || err.message))
}
</script>

<template>
  <DrawPad v-if="loggedIn" @save="save" />
  <!-- ... -->
</template>

```

Let's create the API route to store the drawing in the Cloudflare R2 bucket:

server/api/upload.post.ts

```
export default eventHandler(async (event) => {
  // Make sure the user is authenticated to upload
  const { user } = await requireUserSession(event)

  // Read the form data
  const form = await readFormData(event)
  const drawing = form.get('drawing') as File

  // Ensure the file is a jpeg image and is not larger than 1MB
  ensureBlob(drawing, {
    maxSize: '1MB',
    types: ['image/jpeg'],
  })

  // Upload the file to the Cloudflare R2 bucket
  return hubBlob().put(`${Date.now()}.jpg`, drawing, {
    addRandomSuffix: true,
    customMetadata: {
      userProvider: user.provider,
      userId: user.id,
      userName: user.name,
      userAvatar: user.avatar,
      userUrl: user.url,
    },
  })
})

```

The `requireUserSession()` function is provided by [`nuxt-auth-utils`](https://github.com/atinux/nuxt-auth-utils) and will throw a `401` error if the user is not authenticated.

As you can see, we don't need a database as we store the user metadata in the Cloudflare R2 bucket custom metadata.

Learn more about the [`hubBlob()`](https://hub.nuxt.com/docs/storage/blob) server function to work with the Cloudflare R2 bucket.

## [List Drawings](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#list-drawings)

It's time to list our user drawings! First, however, we need to create a new API route in `server/api/drawings.get.ts`:

server/api/drawings.get.ts

```
export default eventHandler(async (event) => {
  // Return 100 last drawings
  return hubBlob().list({
    limit: 100
  })
})

```

Then, we'll create a new page in `app/pages/index.vue` to list the drawings:

app/pages/index.vue

```
<script setup lang="ts">
const { data } = await useFetch('/api/drawings')
</script>

<template>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
    <div v-for="drawing in data?.blobs" :key="drawing.pathname" class="flex flex-col gap-2">
      <img :src="`/drawings/${drawing.pathname}`" :alt="drawing.pathname" />
      <div class="flex items-center justify-between">
        <span>{{ drawing.customMetadata?.userName }}</span>
        <span class="text-xs text-gray-500">{{ drawing.uploadedAt }}</span>
      </div>
    </div>
  </div>
</template>

```

That's it! We have a minimal and fully functional drawing application.

## [Drawings Order](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#drawings-order)

You may have noticed that the last drawing is displayed last, this is because Cloudflare R2 is using alphabetical order to list the files and we use the timestamp (using `Date.now()`) as the file name. Also, R2 doesn't support listing files with a custom order.

Even though it's easy to add a Cloudflare D1 database with [`hubDatabase()`](https://hub.nuxt.com/docs/storage/database), I wanted to keep this example as simple as possible.

Instead, I had the idea to use the timestamp in 2050 minus the timestamp of the drawing to get a descending order. It's not perfect but it works, until 2050, it's still a long time 😄.

Let's update our **/api/upload** route to update the filename:

server/api/upload.post.ts

```
export default eventHandler(async (event) => {
  // ...

  /**
   * Create a new pathname to be smaller than the last one uploaded
   * So the blob listing will send the last uploaded image at first
   * We use the timestamp in 2050 minus the current timestamp
   * So this project will start to be buggy in 2050, sorry for that
   **/
  const name = `${new Date('2050-01-01').getTime() - Date.now()}`

  // Upload the file to the Cloudflare R2 bucket
  return hubBlob().put(`${name}.jpg`, drawing, {
    // ...
  })
})

```

We now have our last drawing uploaded at the top of our listing 🚀

## [Drawings Pagination](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#drawings-pagination)

What if we have more than 100 drawings? We need to add pagination to our listing.

The [`hubBlob().list()`](https://hub.nuxt.com/docs/storage/blob#list) accepts a `cursor` parameter to paginate the results.

Let's update our API route to support pagination with a `cursor` query parameter:

server/api/drawings.get.ts

```
export default eventHandler(async (event) => {
  const { cursor } = await getQuery<{ cursor?: string }>(event)

  return hubBlob().list({
    limit: 100,
    cursor
  })
})

```

The API route returns a `BlobListResult` object with a `cursor` and `hasMore` properties:

```
interface BlobListResult {
  blobs: BlobObject[]
  hasMore: boolean
  cursor?: string
  folders?: string[]
}

```

The returned `cursor` value is used to get the next page of drawings (if `hasMore` is `true`).

We can use [VueUse `vInfiniteScroll` directive](https://vueuse.org/core/useInfiniteScroll/#directive-usage) to create an infinite scroll to load more drawings.

app/pages/index.vue

```
<script setup lang="ts">
import { vInfiniteScroll } from '@vueuse/components'

const loading = ref(false)
const { data } = await useFetch('/api/drawings', {
  // don't return a shallowRef as we mutate the array in loadMore()
  deep: true,
})

async function loadMore() {
  if (loading.value || !data.value?.hasMore) return
  loading.value = true

  const more = await $fetch(`/api/drawings`, {
    query: { cursor: data.value.cursor },
  })
  data.value.blobs.push(...more.blobs)
  data.value.cursor = more.cursor
  data.value.hasMore = more.hasMore
  loading.value = false
}
</script>

<template>
  <div class="my-8">
    <!-- ... -->
    <div v-if="data?.hasMore" v-infinite-scroll="[loadMore, { distance: 10, interval: 1000 }]">
      <UButton :loading="loading" @click="loadMore">
        {{ loading ? 'Loading more drawings...' : 'Load more drawings' }}
      </UButton>
    </div>
  </div>
</template>

```

We now have a pagination system that loads more drawings when the user scrolls to the bottom of the page.

## [Deploying the App](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#deploying-the-app)

You can host your drawing application on a **free Cloudflare account** and **free NuxtHub account**.

All you have to do is to run one single command:

Terminal

```
npx nuxthub deploy

```

This command will:

- Build your Nuxt application
- Create a new Cloudflare Pages project on your Cloudflare account
- Provision a Cloudflare R2 bucket
- Deploy your application
- Provide you with a URL to access your application with a free `<your-app>.nuxt.dev` domain.

Learn more about [deploying Nuxt apps with NuxtHub](https://hub.nuxt.com/docs/getting-started/deploy) (CLI, GitHub action or Cloudflare Pages CI).

If you prefer, you can also deploy this project using the NuxtHub Admin by clicking on the button below:

[![Deploy to NuxtHub](https://hub.nuxt.com/button.svg)](https://hub.nuxt.com/new?repo=atinux/atidraw)

### [Remote Storage](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#remote-storage)

Once your project is deployed, you can use [NuxtHub Remote Storage](https://hub.nuxt.com/docs/getting-started/remote-storage) to connect to your preview or production Cloudflare R2 bucket in development using the `--remote` flag:

Terminal

```
npx nuxt dev --remote

```

## [Manage Drawings](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#manage-drawings)

Some users may draw inappropriate drawings that we may want to remove. For this, NuxtHub provides a Blob panel in both the Nuxt DevTools and the NuxtHub Admin.

### [Development](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#development)

When running your project locally, you can open the Nuxt DevTools:

- `Shift + Option + D` shortcut or clicking on the Nuxt logo in the botttom of the screen
- The look for the **Hub Blob** tab (you can also use `CTRL + K` to open the search bar and type `Blob`)

![NuxtHub DevTools Blob for Atidraw](https://hub.nuxt.com/_ipx/s_915x515/images/blog/atidraw-devtools-blob.png)

### [Production](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#production)

You can manage all the drawings using the Blob panel in the NuxtHub Admin.

Once deployed, open the admin panel of your application with:

Terminal

```
npx nuxthub manage

```

Or go to [https://admin.hub.nuxt.com](https://admin.hub.nuxt.com/) and select your project.

![NuxtHub Admin Blob for Atidraw](https://hub.nuxt.com/_ipx/s_915x515/images/blog/atidraw-admin-blob.png)

## [Conclusion](https://hub.nuxt.com/blog/drawing-app-with-nuxt-and-cloudflare-r2\#conclusion)

Congratulations! You've now built a fully functional drawing application using Nuxt and Cloudflare R2 for storage. Users can create drawings, save them to the cloud, and access them from anywhere.

Feel free to expand on this foundation and add your own unique features to make Atidraw yours!

The source code of the app is available at **github.com/atinux/atidraw**.

The demo is available at **draw.nuxt.dev**.

Checkout the next article on how to leverage Cloudflare AI to generate the alternative text for the user drawings (accessibility & SEO) as well as generating an alternative drawing using AI: [Cloudflare AI for User Experience](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience).

## Start with NuxtHub today

[Deploy now](https://admin.hub.nuxt.com/) [Read the docs](https://hub.nuxt.com/docs/getting-started)

[Back to blog](https://hub.nuxt.com/blog)

Share:

[Using Cloudflare AI Models for User Experience\\
\\
Learn how I leverage Cloudflare AI models in Nuxt to improve my drawing app accessibility, SEO and User Experience.](https://hub.nuxt.com/blog/cloudflare-ai-for-user-experience) [Introducing NuxtHub Beta\\
\\
We are excited to announce the beta release of NuxtHub, a new way to build full-stack Nuxt applications globally with zero configuration.](https://hub.nuxt.com/blog/beta)

